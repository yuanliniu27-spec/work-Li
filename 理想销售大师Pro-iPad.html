<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ÁêÜÊÉ≥ÈîÄÂîÆAIÂ§ßÂ∏à - iPadÁâà</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --li-green: #0f2520;
            --li-gold: #d4b886;
            --li-blue: #2196F3;
            --bg-dark: #1a1a2e;
            --bg-card: #16213e;
            --text-light: #ffffff;
            --text-dim: rgba(255,255,255,0.7);
            --text-darker: rgba(255,255,255,0.5);
            --stage-a1: #4CAF50;
            --stage-i2: #2196F3;
            --stage-a3: #FF5722;
        }

        body {
            font-family: "PingFang SC", "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ebe9 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: #2c3e50;
            height: 100vh;
            overflow: hidden;
            user-select: none;
            position: relative;
            font-size: 16px;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 30%, rgba(212, 184, 134, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(76, 175, 80, 0.05) 0%, transparent 60%);
            pointer-events: none;
            z-index: 0;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* È°∂ÈÉ®ÂØºËà™Ê†è */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 12px 20px 12px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(212, 184, 134, 0.3);
            position: relative;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            z-index: 1000;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .logo span {
            color: #d4b886;
        }

        /* üÜï CRMÂêåÊ≠•Áä∂ÊÄÅÊåáÁ§∫Âô® */
        .sync-status {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: rgba(76, 175, 80, 0.15);
            border-radius: 16px;
            font-size: 0.75rem;
            color: #2c3e50;
        }

        .sync-icon {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85rem;
            color: white;
        }

        .user-detail {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            font-size: 0.9rem;
            color: #2c3e50;
        }

        .user-role {
            font-size: 0.75rem;
            color: rgba(44, 62, 80, 0.6);
        }

        /* ‰∏ªÂÜÖÂÆπÂå∫ */
        .main-content {
            display: flex;
            height: calc(100vh - 120px);
            padding: 15px;
            gap: 15px;
            overflow: hidden;
        }

        /* ‰∏â‰∏™Èò∂ÊÆµÂàó */
        .stage-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(212, 184, 134, 0.25);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        /* üÜï ÊãñÊãΩÊó∂ÁöÑÈ´ò‰∫ÆÊïàÊûú */
        .stage-column.drag-over {
            background: rgba(212, 184, 134, 0.15);
            border: 2px dashed var(--li-gold);
        }

        .stage-header {
            padding: 14px;
            font-weight: bold;
            font-size: 1rem;
            border-bottom: 2px solid;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stage-a1 .stage-header {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.9), rgba(76, 175, 80, 0.7));
            border-color: var(--stage-a1);
        }

        .stage-i2 .stage-header {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.9), rgba(33, 150, 243, 0.7));
            border-color: var(--stage-i2);
        }

        .stage-a3 .stage-header {
            background: linear-gradient(135deg, rgba(255, 87, 34, 0.9), rgba(255, 87, 34, 0.7));
            border-color: var(--stage-a3);
        }

        .stage-title {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .stage-name {
            font-size: 1rem;
            color: white;
        }

        .stage-desc {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: normal;
        }

        .stage-count {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            color: white;
        }

        /* ÂÆ¢Êà∑Âç°ÁâáÂàóË°® */
        .customer-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .customer-list::-webkit-scrollbar {
            width: 4px;
        }

        .customer-list::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 2px;
        }

        /* üÜï ÂÆ¢Êà∑Âç°Áâá - ÂèØÊãñÊãΩ */
        .customer-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 10px;
            padding: 14px;
            cursor: move;
            transition: all 0.3s;
            border: 1px solid rgba(212, 184, 134, 0.3);
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
        }

        .customer-card.dragging {
            opacity: 0.6;
            transform: rotate(2deg);
        }

        .customer-card:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-2px);
            border-color: rgba(212, 184, 134, 0.5);
            box-shadow: 0 3px 12px rgba(212, 184, 134, 0.2);
        }

        .stage-a1 .customer-card {
            border-left: 3px solid var(--stage-a1);
        }

        .stage-i2 .customer-card {
            border-left: 3px solid var(--stage-i2);
        }

        .stage-a3 .customer-card {
            border-left: 3px solid var(--stage-a3);
        }

        .customer-card.active {
            border-color: var(--li-gold);
            background: rgba(212, 184, 134, 0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .customer-name {
            font-size: 0.9rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 6px;
            color: #ffffff;
        }

        /* üÜï ÁÉ≠ÂäõÂõæÂõæÊ†áÊåâÈíÆ */
        .heatmap-icon-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(33, 150, 243, 0.15);
            border: 1px solid rgba(33, 150, 243, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .heatmap-icon-btn:hover {
            background: rgba(33, 150, 243, 0.3);
            transform: scale(1.1);
        }

        .priority-badge {
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 8px;
            font-weight: normal;
        }

        .priority-high {
            background: #FF5722;
            color: white;
        }

        .priority-medium {
            background: #FF9800;
            color: white;
        }

        .priority-low {
            background: #4CAF50;
            color: white;
        }

        .customer-tags {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            margin-bottom: 8px;
        }

        .tag {
            font-size: 0.7rem;
            padding: 3px 8px;
            background: rgba(0, 0, 0, 0.04);
            border-radius: 8px;
            color: rgba(44, 62, 80, 0.6);
        }

        .card-info {
            font-size: 0.85rem;
            color: rgba(44, 62, 80, 0.6);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .ai-suggestion {
            background: rgba(33, 150, 243, 0.1);
            border-left: 2px solid var(--li-blue);
            padding: 8px;
            margin-top: 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            color: rgba(44, 62, 80, 0.7);
        }

        .ai-suggestion::before {
            content: "ü§ñ AIÂª∫ËÆÆÔºö";
            color: var(--li-blue);
            font-weight: bold;
        }

        .card-actions {
            display: flex;
            gap: 6px;
            margin-top: 8px;
        }

        .action-btn {
            flex: 1;
            padding: 6px;
            border: none;
            border-radius: 6px;
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .btn-primary {
            background: var(--li-gold);
            color: var(--li-green);
        }

        .btn-primary:hover {
            background: #eaddc5;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.15);
            color: var(--text-light);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.25);
        }

        /* ÂõæÊ†áÊåâÈíÆÊ†∑Âºè */
        .btn-icon {
            flex: 0 0 auto;
            width: 36px;
            height: 36px;
            padding: 6px;
            background: rgba(255,255,255,0.1);
            color: var(--text-light);
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-icon img {
            width: 22px;
            height: 22px;
            object-fit: contain;
        }

        .btn-icon:hover {
            background: var(--li-gold);
            color: var(--li-green);
            transform: scale(1.1);
        }

        /* Â∫ïÈÉ®Âø´Êç∑Êìç‰ΩúÊ†è */
        .bottom-toolbar {
            display: none;
        }

        .toolbar-item {
            display: none;
        }

        .toolbar-item:hover {
            display: none;
        }

        /* üÜï Â∑•ÂÖ∑Ê†èÂæΩÁ´† */
        .toolbar-badge {
            position: absolute;
            top: 5px;
            right: 10px;
            background: #FF5722;
            color: white;
            font-size: 0.65rem;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }

        .toolbar-icon {
            font-size: 1.5rem;
        }

        /* üÜï AIÊô∫ËÉΩÂØπËØùÁâπÊÆäÊ†∑Âºè - Âè≥‰∏äËßíÂõ∫ÂÆö‰ΩçÁΩÆ */
        .ai-assistant-float {
            position: fixed;
            top: 20px;
            right: 30px;
            z-index: 999;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(212, 184, 134, 0.5);
            transition: all 0.3s;
        }

        .ai-assistant-float:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(212, 184, 134, 0.7);
        }

        .ai-assistant-float .toolbar-icon {
            font-size: 3rem;
            position: relative;
            animation: aiGlow 2s infinite;
        }

        /* ÂúÜÂúàÈó™ÂÖâÊïàÊûú */
        .ai-assistant-float .toolbar-icon::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120%;
            height: 120%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(212, 184, 134, 0.3) 0%, transparent 70%);
            animation: pulse-ring 2s infinite;
            z-index: -1;
        }

        .ai-assistant-float .toolbar-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150%;
            height: 150%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(212, 184, 134, 0.2) 0%, transparent 70%);
            animation: pulse-ring 2s 0.5s infinite;
            z-index: -2;
        }

        /* ÂæΩÁ´† */
        .ai-assistant-float .toolbar-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #FF5722;
            color: white;
            font-size: 0.7rem;
            padding: 3px 7px;
            border-radius: 12px;
            font-weight: bold;
        }

        /* üÜï È°∂ÈÉ®Â∑•ÂÖ∑Ê†è - ÊÇ¨ÊµÆÂú®Âè≥‰∏äËßí */
        .top-toolbar {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 999;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .top-tool-item {
            background: rgba(10, 17, 40, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(18, 130, 162, 0.3);
            border-radius: 8px;
            padding: 5px 14px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 3px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 31, 84, 0.3);
            min-width: 70px;
            min-height: 56px;
        }

        .top-tool-item:hover {
            background: rgba(18, 130, 162, 0.3);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(18, 130, 162, 0.5);
        }

        .top-tool-icon {
            font-size: 1.5rem;
            display: none;
        }

        .top-tool-label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.9);
            white-space: nowrap;
            font-weight: 500;
        }

        .top-tool-count {
            font-size: 1.6rem;
            font-weight: bold;
            color: var(--li-gold);
            line-height: 1.2;
        }

        /* AIÂä©ÊâãÂµåÂÖ•È°∂ÈÉ®Â∑•ÂÖ∑Ê†è */
        .ai-tool-item {
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
            border: none;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(212, 184, 134, 0.5);
            transition: all 0.3s;
            position: relative;
        }

        .ai-tool-item:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(212, 184, 134, 0.7);
        }

        .ai-tool-icon {
            font-size: 2rem;
        }

        .ai-tool-badge {
            position: absolute;
            top: 2px;
            right: 2px;
            background: #FF5722;
            color: white;
            font-size: 0.65rem;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }

        /* üÜï AIÊô∫ËÉΩÂØπËØùÁâπÊÆäÊ†∑Âºè - ‰∏≠Èó¥‰ΩçÁΩÆ */
        .toolbar-item.ai-assistant {
            transform: scale(1.15);
        }

        .toolbar-item.ai-assistant .toolbar-icon {
            font-size: 3rem;
            position: relative;
            animation: aiGlow 2s infinite;
        }

        /* ÂúÜÂúàÈó™ÂÖâÊïàÊûú */
        .toolbar-item.ai-assistant .toolbar-icon::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120%;
            height: 120%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(212, 184, 134, 0.3) 0%, transparent 70%);
            animation: pulse-ring 2s infinite;
            z-index: -1;
        }

        .toolbar-item.ai-assistant .toolbar-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150%;
            height: 150%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(212, 184, 134, 0.2) 0%, transparent 70%);
            animation: pulse-ring 2s 0.5s infinite;
            z-index: -2;
        }

        @keyframes aiGlow {
            0%, 100% {
                filter: drop-shadow(0 0 8px rgba(212, 184, 134, 0.6));
            }
            50% {
                filter: drop-shadow(0 0 20px rgba(212, 184, 134, 1));
            }
        }

        @keyframes pulse-ring {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.3);
                opacity: 0;
            }
        }

        .toolbar-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-light);
            margin-top: 5px;
        }

        .toolbar-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            margin-top: 2px;
        }

        /* üÜï AIÂØπËØùÂä©Êâã‰æßËæπÊ†è */
        .ai-chat-panel {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: rgba(22, 33, 62, 0.98);
            backdrop-filter: blur(20px);
            box-shadow: -4px 0 20px rgba(0,0,0,0.5);
            transition: right 0.3s;
            z-index: 999;
            display: flex;
            flex-direction: column;
        }

        .ai-chat-panel.open {
            right: 0;
        }

        .chat-header {
            background: var(--li-green);
            padding: 20px;
            border-bottom: 2px solid var(--li-gold);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--li-gold);
        }

        .close-chat {
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--text-dim);
        }

        .close-chat:hover {
            color: var(--text-light);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }

        .message {
            display: flex;
            gap: 10px;
            animation: messageSlideIn 0.3s;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, #2196F3, #1976D2);
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
        }

        .message-content {
            max-width: 75%;
            padding: 12px 16px;
            border-radius: 12px;
            line-height: 1.6;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .message.ai .message-content {
            background: rgba(33, 150, 243, 0.2);
            border: 1px solid rgba(33, 150, 243, 0.3);
            color: rgba(255, 255, 255, 0.95);
        }

        .message.user .message-content {
            background: rgba(212, 184, 134, 0.2);
            border: 1px solid rgba(212, 184, 134, 0.3);
            color: rgba(255, 255, 255, 0.95);
        }

        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .quick-action-btn {
            padding: 6px 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 16px;
            font-size: 0.75rem;
            color: var(--text-dim);
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-action-btn:hover {
            background: rgba(255,255,255,0.2);
            color: var(--text-light);
        }

        .chat-input-area {
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* üÜï AIÂ∑•ÂÖ∑ÈÄâÈ°πÂå∫ */
        .ai-tools-section {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .ai-tool-btn {
            padding: 8px 16px;
            background: rgba(212, 184, 134, 0.15);
            border: 1px solid rgba(212, 184, 134, 0.3);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--li-gold);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .ai-tool-btn:hover {
            background: rgba(212, 184, 134, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(212, 184, 134, 0.3);
        }

        .ai-tool-btn:active {
            transform: translateY(0);
        }

        .chat-input-wrapper {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 24px;
            color: var(--text-light);
            font-size: 0.9rem;
            outline: none;
        }

        .chat-input::placeholder {
            color: var(--text-darker);
        }

        .send-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s;
        }

        .send-btn:hover {
            transform: scale(1.1);
        }

        /* üÜï ÁßÅÂüüËê•ÈîÄÂäüËÉΩÂºπÁ™ó */
        .marketing-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .marketing-modal.active {
            display: flex;
        }

        .marketing-content {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 700px;
            width: 90%;
        }

        .marketing-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--li-gold);
        }

        .marketing-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .marketing-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .marketing-card {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), rgba(33, 150, 243, 0.05));
            border: 2px solid rgba(33, 150, 243, 0.3);
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .marketing-card:hover {
            transform: translateY(-5px);
            border-color: var(--li-gold);
            background: linear-gradient(135deg, rgba(212, 184, 134, 0.15), rgba(212, 184, 134, 0.05));
            box-shadow: 0 10px 30px rgba(212, 184, 134, 0.3);
        }

        .marketing-card-icon {
            font-size: 3rem;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }

        .marketing-card-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--text-light);
        }

        .marketing-card-desc {
            font-size: 0.85rem;
            color: var(--text-dim);
            line-height: 1.6;
        }

        /* üÜï ÂæÖÂäû‰ªªÂä°ÂàóË°®ÂºπÁ™ó */
        .todo-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .todo-modal.active {
            display: flex;
        }

        .todo-content {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 40px;
            max-width: 900px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
        }

        .todo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--li-gold);
        }

        .todo-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .todo-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .todo-item {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid var(--li-blue);
            transition: all 0.3s;
        }

        .todo-item.completed {
            border-left-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        .todo-item.executing {
            border-left-color: #FF9800;
            background: rgba(255, 152, 0, 0.1);
        }

        .todo-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .todo-item-title {
            font-size: 1.1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .todo-priority {
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: normal;
        }

        .todo-priority-high {
            background: #FF5722;
            color: white;
        }

        .todo-priority-medium {
            background: #FF9800;
            color: white;
        }

        .todo-item-desc {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .todo-item-meta {
            display: flex;
            gap: 20px;
            font-size: 0.85rem;
            color: var(--text-darker);
            margin-bottom: 15px;
        }

        .ai-delegate-btn {
            padding: 8px 20px;
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
            color: var(--li-green);
            border: none;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .ai-delegate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(212, 184, 134, 0.4);
        }

        .ai-delegate-btn:disabled {
            background: rgba(255,255,255,0.2);
            color: var(--text-dim);
            cursor: not-allowed;
            transform: none;
        }

        .ai-execution-process {
            margin-top: 15px;
            padding: 15px;
            background: rgba(33, 150, 243, 0.15);
            border-left: 3px solid var(--li-blue);
            border-radius: 8px;
            display: none;
            animation: slideDown 0.3s;
        }

        .ai-execution-process.active {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .execution-step {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        .execution-step:last-child {
            margin-bottom: 0;
        }

        .execution-step .step-icon {
            font-size: 1.2rem;
        }

        .completion-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 12px;
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            animation: bounceIn 0.5s;
        }

        @keyframes bounceIn {
            0% {
                transform: scale(0);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }

        /* üÜï AIÊ¨¢ËøéÁïåÈù¢ */
        .welcome-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.5);
            z-index: 5000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .welcome-overlay.active {
            display: flex;
        }

        .welcome-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px 30px 60px 30px;
            max-width: 50vw;
            width: 50%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 2px solid #0f2520;
            animation: welcomeSlideIn 0.5s;
            text-align: center;
            position: relative;
        }

        @keyframes welcomeSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .welcome-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            box-shadow: 0 4px 12px rgba(212, 184, 134, 0.4);
        }

        .welcome-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--li-green);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 35px;
        }

        .welcome-title .ai-icon {
            font-size: 1.5rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .typing-text {
            display: inline-block;
            border-right: 2px solid var(--li-green);
            animation: blink 0.7s infinite;
        }

        @keyframes blink {
            0%, 50% { border-color: var(--li-green); }
            51%, 100% { border-color: transparent; }
        }

        .welcome-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 12px;
        }

        .welcome-stat-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ebe9 100%);
            padding: 10px 12px;
            border-radius: 8px;
            text-align: left;
            border-left: 3px solid var(--li-gold);
            transition: all 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .welcome-stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .welcome-stat-info {
            flex: 1;
        }

        .welcome-stat-label {
            font-size: 0.7rem;
            color: #666;
            margin-bottom: 4px;
        }

        .welcome-stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--li-green);
        }

        .welcome-stat-go {
            font-size: 0.9rem;
            color: #FF5722;
            font-weight: bold;
            margin-left: 10px;
        }

        .welcome-highlight {
            background: rgba(33, 150, 243, 0.1);
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid var(--li-blue);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 0.85rem;
            color: var(--li-green);
        }

        .welcome-highlight strong {
            color: #FF5722;
            font-size: 1.05rem;
            cursor: pointer;
            text-decoration: underline;
            transition: all 0.2s;
        }

        .welcome-highlight strong:hover {
            color: #E64A19;
            transform: scale(1.05);
        }

        .welcome-btn {
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(212, 184, 134, 0.4);
        }

        .welcome-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 184, 134, 0.6);
        }

        /* Â∫ïÈÉ®Âõ∫ÂÆöÊìç‰ΩúÊ†è */
        .welcome-bottom-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.98) 100%);
            border-top: 2px solid rgba(212, 184, 134, 0.3);
            padding: 12px 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.05);
        }

        .bottom-btn {
            flex: 1;
            max-width: 180px;
            padding: 10px 25px;
            border: none;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .bottom-btn-primary {
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
            color: white;
            box-shadow: 0 4px 12px rgba(212, 184, 134, 0.4);
        }

        .bottom-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(212, 184, 134, 0.6);
        }

        .bottom-btn-secondary {
            background: rgba(255, 255, 255, 0.9);
            color: #666;
            border: 2px solid #ddd;
        }

        .bottom-btn-secondary:hover {
            background: rgba(255, 255, 255, 1);
            border-color: #999;
            transform: translateY(-2px);
        }

        /* ÊàòÂäõÂàÜÊûêÊ®°Âùó */
        .power-analysis {
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.15) 0%, rgba(255, 193, 7, 0.1) 100%);
            padding: 10px 15px;
            border-radius: 10px;
            border-left: 3px solid #FF9800;
            margin-bottom: 12px;
            text-align: left;
            animation: slideInUp 0.5s;
        }

        .power-analysis-header {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 6px;
        }

        .power-icon {
            font-size: 1rem;
        }

        .power-title {
            font-size: 0.85rem;
            font-weight: bold;
            color: #FF9800;
        }

        .power-content {
            color: #333;
            line-height: 1.4;
            font-size: 0.75rem;
        }

        .power-content strong {
            color: #FF5722;
            font-weight: 600;
        }

        .power-detail-link {
            color: #2196F3;
            text-decoration: none;
            font-weight: 600;
            margin-left: 6px;
            cursor: pointer;
            font-size: 0.75rem;
        }

        .power-detail-link:hover {
            text-decoration: underline;
        }

        /* AIÂª∫ËÆÆÊ®°Âùó */
        .ai-suggestion-box {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(76, 175, 80, 0.05) 100%);
            padding: 12px 15px;
            border-radius: 10px;
            border-left: 3px solid #4CAF50;
            margin-bottom: 12px;
            text-align: left;
            animation: slideInUp 0.5s;
            opacity: 0;
        }

        .ai-suggestion-box.show {
            opacity: 1;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .ai-suggestion-header {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 8px;
        }

        .ai-suggestion-icon {
            font-size: 1rem;
        }

        .ai-suggestion-title {
            font-size: 0.85rem;
            font-weight: bold;
            color: #4CAF50;
        }

        .ai-suggestion-content {
            color: #333;
            line-height: 1.4;
            font-size: 0.75rem;
            margin-bottom: 10px;
        }

        .ai-suggestion-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .ai-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 18px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .ai-btn-ignore {
            background: rgba(255, 255, 255, 0.8);
            color: #666;
            border: 2px solid #ddd;
        }

        .ai-btn-ignore:hover {
            background: rgba(255, 255, 255, 1);
            border-color: #999;
            transform: translateY(-2px);
        }

        .ai-btn-accept {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .ai-btn-accept:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
        }

        /* üÜï ËÆ¢ÂçïÁÆ°ÁêÜÂõæÊ†áÊåâÈíÆ */
        .workflow-icon-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 152, 0, 0.15);
            border: 1px solid rgba(255, 152, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            flex-shrink: 0;
            margin-left: 8px;
        }

        .workflow-icon-btn:hover {
            background: rgba(255, 152, 0, 0.3);
            transform: scale(1.1);
        }

        /* üÜï ÂÆ¢Êà∑Ë°å‰∏∫ÁÉ≠ÂäõÂõæÂºπÁ™ó */
        .heatmap-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .heatmap-modal.active {
            display: flex;
        }

        .heatmap-content {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 900px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .heatmap-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--li-gold);
        }

        .heatmap-title {
            font-size: 1.4rem;
            font-weight: bold;
        }

        .close-btn {
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-dim);
        }

        .close-btn:hover {
            color: var(--text-light);
        }

        /* üÜï ÁÉ≠ÂäõÂõæÂèØËßÜÂåñ */
        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 30px;
        }

        .heatmap-cell {
            aspect-ratio: 1;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            transition: all 0.2s;
            cursor: pointer;
        }

        .heatmap-cell:hover {
            transform: scale(1.1);
        }

        .heatmap-cell.level-0 { background: rgba(255,255,255,0.05); }
        .heatmap-cell.level-1 { background: rgba(76, 175, 80, 0.3); }
        .heatmap-cell.level-2 { background: rgba(255, 193, 7, 0.5); }
        .heatmap-cell.level-3 { background: rgba(255, 152, 0, 0.7); }
        .heatmap-cell.level-4 { background: rgba(255, 87, 34, 0.9); }

        .cell-day {
            font-weight: bold;
        }

        .cell-count {
            font-size: 0.6rem;
            color: var(--text-darker);
        }

        .behavior-timeline {
            margin-top: 20px;
        }

        .timeline-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--li-gold);
        }

        .timeline-item {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border-left: 3px solid var(--li-blue);
        }

        .timeline-time {
            width: 120px;
            color: var(--text-dim);
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-action {
            font-weight: bold;
            margin-bottom: 4px;
        }

        .timeline-detail {
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        /* üÜï ËØ≠Èü≥ËæìÂÖ•ÂºπÁ™ó */
        .voice-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .voice-modal.active {
            display: flex;
        }

        .voice-content {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 50px;
            text-align: center;
            min-width: 400px;
        }

        .voice-animation {
            width: 150px;
            height: 150px;
            margin: 0 auto 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF5722, #FF9800);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            animation: voicePulse 1.5s infinite;
        }

        @keyframes voicePulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(255, 87, 34, 0.7);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 0 0 30px rgba(255, 87, 34, 0);
            }
        }

        .voice-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--text-dim);
        }

        .voice-transcript {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 12px;
            min-height: 60px;
            margin-bottom: 20px;
            font-size: 1.1rem;
            color: var(--li-gold);
        }

        .voice-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .voice-action-btn {
            padding: 12px 30px;
            border-radius: 24px;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .voice-cancel {
            background: rgba(255,255,255,0.1);
            color: var(--text-light);
        }

        .voice-confirm {
            background: var(--li-gold);
            color: var(--li-green);
        }

        /* üÜï AIÁîµËØùÂä©ÊâãÁïåÈù¢ */
        .ai-phone-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }

        .ai-phone-modal.active {
            display: flex;
        }

        .phone-container {
            display: flex;
            gap: 30px;
            max-width: 1400px;
            width: 90%;
        }

        /* Â∑¶‰æßÔºöAIÊú∫Âô®‰∫∫ */
        .ai-robot-panel {
            flex: 0 0 350px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 24px;
            padding: 40px;
            text-align: center;
            position: relative;
        }

        .robot-avatar {
            width: 180px;
            height: 180px;
            margin: 0 auto 30px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            position: relative;
        }

        .robot-avatar::before {
            content: '';
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 3px solid rgba(33, 150, 243, 0.3);
            animation: robotPulse 2s infinite;
        }

        @keyframes robotPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.15);
                opacity: 0.3;
            }
        }

        .robot-face {
            font-size: 5rem;
        }

        .robot-status {
            background: rgba(33, 150, 243, 0.1);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .status-text {
            font-size: 1.1rem;
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 8px;
        }

        .status-detail {
            font-size: 0.85rem;
            color: #666;
        }

        .feature-tags {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .feature-tag {
            background: rgba(76, 175, 80, 0.15);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: #4CAF50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ‰∏≠Èó¥ÔºöÊâãÊú∫Êã®Âè∑ÁïåÈù¢ */
        .phone-screen {
            flex: 0 0 380px;
            background: linear-gradient(180deg, #4a5f7f 0%, #2d3e5f 100%);
            border-radius: 40px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .phone-notch {
            width: 150px;
            height: 25px;
            background: #1a2332;
            border-radius: 0 0 15px 15px;
            margin: 0 auto 20px;
        }

        .phone-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .contact-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 2rem;
            font-weight: bold;
        }

        .contact-number {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .contact-location {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
        }

        .phone-keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .key-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            color: white;
            font-size: 1.8rem;
            font-weight: 300;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .key-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.05);
        }

        .key-letters {
            font-size: 0.6rem;
            margin-top: 2px;
            color: rgba(255,255,255,0.6);
        }

        .call-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: #4CAF50;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .call-btn.active {
            background: #f44336;
            animation: callPulse 1s infinite;
        }

        @keyframes callPulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7);
            }
            50% {
                box-shadow: 0 0 0 20px rgba(244, 67, 54, 0);
            }
        }

        .phone-footer {
            display: flex;
            justify-content: space-around;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .footer-icon {
            color: rgba(255,255,255,0.5);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Âè≥‰æßÔºöÂÆûÊó∂ÂØπËØùËÆ∞ÂΩï */
        .conversation-panel {
            flex: 1;
            background: var(--bg-card);
            border-radius: 24px;
            padding: 30px;
            display: flex;
            flex-direction: column;
        }

        .conversation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--li-gold);
        }

        .conversation-title {
            font-size: 1.4rem;
            font-weight: bold;
        }

        .call-timer {
            font-size: 1.1rem;
            color: var(--li-gold);
            font-weight: bold;
        }

        .conversation-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
        }

        .conv-message {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            animation: messageSlideIn 0.3s;
        }

        .conv-message.user {
            flex-direction: row-reverse;
        }

        .conv-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .conv-message.ai .conv-avatar {
            background: linear-gradient(135deg, #2196F3, #1976D2);
        }

        .conv-message.user .conv-avatar {
            background: linear-gradient(135deg, var(--li-gold), #b08d55);
        }

        .conv-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 16px;
            line-height: 1.6;
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .conv-message.ai .conv-bubble {
            background: rgba(33, 150, 243, 0.15);
            border: 1px solid rgba(33, 150, 243, 0.3);
            color: rgba(255, 255, 255, 0.95);
        }

        .conv-message.user .conv-bubble {
            background: rgba(212, 184, 134, 0.15);
            border: 1px solid rgba(212, 184, 134, 0.3);
            color: rgba(255, 255, 255, 0.95);
        }

        .conv-time {
            font-size: 0.7rem;
            color: var(--text-darker);
            margin-top: 4px;
        }

        .ai-analysis-panel {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4CAF50;
            padding: 20px;
            border-radius: 12px;
        }

        .analysis-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 15px;
        }

        .analysis-item {
            margin-bottom: 10px;
            font-size: 0.9rem;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .analysis-label {
            font-weight: bold;
            color: var(--li-gold);
            min-width: 100px;
        }

        .phone-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .phone-action-btn {
            flex: 1;
            padding: 12px;
            border-radius: 12px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-end-call {
            background: #f44336;
            color: white;
        }

        .btn-save-summary {
            background: var(--li-gold);
            color: var(--li-green);
        }

        /* ÈÄöÁü•Ê∂àÊÅØ */
        .notification {
            position: fixed;
            top: 100px;
            right: 30px;
            background: rgba(76, 175, 80, 0.95);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 3000;
            animation: slideInRight 0.3s;
            display: none;
        }

        .notification.show {
            display: block;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* üÜï ÈîÄÂîÆÊºèÊñóÂèØËßÜÂåñÊ†∑Âºè */
        .funnel-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 14%;
            width: calc(100% - 14%);
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1500;
            align-items: center;
            justify-content: center;
        }

        .funnel-modal.active {
            display: flex;
        }

        .funnel-content {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(30px);
            border-radius: 20px;
            padding: 30px;
            max-width: 1100px;
            width: 95%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(18, 130, 162, 0.15);
        }

        .funnel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(212, 184, 134, 0.3);
        }

        .funnel-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .funnel-period {
            display: flex;
            gap: 8px;
        }

        .period-btn {
            padding: 5px 14px;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(212, 184, 134, 0.3);
            border-radius: 16px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            color: #2c3e50;
        }

        .period-btn.active {
            background: linear-gradient(135deg, #d4b886, #b08d55);
            color: white;
            border-color: #d4b886;
        }

        /* ÈîÄÂîÆÊºèÊñó‰∏ª‰Ωì - ÈááÁî®ÂúÜÂΩ¢ËÆæËÆ° */
        .sales-funnel {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            margin: 30px 0;
            position: relative;
        }

        .funnel-stage {
            width: 100%;
            position: relative;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .funnel-stage:hover {
            transform: translateY(-3px);
        }

        /* ÂúÜÂΩ¢ËÆæËÆ° - ‰ªéÂ§ßÂà∞Â∞è */
        .funnel-circle {
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* ÊºèÊñóÂêÑÈò∂ÊÆµÂúÜÂΩ¢Â§ßÂ∞èÂíåÈ¢úËâ≤ */
        .stage-leads .funnel-circle {
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .stage-customers .funnel-circle {
            width: 170px;
            height: 170px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .stage-testdrive .funnel-circle {
            width: 140px;
            height: 140px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .stage-locked .funnel-circle {
            width: 110px;
            height: 110px;
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .stage-delivered .funnel-circle {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .stage-icon {
            font-size: 2rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
            margin-bottom: 8px;
        }

        .stage-info h3 {
            font-size: 1rem;
            font-weight: bold;
            color: white;
            margin-bottom: 2px;
        }

        .stage-subtitle {
            font-size: 0.65rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 4px;
        }

        .stage-count {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
            line-height: 1;
            margin-bottom: 2px;
        }

        .stage-rate {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
        }

        /* ËΩ¨ÂåñÁéáËØ¶ÁªÜÊï∞ÊçÆ */
        .conversion-details {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 40px;
        }

        .conversion-card {
            background: linear-gradient(135deg, #f5f7f6 0%, #e8ebe9 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .conversion-card:hover {
            border-color: var(--li-gold);
            transform: translateY(-4px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .conversion-label {
            font-size: 0.85rem;
            color: var(--text-sub);
            margin-bottom: 8px;
        }

        .conversion-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--li-green-dark);
            margin-bottom: 4px;
        }

        .conversion-change {
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .change-up {
            color: #4CAF50;
        }

        .change-down {
            color: #f44336;
        }

        /* ÁõÆÊ†áËøõÂ∫¶Êù° */
        .target-progress-section {
            margin-top: 40px;
            background: #f9f9f9;
            padding: 25px;
            border-radius: 12px;
        }

        .target-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .target-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--li-green-dark);
        }

        .target-status {
            font-size: 0.9rem;
            color: var(--text-sub);
        }

        .progress-bar-container {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            margin-bottom: 10px;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--li-green-dark) 0%, var(--li-gold) 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 15px;
            transition: width 1s ease;
        }

        .progress-percentage {
            color: white;
            font-weight: bold;
            font-size: 0.85rem;
        }

        .progress-detail {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--text-sub);
            margin-top: 8px;
        }

        /* ÂìçÂ∫îÂºè */
        @media (orientation: landscape) and (min-width: 1024px) {
            .main-content {
                height: calc(100vh - 150px);
            }
        }

        /* üÜï Â∑¶‰æß‰æßËæπÊ†è */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 10%;
            height: 100vh;
            background: linear-gradient(180deg, #0f2520 0%, #1a3d36 50%, #0f2520 100%);
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8vh 0;
            justify-content: space-evenly;
            z-index: 1000;
            box-shadow: 2px 0 12px rgba(0, 0, 0, 0.2);
            border-right: 1px solid rgba(212, 184, 134, 0.3);
        }

        .sidebar-item {
            width: 85%;
            height: 12%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s;
            position: relative;
        }

        .sidebar-item:hover {
            background: rgba(212, 184, 134, 0.2);
            transform: translateX(3px);
        }

        .sidebar-item.active {
            background: rgba(212, 184, 134, 0.25);
            border: 2px solid var(--li-gold);
        }

        .sidebar-item-icon {
            font-size: 3rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }

        .sidebar-item-label {
            font-size: 1.6rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
        }

        /* Ë∞ÉÊï¥‰∏ªÂÜÖÂÆπÂå∫,‰∏∫‰æßËæπÊ†èÁïôÂá∫Á©∫Èó¥ */
        body {
            padding-left: 14%;
        }

        /* üÜï Êï∞ÊçÆÁúãÊùøÂºπÁ™ó */
        .dashboard-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 14%;
            width: calc(100% - 14%);
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .dashboard-modal.active {
            display: flex;
        }

        .dashboard-content {
            background: linear-gradient(135deg, rgba(15, 37, 32, 0.98) 0%, rgba(26, 61, 54, 0.98) 100%);
            backdrop-filter: blur(30px);
            border-radius: 20px;
            padding: 40px;
            max-width: 1400px;
            width: 95%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid rgba(212, 184, 134, 0.3);
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(212, 184, 134, 0.3);
        }

        .dashboard-title {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ffffff;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(212, 184, 134, 0.2);
            transition: all 0.3s;
        }

        .dashboard-card:hover {
            transform: translateY(-3px);
            border-color: var(--li-gold);
            box-shadow: 0 8px 20px rgba(212, 184, 134, 0.3);
        }

        .dashboard-card-title {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 15px;
        }

        .dashboard-card-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--li-gold);
            margin-bottom: 10px;
        }

        .dashboard-card-trend {
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
            color: rgba(255, 255, 255, 0.6);
        }

        .trend-up {
            color: #4CAF50;
        }

        .trend-down {
            color: #f44336;
        }

        /* üÜï Â∑•ÂÖ∑ÁÆ±ÂºπÁ™ó */
        .toolbox-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 18%;
            width: calc(100% - 18%);
            height: 100vh;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .toolbox-modal.active {
            display: flex;
        }

        .toolbox-content {
            background: linear-gradient(135deg, rgba(10, 17, 40, 0.98) 0%, rgba(0, 31, 84, 0.98) 100%);
            backdrop-filter: blur(30px);
            border-radius: 20px;
            padding: 40px;
            max-width: 1200px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            border: 1px solid rgba(18, 130, 162, 0.3);
            box-shadow: 0 10px 50px rgba(0, 31, 84, 0.7);
        }

        .toolbox-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
        }

        .agent-card {
            background: linear-gradient(135deg, rgba(212, 184, 134, 0.1) 0%, rgba(212, 184, 134, 0.05) 100%);
            border: 2px solid rgba(212, 184, 134, 0.3);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s;
            position: relative;
            overflow: hidden;
        }

        .agent-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212, 184, 134, 0.15) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.4s;
        }

        .agent-card:hover::before {
            opacity: 1;
        }

        .agent-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--li-gold);
            box-shadow: 0 12px 30px rgba(212, 184, 134, 0.4);
        }

        .agent-icon {
            font-size: 3.5rem;
            margin-bottom: 15px;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        .agent-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--li-gold);
            margin-bottom: 12px;
        }

        .agent-desc {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
        }

        .agent-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #FF5722, #FF9800);
            color: white;
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- üÜï Â∑¶‰æß‰æßËæπÊ†è -->
    <div class="sidebar">
        <div class="sidebar-item active" onclick="openDashboard()">
            <div class="sidebar-item-icon">üìä</div>
            <div class="sidebar-item-label">Êï∞ÊçÆÁúãÊùø</div>
        </div>
        <div class="sidebar-item" onclick="location.reload()">
            <div class="sidebar-item-icon">üë•</div>
            <div class="sidebar-item-label">ÂÆ¢Êà∑ÂàóË°®</div>
        </div>
        <div class="sidebar-item" onclick="openTodoList()">
            <div class="sidebar-item-icon">‚úÖ</div>
            <div class="sidebar-item-label">‰ªªÂä°ÂàóË°®</div>
        </div>
        <div class="sidebar-item" onclick="openToolbox()">
            <div class="sidebar-item-icon">üß∞</div>
            <div class="sidebar-item-label">Â∑•ÂÖ∑ÁÆ±</div>
        </div>
        <div class="sidebar-item" onclick="showNotification('ÂÜÖÂÆπÂ∫ìÂäüËÉΩÂºÄÂèë‰∏≠...')">
            <div class="sidebar-item-icon">üìö</div>
            <div class="sidebar-item-label">ÂÜÖÂÆπÂ∫ì</div>
        </div>
    </div>

    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
    <div class="header">
        <div class="header-left">
            <div class="logo">Li <span>Auto AIÂ§ßÂ∏à</span></div>

            <!-- üÜï CRMÂêåÊ≠•Áä∂ÊÄÅ -->
            <div class="sync-status">
                <div class="sync-icon"></div>
                <span>CRMÂ∑≤ÂêåÊ≠•</span>
            </div>

            <div class="user-info">
                <div class="avatar">Êùé</div>
                <div class="user-detail">
                    <div class="user-name">ÊùéÊòé - ÈîÄÂîÆÈ°æÈóÆ</div>
                    <div class="user-role">Âåó‰∫¨ÊúùÈò≥Èó®Â∫ó</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫ - ‰∏âÈò∂ÊÆµÂÆ¢Êà∑ÁÆ°ÁêÜ -->
    <div class="main-content">
        <!-- A1+I1 Èò∂ÊÆµ -->
        <div class="stage-column stage-a1" data-stage="a1" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
            <div class="stage-header">
                <div class="stage-title">
                    <div class="stage-name">A1 ËÆ§Áü• + I1 ÂÖ¥Ë∂£</div>
                    <div class="stage-desc">AIËÆ§Áü•È°æÈóÆ</div>
                </div>
                <div class="stage-count" id="count-a1">23‰∫∫</div>
            </div>
            <div class="customer-list" id="list-a1">
                <!-- ÂÆ¢Êà∑Âç°ÁâáÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>

        <!-- A2-In Èò∂ÊÆµ -->
        <div class="stage-column stage-i2" data-stage="i2" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
            <div class="stage-header">
                <div class="stage-title">
                    <div class="stage-name">A2 - In ‰∫íÂä®</div>
                    <div class="stage-desc">AI‰∫íÂä®ÈîÄÂîÆ</div>
                </div>
                <div class="stage-count" id="count-i2">12‰∫∫</div>
            </div>
            <div class="customer-list" id="list-i2">
                <!-- ÂÆ¢Êà∑Âç°ÁâáÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>

        <!-- A3 Èò∂ÊÆµ -->
        <div class="stage-column stage-a3" data-stage="a3" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
            <div class="stage-header">
                <div class="stage-title">
                    <div class="stage-name">A3 - A Ë°åÂä®</div>
                    <div class="stage-desc">AIÈîÄÂîÆÂí®ËØ¢</div>
                </div>
                <div class="stage-count" id="count-a3">5‰∫∫</div>
            </div>
            <div class="customer-list" id="list-a3">
                <!-- ÂÆ¢Êà∑Âç°ÁâáÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
    </div>

    <!-- Â∫ïÈÉ®Âø´Êç∑Êìç‰ΩúÊ†è -->
    <!-- Â∫ïÈÉ®Â∑•ÂÖ∑Ê†èÂ∑≤ÁßªÈô§ -->

    <!-- È°∂ÈÉ®Â∑•ÂÖ∑Ê†è - ÊÇ¨ÊµÆÂú®Âè≥‰∏äËßí -->
    <div class="top-toolbar">
        <div class="top-tool-item" onclick="showReceptionStats()" title="‰ªäÊó•Êé•ÂæÖ">
            <div class="top-tool-count">12</div>
            <div class="top-tool-label">‰ªäÊó•Êé•ÂæÖ</div>
        </div>
        <div class="top-tool-item" onclick="showTestDriveStats()" title="‰ªäÊó•ËØïÈ©æ">
            <div class="top-tool-count">5</div>
            <div class="top-tool-label">‰ªäÊó•ËØïÈ©æ</div>
        </div>
        <div class="top-tool-item" onclick="showTodoList()" title="‰ªäÊó•ÂæÖÂäû">
            <div class="top-tool-count">8</div>
            <div class="top-tool-label">‰ªäÊó•ÂæÖÂäû</div>
        </div>
        <div class="top-tool-item" onclick="showCustomerPool()" title="ÂÆ¢Êà∑Ê±†">
            <div class="top-tool-count">40</div>
            <div class="top-tool-label">ÂÆ¢Êà∑Ê±†</div>
        </div>
        <div class="ai-tool-item" onclick="toggleAIChat()" title="AIÊú∫Âô®‰∫∫">
            <div class="ai-tool-icon">ü§ñ</div>
            <span class="ai-tool-badge">3</span>
        </div>
    </div>

    <!-- AIÊô∫ËÉΩÂä©ÊâãÊµÆÂä®ÊåâÈíÆ - Â∑≤ÈöêËóè,Â∑≤ÂµåÂÖ•È°∂ÈÉ®Â∑•ÂÖ∑Ê†è -->

    <!-- üÜï AIÂØπËØùÂä©Êâã‰æßËæπÊ†è -->
    <div class="ai-chat-panel" id="aiChatPanel">
        <div class="chat-header">
            <div class="chat-title">ü§ñ AIÊô∫ËÉΩÂä©Êâã</div>
            <div class="close-chat" onclick="toggleAIChat()">&times;</div>
        </div>
        <div class="chat-messages" id="chatMessages">
            <!-- ÂàùÂßãÊ¨¢ËøéÊ∂àÊÅØ -->
            <div class="message ai">
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                    ‰Ω†Â•ΩÊùéÊòéÔºÅÊàëÊòØ‰Ω†ÁöÑAIÈîÄÂîÆÂä©Êâã„ÄÇÊàëÂèØ‰ª•Â∏Æ‰Ω†Ôºö
                    <div class="quick-actions">
                        <button class="quick-action-btn" onclick="aiQuickAction('ÁîüÊàêËØùÊúØ')">ÁîüÊàêËØùÊúØ</button>
                        <button class="quick-action-btn" onclick="aiQuickAction('ÂÆ¢Êà∑ÂàÜÊûê')">ÂÆ¢Êà∑ÂàÜÊûê</button>
                        <button class="quick-action-btn" onclick="aiQuickAction('Á´ûÂìÅÂØπÊØî')">Á´ûÂìÅÂØπÊØî</button>
                        <button class="quick-action-btn" onclick="aiQuickAction('ÈáëËûçÊñπÊ°à')">ÈáëËûçÊñπÊ°à</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="chat-input-area">
            <!-- üÜï AIÂ∑•ÂÖ∑ÈÄâÈ°π -->
            <div class="ai-tools-section">
                <button class="ai-tool-btn" onclick="aiToolAction('‰∏öÂä°ËØäÊñ≠')" title="ËØäÊñ≠ÈîÄÂîÆ‰∏öÂä°ÈóÆÈ¢ò">
                    üîç ‰∏öÂä°ËØäÊñ≠
                </button>
                <button class="ai-tool-btn" onclick="aiToolAction('ÂÆ¢Êà∑Êé¢ÈúÄ')" title="ÊåñÊéòÂÆ¢Êà∑ÁúüÂÆûÈúÄÊ±Ç">
                    üîé ÂÆ¢Êà∑Êé¢ÈúÄ
                </button>
                <button class="ai-tool-btn" onclick="aiToolAction('Á§æÂ™íËé∑ÂÆ¢')" title="Á§æ‰∫§Â™í‰ΩìËé∑ÂÆ¢Á≠ñÁï•">
                    üì± Á§æÂ™íËé∑ÂÆ¢
                </button>
                <button class="ai-tool-btn" onclick="aiToolAction('ÁîüÊàêËØùÊúØ')" title="Êô∫ËÉΩÁîüÊàêÈîÄÂîÆËØùÊúØ">
                    üí¨ ÁîüÊàêËØùÊúØ
                </button>
                <button class="ai-tool-btn" onclick="aiToolAction('ÂÆ¢Êà∑ÂàÜÊûê')" title="Ê∑±Â∫¶ÂàÜÊûêÂÆ¢Êà∑ÈúÄÊ±Ç">
                    üìä ÂÆ¢Êà∑ÂàÜÊûê
                </button>
                <button class="ai-tool-btn" onclick="aiToolAction('ÈáëËûçÊñπÊ°à')" title="ËÆ°ÁÆóÊúÄ‰ºòÈáëËûçÊñπÊ°à">
                    üí∞ ÈáëËûçÊñπÊ°à
                </button>
                <button class="ai-tool-btn" onclick="aiToolAction('ÁîüÊàêÊä•‰ª∑Âçï')" title="Âø´ÈÄüÁîüÊàêÊä•‰ª∑Âçï">
                    üìù Êä•‰ª∑Âçï
                </button>
                <button class="ai-tool-btn" onclick="aiToolAction('Ë∑üËøõÂª∫ËÆÆ')" title="Êô∫ËÉΩË∑üËøõÂª∫ËÆÆ">
                    üéØ Ë∑üËøõÂª∫ËÆÆ
                </button>
            </div>
            <!-- ËæìÂÖ•Ê°ÜÂå∫Âüü -->
            <div class="chat-input-wrapper">
                <input type="text" class="chat-input" id="chatInput" placeholder="ËæìÂÖ•‰Ω†ÁöÑÈóÆÈ¢ò..." onkeypress="handleChatKeyPress(event)">
                <button class="send-btn" onclick="sendChatMessage()">üì§</button>
            </div>
        </div>
    </div>

    <!-- üÜï ÂÆ¢Êà∑Ë°å‰∏∫ÁÉ≠ÂäõÂõæÂºπÁ™ó -->
    <div class="heatmap-modal" id="heatmapModal">
        <div class="heatmap-content">
            <div class="heatmap-header">
                <div class="heatmap-title">üìà ÂÆ¢Êà∑Ë°å‰∏∫ÁÉ≠ÂäõÂõæ - Âº†ÂÖàÁîü</div>
                <div class="close-btn" onclick="closeHeatmap()">&times;</div>
            </div>

            <h3 style="margin-bottom: 15px; color: var(--li-gold);">ÊúÄËøë30Â§©Ê¥ªË∑ÉÂ∫¶</h3>
            <div class="heatmap-grid" id="heatmapGrid">
                <!-- ÁÉ≠ÂäõÂõæÊ†ºÂ≠êÂ∞ÜÈÄöËøáJSÁîüÊàê -->
            </div>

            <div class="behavior-timeline">
                <div class="timeline-title">üìÖ Ë°å‰∏∫Êó∂Èó¥Á∫øÔºàÊúÄËøë7Â§©Ôºâ</div>
                <div class="timeline-item">
                    <div class="timeline-time">01-27 14:30</div>
                    <div class="timeline-content">
                        <div class="timeline-action">üì± ÂæÆ‰ø°Âí®ËØ¢</div>
                        <div class="timeline-detail">ËØ¢ÈóÆÁêÜÊÉ≥L7ÁöÑÊô∫ËÉΩÈ©æÈ©∂ÂäüËÉΩÔºåÁâπÂà´ÂÖ≥Ê≥®ÂüéÂ∏ÇNOA</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-time">01-26 10:15</div>
                    <div class="timeline-content">
                        <div class="timeline-action">üöó ËØïÈ©æ‰ΩìÈ™å</div>
                        <div class="timeline-detail">ËØïÈ©æL7 Max 40ÂàÜÈíüÔºåÈáçÁÇπ‰ΩìÈ™å‰∫ÜËæÖÂä©È©æÈ©∂ÂäüËÉΩ</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-time">01-25 16:20</div>
                    <div class="timeline-content">
                        <div class="timeline-action">üè™ Âà∞Â∫óÂí®ËØ¢</div>
                        <div class="timeline-detail">È¶ñÊ¨°Âà∞Â∫óÔºå‰∫ÜËß£L7ÂíåL8ÈÖçÁΩÆÂ∑ÆÂºÇÔºåÂÅúÁïô45ÂàÜÈíü</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-time">01-24 09:30</div>
                    <div class="timeline-content">
                        <div class="timeline-action">üåê ÊµèËßàÂÆòÁΩë</div>
                        <div class="timeline-detail">ÊµèËßàÂÆòÁΩë‰∫ßÂìÅÈ°µÈù¢12ÂàÜÈíüÔºåÈáçÁÇπÊü•ÁúãÊô∫È©æÈÖçÁΩÆ</div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-time">01-23 20:15</div>
                    <div class="timeline-content">
                        <div class="timeline-action">üì± Á∫ø‰∏äÁïôËµÑ</div>
                        <div class="timeline-detail">ÈÄöËøáÂÆòÁΩëÁïô‰∏ãËÅîÁ≥ªÊñπÂºèÔºåÂí®ËØ¢ËØïÈ©æÈ¢ÑÁ∫¶</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- üÜï ËØ≠Èü≥ËæìÂÖ•ÂºπÁ™ó -->
    <div class="voice-modal" id="voiceModal">
        <div class="voice-content">
            <div class="voice-animation">üé§</div>
            <div class="voice-text">Ê≠£Âú®ËÅÜÂê¨...</div>
            <div class="voice-transcript" id="voiceTranscript">ËØ∑ÂºÄÂßãËØ¥ËØù</div>
            <div class="voice-actions">
                <button class="voice-action-btn voice-cancel" onclick="cancelVoiceInput()">ÂèñÊ∂à</button>
                <button class="voice-action-btn voice-confirm" onclick="confirmVoiceInput()">Á°ÆËÆ§</button>
            </div>
        </div>
    </div>

    <!-- üÜï AIÊô∫ËÉΩÁîµËØùÂä©ÊâãÁïåÈù¢ -->
    <div class="ai-phone-modal" id="aiPhoneModal">
        <div class="phone-container">
            <!-- Â∑¶‰æßÔºöAIÊú∫Âô®‰∫∫Èù¢Êùø -->
            <div class="ai-robot-panel">
                <div class="robot-avatar">
                    <div class="robot-face">ü§ñ</div>
                </div>
                <div class="robot-status">
                    <div class="status-text" id="robotStatus">ÂáÜÂ§áÂ∞±Áª™</div>
                    <div class="status-detail">AIÁîµËØùÂä©ÊâãÂ∑≤ÂêØÂä®</div>
                </div>
                <div class="feature-tags">
                    <div class="feature-tag">
                        <span>‚úì</span>
                        <span>Á≤æÂáÜËØÜÂà´ÈóÆÈ¢ò</span>
                    </div>
                    <div class="feature-tag">
                        <span>‚úì</span>
                        <span>ÂÆûÊó∂ËØ≠Èü≥ËΩ¨ÂÜô</span>
                    </div>
                    <div class="feature-tag">
                        <span>‚úì</span>
                        <span>Êô∫ËÉΩÊÑèÂõæÂàÜÊûê</span>
                    </div>
                    <div class="feature-tag">
                        <span>‚úì</span>
                        <span>Ëá™Âä®ÁîüÊàêÊÄªÁªì</span>
                    </div>
                </div>
            </div>

            <!-- ‰∏≠Èó¥ÔºöÊâãÊú∫Êã®Âè∑ÁïåÈù¢ -->
            <div class="phone-screen">
                <div class="phone-notch"></div>

                <div class="phone-header">
                    <div class="contact-avatar" id="phoneAvatar">Âº†</div>
                    <div class="contact-number" id="phoneNumber">138 **** 2345</div>
                    <div class="contact-location">Âåó‰∫¨Â∏Ç Âåó‰∫¨</div>
                </div>

                <div class="phone-keypad">
                    <button class="key-btn">1<div class="key-letters"></div></button>
                    <button class="key-btn">2<div class="key-letters">ABC</div></button>
                    <button class="key-btn">3<div class="key-letters">DEF</div></button>
                    <button class="key-btn">4<div class="key-letters">GHI</div></button>
                    <button class="key-btn">5<div class="key-letters">JKL</div></button>
                    <button class="key-btn">6<div class="key-letters">MNO</div></button>
                    <button class="key-btn">7<div class="key-letters">PQRS</div></button>
                    <button class="key-btn">8<div class="key-letters">TUV</div></button>
                    <button class="key-btn">9<div class="key-letters">WXYZ</div></button>
                    <button class="key-btn">*</button>
                    <button class="key-btn">0<div class="key-letters">+</div></button>
                    <button class="key-btn">#</button>
                </div>

                <button class="call-btn" id="callButton" onclick="toggleCall()">üìû</button>

                <div class="phone-footer">
                    <div class="footer-icon">‚≠ê</div>
                    <div class="footer-icon">üïê</div>
                    <div class="footer-icon">üìû</div>
                    <div class="footer-icon">üë§</div>
                    <div class="footer-icon">üí¨</div>
                </div>
            </div>

            <!-- Âè≥‰æßÔºöÂÆûÊó∂ÂØπËØùËÆ∞ÂΩï -->
            <div class="conversation-panel">
                <div class="conversation-header">
                    <div class="conversation-title">üìû ÈÄöËØùÂÆûÂΩï</div>
                    <div class="call-timer" id="callTimer">00:00</div>
                </div>

                <div class="conversation-messages" id="conversationMessages">
                    <div class="conv-message ai">
                        <div class="conv-avatar">ü§ñ</div>
                        <div>
                            <div class="conv-bubble">
                                ÊÇ®Â•ΩÔºåÊàëÊòØÂÖ±‰∫´ÂçïËΩ¶ÂÆ¢ÊúçÊú∫Âô®‰∫∫ÔºåÊèêÈÜíÊÇ®Â∑≤Ë∂ÖÂá∫È™ëË°åËåÉÂõ¥ÔºåÂª∫ËÆÆÊÇ®Â∞ΩÂø´È™ëÂõû
                            </div>
                            <div class="conv-time">15:25</div>
                        </div>
                    </div>
                    <!-- Êõ¥Â§öÂØπËØùÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÊ∑ªÂä† -->
                </div>

                <div class="ai-analysis-panel">
                    <div class="analysis-title">ü§ñ AIÂÆûÊó∂ÂàÜÊûê</div>
                    <div class="analysis-item">
                        <div class="analysis-label">ÂÆ¢Êà∑ÊÑèÂêëÔºö</div>
                        <div>ÂæÖËØÜÂà´</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">ÂÖ≥Ê≥®ÁÇπÔºö</div>
                        <div>--</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">È°æËôëÔºö</div>
                        <div>--</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">Âª∫ËÆÆËØùÊúØÔºö</div>
                        <div>--</div>
                    </div>
                </div>

                <div class="phone-actions">
                    <button class="phone-action-btn btn-end-call" onclick="endCall()">ÁªìÊùüÈÄöËØù</button>
                    <button class="phone-action-btn btn-save-summary" onclick="saveSummary()">‰øùÂ≠òÊÄªÁªì</button>
                </div>
            </div>
        </div>
    </div>

    <!-- üÜï ÈÄöÁü•Ê∂àÊÅØ -->
    <div class="notification" id="notification"></div>

    <!-- üÜï ÁßÅÂüüËê•ÈîÄÂäüËÉΩÂºπÁ™ó -->
    <div class="marketing-modal" id="marketingModal">
        <div class="marketing-content">
            <div class="marketing-header">
                <div class="marketing-title">üì± ÁßÅÂüüËê•ÈîÄÂ∑•ÂÖ∑</div>
                <div class="close-btn" onclick="closeMarketing()">&times;</div>
            </div>

            <div class="marketing-grid">
                <div class="marketing-card" onclick="openLearning()">
                    <div class="marketing-card-icon">üìö</div>
                    <div class="marketing-card-title">ÁßÅÂüüËê•ÈîÄÂ≠¶‰π†</div>
                    <div class="marketing-card-desc">Â≠¶‰π†ÁßÅÂüüËøêËê•ÊäÄÂ∑ß„ÄÅÊúãÂèãÂúàËê•ÈîÄÁ≠ñÁï•„ÄÅÂÆ¢Êà∑Áª¥Êä§ÊñπÊ≥ï</div>
                </div>

                <div class="marketing-card" onclick="createMoments()">
                    <div class="marketing-card-icon">‚úçÔ∏è</div>
                    <div class="marketing-card-title">Âàõ‰ΩúÊúãÂèãÂúà</div>
                    <div class="marketing-card-desc">AIÊô∫ËÉΩÁîüÊàêÊúãÂèãÂúàÂÜÖÂÆπÔºå‰∏ÄÈîÆÂèëÂ∏ÉÂà∞‰ºÅ‰∏öÂæÆ‰ø°</div>
                </div>

                <div class="marketing-card" onclick="viewMoments()">
                    <div class="marketing-card-icon">üëÄ</div>
                    <div class="marketing-card-title">ÁúãÁúãÊúãÂèãÂúà</div>
                    <div class="marketing-card-desc">Êü•ÁúãÂÆ¢Êà∑ÊúãÂèãÂúàÂä®ÊÄÅÔºåÂèäÊó∂‰∫íÂä®ÁÇπËµûËØÑËÆ∫</div>
                </div>

                <div class="marketing-card" onclick="sendWeChat()">
                    <div class="marketing-card-icon">üí¨</div>
                    <div class="marketing-card-title">‰ºÅÂæÆÂèëÈÄÅ</div>
                    <div class="marketing-card-desc">Âø´ÈÄüÂèëÈÄÅ‰∫ßÂìÅËµÑÊñô„ÄÅ‰ºòÊÉ†‰ø°ÊÅØÂà∞‰ºÅ‰∏öÂæÆ‰ø°</div>
                </div>
            </div>
        </div>
    </div>

    <!-- üÜï ÂæÖÂäû‰ªªÂä°ÂàóË°®ÂºπÁ™ó -->
    <div class="todo-modal" id="todoModal">
        <div class="todo-content">
            <div class="todo-header">
                <div class="todo-title">üìã ‰ªäÊó•ÂæÖÂäû‰ªªÂä°Ôºà15È°πÔºâ</div>
                <div class="close-btn" onclick="closeTodoList()">&times;</div>
            </div>

            <div class="todo-list" id="todoList">
                <!-- ‰ªªÂä°È°πÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
    </div>

    <!-- üÜï ÂêàÂêåÁÆ°ÁêÜÂºπÁ™ó -->
    <div class="heatmap-modal" id="contractModal">
        <div class="heatmap-content" style="max-width: 1000px;">
            <div class="heatmap-header">
                <div class="heatmap-title">üìÑ ÂêàÂêåÁÆ°ÁêÜÁ≥ªÁªü</div>
                <div class="close-btn" onclick="closeContract()">&times;</div>
            </div>

            <div style="display: flex; gap: 20px; margin-bottom: 30px;">
                <button class="voice-action-btn voice-confirm" onclick="switchContractTab('template')" id="btnTemplate" style="flex: 1;">ÂêàÂêåÊ®°Êùø</button>
                <button class="voice-action-btn voice-cancel" onclick="switchContractTab('list')" id="btnList" style="flex: 1;">ÂêàÂêåÂàóË°®</button>
                <button class="voice-action-btn voice-cancel" onclick="switchContractTab('sign')" id="btnSign" style="flex: 1;">ÂæÖÁ≠æÁΩ≤</button>
            </div>

            <!-- ÂêàÂêåÊ®°Êùø -->
            <div id="contractTemplate" class="contract-tab">
                <h3 style="margin-bottom: 20px; color: var(--li-gold);">üìã ÂêàÂêåÊ®°ÊùøÂ∫ì</h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                    <div class="timeline-item" style="cursor: pointer; border-left-color: #4CAF50;" onclick="generateContract('standard')">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üìù</div>
                            <div class="timeline-action">Ê†áÂáÜË¥≠ËΩ¶ÂêàÂêå</div>
                            <div class="timeline-detail">ÈÄÇÁî®‰∫éÂÖ®Ê¨æË¥≠ËΩ¶</div>
                            <button class="action-btn btn-primary" style="margin-top: 10px; width: 100%;">ÁîüÊàêÂêàÂêå</button>
                        </div>
                    </div>
                    <div class="timeline-item" style="cursor: pointer; border-left-color: #2196F3;" onclick="generateContract('finance')">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üí∞</div>
                            <div class="timeline-action">ÈáëËûçË¥≠ËΩ¶ÂêàÂêå</div>
                            <div class="timeline-detail">ÈÄÇÁî®‰∫éË¥∑Ê¨æË¥≠ËΩ¶</div>
                            <button class="action-btn btn-primary" style="margin-top: 10px; width: 100%;">ÁîüÊàêÂêàÂêå</button>
                        </div>
                    </div>
                    <div class="timeline-item" style="cursor: pointer; border-left-color: #FF9800;" onclick="generateContract('trade')">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üîÑ</div>
                            <div class="timeline-action">ÁΩÆÊç¢Ë¥≠ËΩ¶ÂêàÂêå</div>
                            <div class="timeline-detail">ÈÄÇÁî®‰∫éÊóßËΩ¶ÁΩÆÊç¢</div>
                            <button class="action-btn btn-primary" style="margin-top: 10px; width: 100%;">ÁîüÊàêÂêàÂêå</button>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 30px; background: rgba(33, 150, 243, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid var(--li-blue);">
                    <h4 style="color: var(--li-blue); margin-bottom: 10px;">ü§ñ AIÊô∫ËÉΩÂ°´ÂÖÖ</h4>
                    <p style="font-size: 0.9rem; color: var(--text-dim); line-height: 1.8;">
                        ÈÄâÊã©ÂÆ¢Êà∑ÂêéÔºåÁ≥ªÁªüÂ∞ÜËá™Âä®Ôºö<br>
                        ‚úì ‰ªéCRMÊèêÂèñÂÆ¢Êà∑‰ø°ÊÅØÔºàÂßìÂêç„ÄÅË∫´‰ªΩËØÅ„ÄÅÂú∞ÂùÄÔºâ<br>
                        ‚úì Ëá™Âä®Â°´ÂÖÖËΩ¶ËæÜ‰ø°ÊÅØÔºàËΩ¶Âûã„ÄÅÈÖçÁΩÆ„ÄÅ‰ª∑Ê†ºÔºâ<br>
                        ‚úì ÁîüÊàêÈáëËûçÊñπÊ°àÊòéÁªÜÔºàÈ¶ñ‰ªò„ÄÅË¥∑Ê¨æ„ÄÅÂà©ÁéáÔºâ<br>
                        ‚úì ËÆ°ÁÆó‰ºòÊÉ†ÊòéÁªÜÂíåÊúÄÁªà‰ª∑Ê†º<br>
                        ‚úì È¢Ñ‰º∞‰∫§‰ªòÊó∂Èó¥ÂíåÂú∞ÁÇπ
                    </p>
                </div>
            </div>

            <!-- ÂêàÂêåÂàóË°® -->
            <div id="contractList" class="contract-tab" style="display: none;">
                <h3 style="margin-bottom: 20px; color: var(--li-gold);">üìë ÂêàÂêåÂàóË°®</h3>
                <div class="timeline-item">
                    <div style="flex: 1;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div class="timeline-action">Âë®Â•≥Â£´ - ÁêÜÊÉ≥L7 MaxË¥≠ËΩ¶ÂêàÂêå</div>
                                <div class="timeline-detail">ÂêàÂêåÁºñÂè∑ÔºöLI2026012701 | ÈáëÈ¢ùÔºö34.98‰∏á</div>
                                <div class="timeline-detail">Áä∂ÊÄÅÔºö<span style="color: #4CAF50;">‚úì Â∑≤Á≠æÁΩ≤</span> | 2026-01-27 15:30</div>
                            </div>
                            <button class="action-btn btn-secondary" onclick="viewContract('LI2026012701')">Êü•Áúã</button>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div style="flex: 1;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div class="timeline-action">ÈôàÂÖàÁîü - ÁêÜÊÉ≥L7 AirÈáëËûçË¥≠ËΩ¶ÂêàÂêå</div>
                                <div class="timeline-detail">ÂêàÂêåÁºñÂè∑ÔºöLI2026012702 | ÈáëÈ¢ùÔºö31.98‰∏á</div>
                                <div class="timeline-detail">Áä∂ÊÄÅÔºö<span style="color: #FF9800;">‚è≥ ÂæÖÂÆ¢Êà∑Á≠æÁΩ≤</span> | 2026-01-27 16:00</div>
                            </div>
                            <button class="action-btn btn-primary" onclick="remindSign('LI2026012702')">ÊèêÈÜíÁ≠æÁΩ≤</button>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div style="flex: 1;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div class="timeline-action">Âê¥ÊÄª - ÁêÜÊÉ≥L9 MaxÁΩÆÊç¢Ë¥≠ËΩ¶ÂêàÂêå</div>
                                <div class="timeline-detail">ÂêàÂêåÁºñÂè∑ÔºöLI2026012703 | ÈáëÈ¢ùÔºö45.98‰∏á</div>
                                <div class="timeline-detail">Áä∂ÊÄÅÔºö<span style="color: #999;">üìù ËçâÁ®ø</span> | 2026-01-27 14:20</div>
                            </div>
                            <button class="action-btn btn-primary" onclick="editContract('LI2026012703')">ÁªßÁª≠ÁºñËæë</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÂæÖÁ≠æÁΩ≤ -->
            <div id="contractSign" class="contract-tab" style="display: none;">
                <h3 style="margin-bottom: 20px; color: var(--li-gold);">‚úçÔ∏è ÂæÖÁ≠æÁΩ≤ÂêàÂêåÔºà3‰ªΩÔºâ</h3>
                <div class="timeline-item" style="background: rgba(255, 152, 0, 0.1);">
                    <div style="flex: 1;">
                        <div class="timeline-action">ÈôàÂÖàÁîü - ÁêÜÊÉ≥L7 AirÈáëËûçË¥≠ËΩ¶ÂêàÂêå</div>
                        <div class="timeline-detail">ÂèëÈÄÅÊó∂Èó¥Ôºö2Â∞èÊó∂Ââç | ÂÆ¢Êà∑Â∑≤Êü•Áúã</div>
                        <div style="margin-top: 10px; display: flex; gap: 10px;">
                            <button class="action-btn btn-primary" onclick="callCustomer('ÈôàÂÖàÁîü')">ÁîµËØùÂÇ¨Á≠æ</button>
                            <button class="action-btn btn-secondary" onclick="resendContract('ÈôàÂÖàÁîü')">ÈáçÊñ∞ÂèëÈÄÅ</button>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div style="flex: 1;">
                        <div class="timeline-action">ËµµÂ•≥Â£´ - ÁêÜÊÉ≥L7 ProË¥≠ËΩ¶ÂêàÂêå</div>
                        <div class="timeline-detail">ÂèëÈÄÅÊó∂Èó¥Ôºö1Â§©Ââç | ÂÆ¢Êà∑Êú™Êü•Áúã</div>
                        <div style="margin-top: 10px; display: flex; gap: 10px;">
                            <button class="action-btn btn-primary" onclick="callCustomer('ËµµÂ•≥Â£´')">ÁîµËØùÊèêÈÜí</button>
                            <button class="action-btn btn-secondary" onclick="resendContract('ËµµÂ•≥Â£´')">ÈáçÊñ∞ÂèëÈÄÅ</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- üÜï Ê∂àÊÅØÁæ§ÂèëÂºπÁ™ó -->
    <div class="heatmap-modal" id="batchMessageModal">
        <div class="heatmap-content" style="max-width: 1100px;">
            <div class="heatmap-header">
                <div class="heatmap-title">üì® ÊâπÈáèÊ∂àÊÅØÁæ§Âèë</div>
                <div class="close-btn" onclick="closeBatchMessage()">&times;</div>
            </div>

            <div style="display: grid; grid-template-columns: 350px 1fr; gap: 30px;">
                <!-- Â∑¶‰æßÔºöÂÆ¢Êà∑ÈÄâÊã© -->
                <div>
                    <h3 style="margin-bottom: 15px; color: var(--li-gold);">üë• ÈÄâÊã©ÂÆ¢Êà∑ÔºàÂ∑≤ÈÄâ<span id="selectedCount">0</span>‰∫∫Ôºâ</h3>

                    <div style="margin-bottom: 15px;">
                        <button class="action-btn btn-secondary" onclick="selectByStage('a1')" style="width: 100%; margin-bottom: 8px;">ÂÖ®ÈÄâA1Èò∂ÊÆµÔºà23‰∫∫Ôºâ</button>
                        <button class="action-btn btn-secondary" onclick="selectByStage('i2')" style="width: 100%; margin-bottom: 8px;">ÂÖ®ÈÄâI2Èò∂ÊÆµÔºà12‰∫∫Ôºâ</button>
                        <button class="action-btn btn-secondary" onclick="selectByStage('a3')" style="width: 100%; margin-bottom: 8px;">ÂÖ®ÈÄâA3Èò∂ÊÆµÔºà5‰∫∫Ôºâ</button>
                        <button class="action-btn btn-secondary" onclick="selectAll()" style="width: 100%;">ÂÖ®ÈÄâÊâÄÊúâÂÆ¢Êà∑Ôºà40‰∫∫Ôºâ</button>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; max-height: 400px; overflow-y: auto;">
                        <div class="customer-checkbox" style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px; cursor: pointer;" onclick="toggleCustomerSelect('c1')">
                            <input type="checkbox" id="check-c1" style="width: 18px; height: 18px; cursor: pointer;">
                            <div>
                                <div style="font-weight: bold;">Âº†ÂÖàÁîü</div>
                                <div style="font-size: 0.8rem; color: var(--text-dim);">A1Èò∂ÊÆµ | ÂÖ≥Ê≥®L7</div>
                            </div>
                        </div>
                        <div class="customer-checkbox" style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px; cursor: pointer;" onclick="toggleCustomerSelect('c4')">
                            <input type="checkbox" id="check-c4" style="width: 18px; height: 18px; cursor: pointer;">
                            <div>
                                <div style="font-weight: bold;">ÈôàÂÖàÁîü</div>
                                <div style="font-size: 0.8rem; color: var(--text-dim);">I2Èò∂ÊÆµ | Â∑≤ËØïÈ©æ</div>
                            </div>
                        </div>
                        <div class="customer-checkbox" style="margin-bottom: 10px; display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px; cursor: pointer;" onclick="toggleCustomerSelect('c5')">
                            <input type="checkbox" id="check-c5" style="width: 18px; height: 18px; cursor: pointer;">
                            <div>
                                <div style="font-weight: bold;">ËµµÂ•≥Â£´</div>
                                <div style="font-size: 0.8rem; color: var(--text-dim);">I2Èò∂ÊÆµ | ÂÆ∂‰∫∫ÂèÇ‰∏é</div>
                            </div>
                        </div>
                        <div style="text-align: center; padding: 20px; color: var(--text-dim); font-size: 0.85rem;">
                            ... Êõ¥Â§öÂÆ¢Êà∑ ...
                        </div>
                    </div>
                </div>

                <!-- Âè≥‰æßÔºöÊ∂àÊÅØÁºñËæë -->
                <div>
                    <h3 style="margin-bottom: 15px; color: var(--li-gold);">‚úçÔ∏è ÁºñËæëÊ∂àÊÅØÂÜÖÂÆπ</h3>

                    <div style="margin-bottom: 15px; display: flex; gap: 10px;">
                        <button class="quick-action-btn" onclick="useMessageTemplate('follow')">Ë∑üËøõÊ®°Êùø</button>
                        <button class="quick-action-btn" onclick="useMessageTemplate('testdrive')">ËØïÈ©æÈÇÄÁ∫¶</button>
                        <button class="quick-action-btn" onclick="useMessageTemplate('offer')">‰ºòÊÉ†ÈÄöÁü•</button>
                        <button class="quick-action-btn" onclick="useMessageTemplate('delivery')">‰∫§‰ªòÊèêÈÜí</button>
                        <button class="quick-action-btn" onclick="aiGenerateMessage()">ü§ñ AIÁîüÊàê</button>
                    </div>

                    <div style="background: rgba(33, 150, 243, 0.1); padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid var(--li-blue);">
                        <div style="font-weight: bold; margin-bottom: 8px; color: var(--li-blue);">ü§ñ AI‰∏™ÊÄßÂåñÂèòÈáè</div>
                        <div style="font-size: 0.85rem; color: var(--text-dim); line-height: 1.8;">
                            ‰ΩøÁî®ÂèòÈáèËÆ©Ê∂àÊÅØ‰∏™ÊÄßÂåñÔºö<br>
                            {ÂßìÂêç} - ÂÆ¢Êà∑ÂßìÂêç<br>
                            {ËΩ¶Âûã} - ÊÑèÂêëËΩ¶Âûã<br>
                            {È¢ÑÁÆó} - Ë¥≠ËΩ¶È¢ÑÁÆó<br>
                            {ÂÖ≥Ê≥®ÁÇπ} - ÂÆ¢Êà∑ÂÖ≥Ê≥®ÁÇπ<br>
                            AI‰ºöÊ†πÊçÆÊØè‰∏™ÂÆ¢Êà∑ÁöÑ‰ø°ÊÅØËá™Âä®ÊõøÊç¢Ëøô‰∫õÂèòÈáè
                        </div>
                    </div>

                    <textarea id="messageContent" style="width: 100%; height: 200px; padding: 15px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px; color: var(--text-light); font-size: 0.95rem; resize: vertical; font-family: inherit;" placeholder="ËæìÂÖ•Ê∂àÊÅØÂÜÖÂÆπ...ÊîØÊåÅ‰ΩøÁî®{ÂßìÂêç}„ÄÅ{ËΩ¶Âûã}Á≠âÂèòÈáèÂÆûÁé∞‰∏™ÊÄßÂåñ">{ÂßìÂêç}ÊÇ®Â•ΩÔºÅ

ÊÑüË∞¢ÊÇ®ÂÖ≥Ê≥®ÁêÜÊÉ≥Ê±ΩËΩ¶„ÄÇÊ†πÊçÆÊÇ®ÂØπ{ËΩ¶Âûã}ÁöÑÂÖ¥Ë∂£ÔºåÊàë‰∏∫ÊÇ®ÂáÜÂ§á‰∫Ü‰∏Ä‰ªΩËØ¶ÁªÜÁöÑÈÖçÁΩÆÂíå‰ºòÊÉ†‰ø°ÊÅØ„ÄÇ

{ÂÖ≥Ê≥®ÁÇπ}ÊñπÈù¢ÔºåÁêÜÊÉ≥Âú®Ë°å‰∏öÂÜÖÂ§Ñ‰∫éÈ¢ÜÂÖàÂú∞‰Ωç„ÄÇÊú¨Âë®Êú´Êàë‰ª¨ÊúâËØïÈ©æÊ¥ªÂä®ÔºåÊÇ®Êñπ‰æøËøáÊù•‰ΩìÈ™åÂêóÔºü

ÊúüÂæÖÊÇ®ÁöÑÂõûÂ§çÔºÅ
ÊùéÊòé - ÁêÜÊÉ≥Ê±ΩËΩ¶ÈîÄÂîÆÈ°æÈóÆ</textarea>

                    <div style="display: flex; gap: 15px; margin-top: 15px; align-items: center;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="scheduleCheck" onchange="toggleSchedule()" style="width: 16px; height: 16px;">
                            <span>ÂÆöÊó∂ÂèëÈÄÅ</span>
                        </label>
                        <input type="datetime-local" id="scheduleTime" style="padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: var(--text-light);" disabled>
                    </div>

                    <div id="messagePreview" style="margin-top: 20px; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; display: none;">
                        <h4 style="margin-bottom: 15px; color: var(--li-gold);">üì± Ê∂àÊÅØÈ¢ÑËßà</h4>
                        <div id="previewContent" style="font-size: 0.9rem; line-height: 1.8; white-space: pre-wrap;"></div>
                    </div>

                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button class="action-btn btn-secondary" onclick="previewMessage()" style="flex: 1;">È¢ÑËßàÊïàÊûú</button>
                        <button class="action-btn btn-primary" onclick="sendBatchMessage()" style="flex: 2; font-size: 1.1rem;">üì® Á´ãÂç≥ÂèëÈÄÅ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- üÜï ÊµÅÁ®ãËá™Âä®ÂåñÂºπÁ™ó -->
    <div class="heatmap-modal" id="workflowModal">
        <div class="heatmap-content" style="max-width: 1200px;">
            <div class="heatmap-header">
                <div class="heatmap-title">‚öôÔ∏è ËÆ¢ÂçïÊµÅÁ®ãËá™Âä®Âåñ</div>
                <div class="close-btn" onclick="closeWorkflow()">&times;</div>
            </div>

            <div style="margin-bottom: 30px; text-align: center;">
                <button class="action-btn btn-primary" onclick="showWorkflowList()" style="width: auto; padding: 12px 30px;">üìã Êü•ÁúãÊâÄÊúâËÆ¢ÂçïÊµÅÁ®ã</button>
            </div>

            <!-- ÊµÅÁ®ãÂèØËßÜÂåñ -->
            <h3 style="margin-bottom: 20px; color: var(--li-gold);">üìä ËÆ¢ÂçïÊµÅÁ®ãÁ§∫‰æãÔºöÂë®Â•≥Â£´ - ÁêÜÊÉ≥L7 Max</h3>

            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 40px;">
                <div class="workflow-step" style="flex: 1; text-align: center;">
                    <div style="width: 60px; height: 60px; margin: 0 auto 10px; border-radius: 50%; background: #4CAF50; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">‚úì</div>
                    <div style="font-weight: bold; margin-bottom: 5px;">ËÆ¢ÂçïÂàõÂª∫</div>
                    <div style="font-size: 0.75rem; color: var(--text-dim);">01-25 10:30</div>
                    <div style="font-size: 0.7rem; color: #4CAF50; margin-top: 5px;">Â∑≤ÂÆåÊàê</div>
                </div>
                <div style="flex: 0.3; height: 2px; background: #4CAF50;"></div>

                <div class="workflow-step" style="flex: 1; text-align: center;">
                    <div style="width: 60px; height: 60px; margin: 0 auto 10px; border-radius: 50%; background: #4CAF50; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">‚úì</div>
                    <div style="font-weight: bold; margin-bottom: 5px;">ÊîØ‰ªòÂÆöÈáë</div>
                    <div style="font-size: 0.75rem; color: var(--text-dim);">01-25 11:00</div>
                    <div style="font-size: 0.7rem; color: #4CAF50; margin-top: 5px;">Â∑≤ÂÆåÊàê</div>
                </div>
                <div style="flex: 0.3; height: 2px; background: #4CAF50;"></div>

                <div class="workflow-step" style="flex: 1; text-align: center;">
                    <div style="width: 60px; height: 60px; margin: 0 auto 10px; border-radius: 50%; background: #FF9800; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; animation: pulse 2s infinite;">‚è≥</div>
                    <div style="font-weight: bold; margin-bottom: 5px;">Á≠æÁΩ≤ÂêàÂêå</div>
                    <div style="font-size: 0.75rem; color: var(--text-dim);">‰ªäÊó•15:00</div>
                    <div style="font-size: 0.7rem; color: #FF9800; margin-top: 5px;">ËøõË°å‰∏≠</div>
                </div>
                <div style="flex: 0.3; height: 2px; background: rgba(255,255,255,0.2);"></div>

                <div class="workflow-step" style="flex: 1; text-align: center;">
                    <div style="width: 60px; height: 60px; margin: 0 auto 10px; border-radius: 50%; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">üìù</div>
                    <div style="font-weight: bold; margin-bottom: 5px;">ÈáëËûçÂÆ°Êâπ</div>
                    <div style="font-size: 0.75rem; color: var(--text-dim);">ÂæÖÂ§ÑÁêÜ</div>
                    <div style="font-size: 0.7rem; color: var(--text-dim); margin-top: 5px;">Á≠âÂæÖ‰∏≠</div>
                </div>
                <div style="flex: 0.3; height: 2px; background: rgba(255,255,255,0.2);"></div>

                <div class="workflow-step" style="flex: 1; text-align: center;">
                    <div style="width: 60px; height: 60px; margin: 0 auto 10px; border-radius: 50%; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">üöó</div>
                    <div style="font-weight: bold; margin-bottom: 5px;">ËΩ¶ËæÜ‰∫§‰ªò</div>
                    <div style="font-size: 0.75rem; color: var(--text-dim);">È¢ÑËÆ°02-15</div>
                    <div style="font-size: 0.7rem; color: var(--text-dim); margin-top: 5px;">Êú™ÂºÄÂßã</div>
                </div>
            </div>

            <!-- Ëá™Âä®ÂåñËßÑÂàô -->
            <div style="background: rgba(76, 175, 80, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #4CAF50; margin-bottom: 25px;">
                <h4 style="color: #4CAF50; margin-bottom: 15px;">ü§ñ Ëá™Âä®ÂåñËßÑÂàôÂ∑≤ÂêØÁî®</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; font-size: 0.9rem;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="color: #4CAF50;">‚úì</span>
                        <span>ÂÆ¢Êà∑Á≠æÁ∫¶ÂêéËá™Âä®Êèê‰∫§ÈáëËûçÂÆ°Êâπ</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="color: #4CAF50;">‚úì</span>
                        <span>ÂÆ°ÊâπÈÄöËøáÂêéËá™Âä®ÂàÜÈÖçËΩ¶ËæÜ</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="color: #4CAF50;">‚úì</span>
                        <span>ËΩ¶ËæÜÂà∞Â∫óÂêéËá™Âä®ÈÄöÁü•ÂÆ¢Êà∑</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="color: #4CAF50;">‚úì</span>
                        <span>ÊµÅÁ®ãË∂ÖÊó∂Ëá™Âä®ÊèêÈÜíÁõ∏ÂÖ≥‰∫∫Âëò</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="color: #4CAF50;">‚úì</span>
                        <span>‰∫§‰ªòÂâç3Â§©Ëá™Âä®ÂèëÈÄÅÊèêÈÜí</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="color: #4CAF50;">‚úì</span>
                        <span>ÂºÇÂ∏∏ÊÉÖÂÜµËá™Âä®ÂçáÁ∫ßÂ§ÑÁêÜ</span>
                    </div>
                </div>
            </div>

            <!-- ÂΩìÂâçÂæÖÂ§ÑÁêÜ‰ªªÂä° -->
            <h3 style="margin-bottom: 20px; color: var(--li-gold);">üìå ÂΩìÂâçÂæÖÂ§ÑÁêÜ‰ªªÂä°Ôºà3È°πÔºâ</h3>
            <div class="timeline-item" style="background: rgba(255, 87, 34, 0.1);">
                <div style="flex: 1;">
                    <div class="timeline-action">üî¥ Á¥ßÊÄ•ÔºöÂë®Â•≥Â£´‰ªäÊó•15:00Âà∞Â∫óÁ≠æÁ∫¶</div>
                    <div class="timeline-detail">ÂáÜÂ§á‰∫ãÈ°πÔºöÂêàÂêåÊñá‰ª∂„ÄÅÈáëËûçÊñπÊ°à„ÄÅ‰∫§‰ªòÊó∂Èó¥Ë°®</div>
                    <div style="margin-top: 10px; display: flex; gap: 10px;">
                        <button class="action-btn btn-primary" onclick="markComplete('task1')">Ê†áËÆ∞ÂÆåÊàê</button>
                        <button class="action-btn btn-secondary" onclick="viewTaskDetail('task1')">Êü•ÁúãËØ¶ÊÉÖ</button>
                    </div>
                </div>
            </div>
            <div class="timeline-item">
                <div style="flex: 1;">
                    <div class="timeline-action">ÈôàÂÖàÁîüÈáëËûçÂÆ°ÊâπÈ¢ÑËÆ°‰ªäÊó•ÈÄöËøá</div>
                    <div class="timeline-detail">ÂÆ°ÊâπÈÄöËøáÂêéÁ≥ªÁªüÂ∞ÜËá™Âä®ÂàÜÈÖçËΩ¶ËæÜÂπ∂ÈÄöÁü•ÂÆ¢Êà∑</div>
                    <div style="margin-top: 10px;">
                        <button class="action-btn btn-secondary" onclick="checkApprovalStatus('ÈôàÂÖàÁîü')">Êü•ËØ¢ÂÆ°ÊâπËøõÂ∫¶</button>
                    </div>
                </div>
            </div>
            <div class="timeline-item">
                <div style="flex: 1;">
                    <div class="timeline-action">ËµµÂ•≥Â£´ÂêàÂêåÂ∑≤ÂèëÈÄÅ2Â∞èÊó∂ÔºåÂÆ¢Êà∑Â∑≤Êü•Áúã</div>
                    <div class="timeline-detail">Âª∫ËÆÆÔºöÁîµËØùË∑üËøõÂÇ¨‰øÉÁ≠æÁΩ≤</div>
                    <div style="margin-top: 10px;">
                        <button class="action-btn btn-primary" onclick="callCustomer('ËµµÂ•≥Â£´')">Á´ãÂç≥Ëá¥Áîµ</button>
                    </div>
                </div>
            </div>

            <!-- ÊµÅÁ®ãÁªüËÆ° -->
            <div style="margin-top: 30px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.1); border-radius: 12px;">
                    <div style="font-size: 2rem; font-weight: bold; color: #4CAF50; margin-bottom: 8px;">8</div>
                    <div style="font-size: 0.85rem; color: var(--text-dim);">ËøõË°å‰∏≠ËÆ¢Âçï</div>
                </div>
                <div style="text-align: center; padding: 20px; background: rgba(33, 150, 243, 0.1); border-radius: 12px;">
                    <div style="font-size: 2rem; font-weight: bold; color: #2196F3; margin-bottom: 8px;">12</div>
                    <div style="font-size: 0.85rem; color: var(--text-dim);">ÂæÖÂÆ°ÊâπËÆ¢Âçï</div>
                </div>
                <div style="text-align: center; padding: 20px; background: rgba(255, 152, 0, 0.1); border-radius: 12px;">
                    <div style="font-size: 2rem; font-weight: bold; color: #FF9800; margin-bottom: 8px;">3</div>
                    <div style="font-size: 0.85rem; color: var(--text-dim);">Ë∂ÖÊó∂ÊèêÈÜí</div>
                </div>
                <div style="text-align: center; padding: 20px; background: rgba(212, 184, 134, 0.1); border-radius: 12px;">
                    <div style="font-size: 2rem; font-weight: bold; color: var(--li-gold); margin-bottom: 8px;">25</div>
                    <div style="font-size: 0.85rem; color: var(--text-dim);">Êú¨ÊúàÂ∑≤‰∫§‰ªò</div>
                </div>
            </div>
        </div>
    </div>

    <!-- üÜï ÈîÄÂîÆÊºèÊñóÂèØËßÜÂåñÂºπÁ™ó -->
    <div class="funnel-modal" id="funnelModal">
        <div class="funnel-content">
            <div class="funnel-header">
                <div class="funnel-title">üìä ÈîÄÂîÆÊºèÊñóÂàÜÊûê</div>
                <div style="display: flex; align-items: center; gap: 20px;">
                    <div class="funnel-period">
                        <button class="period-btn" onclick="switchPeriod('today')">‰ªäÊó•</button>
                        <button class="period-btn" onclick="switchPeriod('week')">Êú¨Âë®</button>
                        <button class="period-btn active" onclick="switchPeriod('month')">Êú¨Êúà</button>
                        <button class="period-btn" onclick="switchPeriod('quarter')">Êú¨Â≠£Â∫¶</button>
                    </div>
            <div class="close-btn" onclick="closeSalesFunnel()" style="color: #2c3e50; font-size: 1.5rem; cursor: pointer;">&times;</div>
                </div>
            </div>

            <!-- ÈîÄÂîÆÊºèÊñó‰∏ª‰Ωì - ÂúÜÂΩ¢ËÆæËÆ° -->
            <div class="sales-funnel">
                <!-- Á¨¨1Â±ÇÔºöÁ∫øÁ¥¢Èáè -->
                <div class="funnel-stage stage-leads">
                    <div class="funnel-circle">
                        <div class="stage-icon">üéØ</div>
                        <div class="stage-info">
                            <h3>Á∫øÁ¥¢Èáè</h3>
                            <div class="stage-subtitle">Marketing Leads</div>
                        </div>
                        <div class="stage-count" id="funnel-leads">580</div>
                        <div class="stage-rate">100%</div>
                    </div>
                </div>

                <!-- Á¨¨2Â±ÇÔºöÂÆ¢Êà∑Èáè -->
                <div class="funnel-stage stage-customers">
                    <div class="funnel-circle">
                        <div class="stage-icon">üë•</div>
                        <div class="stage-info">
                            <h3>ÂÆ¢Êà∑Èáè</h3>
                            <div class="stage-subtitle">Valid Customers</div>
                        </div>
                        <div class="stage-count" id="funnel-customers">348</div>
                        <div class="stage-rate">60% ËΩ¨Âåñ</div>
                    </div>
                </div>

                <!-- Á¨¨3Â±ÇÔºöËØïÈ©æÈáè -->
                <div class="funnel-stage stage-testdrive">
                    <div class="funnel-circle">
                        <div class="stage-icon">üöó</div>
                        <div class="stage-info">
                            <h3>ËØïÈ©æÈáè</h3>
                            <div class="stage-subtitle">Test Drive</div>
                        </div>
                        <div class="stage-count" id="funnel-testdrive">156</div>
                        <div class="stage-rate">45% ËΩ¨Âåñ</div>
                    </div>
                </div>

                <!-- Á¨¨4Â±ÇÔºöÈîÅÂçïÈáè -->
                <div class="funnel-stage stage-locked">
                    <div class="funnel-circle">
                        <div class="stage-icon">üîí</div>
                        <div class="stage-info">
                            <h3>ÈîÅÂçïÈáè</h3>
                            <div class="stage-subtitle">Locked Orders</div>
                        </div>
                        <div class="stage-count" id="funnel-locked">78</div>
                        <div class="stage-rate">50% ËΩ¨Âåñ</div>
                    </div>
                </div>

                <!-- Á¨¨5Â±ÇÔºö‰∫§‰ªòÈáè -->
                <div class="funnel-stage stage-delivered">
                    <div class="funnel-circle">
                        <div class="stage-icon">‚úÖ</div>
                        <div class="stage-info">
                            <h3>‰∫§‰ªòÈáè</h3>
                            <div class="stage-subtitle">Delivered</div>
                        </div>
                        <div class="stage-count" id="funnel-delivered">42</div>
                        <div class="stage-rate">54% ËΩ¨Âåñ</div>
                    </div>
                </div>
            </div>

            <!-- ËΩ¨ÂåñÁéáËØ¶ÁªÜÊï∞ÊçÆ -->
            <div class="conversion-details">
                <div class="conversion-card">
                    <div class="conversion-label">Á∫øÁ¥¢‚ÜíÂÆ¢Êà∑ËΩ¨ÂåñÁéá</div>
                    <div class="conversion-value">60.0%</div>
                    <div class="conversion-change change-up">
                        <span>‚ñ≤</span>
                        <span>ËæÉ‰∏äÊúà +5.2%</span>
                    </div>
                </div>
                <div class="conversion-card">
                    <div class="conversion-label">ÂÆ¢Êà∑‚ÜíËØïÈ©æËΩ¨ÂåñÁéá</div>
                    <div class="conversion-value">44.8%</div>
                    <div class="conversion-change change-up">
                        <span>‚ñ≤</span>
                        <span>ËæÉ‰∏äÊúà +2.3%</span>
                    </div>
                </div>
                <div class="conversion-card">
                    <div class="conversion-label">ËØïÈ©æ‚ÜíÈîÅÂçïËΩ¨ÂåñÁéá</div>
                    <div class="conversion-value">50.0%</div>
                    <div class="conversion-change change-down">
                        <span>‚ñº</span>
                        <span>ËæÉ‰∏äÊúà -1.5%</span>
                    </div>
                </div>
                <div class="conversion-card">
                    <div class="conversion-label">ÈîÅÂçï‚Üí‰∫§‰ªòËΩ¨ÂåñÁéá</div>
                    <div class="conversion-value">53.8%</div>
                    <div class="conversion-change change-up">
                        <span>‚ñ≤</span>
                        <span>ËæÉ‰∏äÊúà +3.1%</span>
                    </div>
                </div>
            </div>

            <!-- ÊúàÂ∫¶ÁõÆÊ†áËøõÂ∫¶ -->
            <div class="target-progress-section">
                <div class="target-header">
                    <div class="target-title">üìà Êú¨Êúà‰∫§‰ªòÁõÆÊ†áËøõÂ∫¶</div>
                    <div class="target-status">ÁõÆÊ†áÔºö80Âè∞ | Â∑≤ÂÆåÊàêÔºö42Âè∞ | Ââ©‰ΩôÔºö38Âè∞</div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" style="width: 52.5%;">
                        <span class="progress-percentage">52.5%</span>
                    </div>
                </div>
                <div class="progress-detail">
                    <span>Êú¨ÊúàËøòÂâ© <strong style="color: var(--li-green-dark);">18Â§©</strong></span>
                    <span>Êó•ÂùáÈúÄÂÆåÊàê <strong style="color: #f57c00;">2.1Âè∞</strong></span>
                    <span>È¢ÑËÆ°ÂÆåÊàêÁéá <strong style="color: #4CAF50;">95%</strong></span>
                </div>
            </div>

            <!-- AIÂàÜÊûêÂª∫ËÆÆ -->
            <div style="margin-top: 30px; background: rgba(33, 150, 243, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #2196F3;">
                <h3 style="color: #1976D2; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                    <span>ü§ñ</span>
                    <span>AIÊô∫ËÉΩÂàÜÊûê‰∏éÂª∫ËÆÆ</span>
                </h3>
                <div style="font-size: 0.9rem; line-height: 1.8; color: var(--text-main);">
                    <p style="margin-bottom: 10px;"><strong>üìä ÊºèÊñóÂÅ•Â∫∑Â∫¶Ôºö</strong><span style="color: #4CAF50; font-weight: bold;">ËâØÂ•Ω</span></p>
                    <p style="margin-bottom: 10px;"><strong>‚ö†Ô∏è ËñÑÂº±ÁéØËäÇÔºö</strong>ËØïÈ©æ‚ÜíÈîÅÂçïËΩ¨ÂåñÁéáÁï•Êúâ‰∏ãÈôçÔºåÂª∫ËÆÆÂä†Âº∫ËØïÈ©æÂêéË∑üËøõ</p>
                    <p style="margin-bottom: 10px;"><strong>üí° ‰ºòÂåñÂª∫ËÆÆÔºö</strong></p>
                    <ul style="margin-left: 20px; margin-bottom: 10px;">
                        <li>Â¢ûÂä†Á∫øÁ¥¢Ë¥®ÈáèÁ≠õÈÄâÔºåÊèêÈ´òÁ∫øÁ¥¢‚ÜíÂÆ¢Êà∑ËΩ¨ÂåñÁéá</li>
                        <li>Âº∫ÂåñËØïÈ©æ‰ΩìÈ™åÊµÅÁ®ãÔºåÈáçÁÇπËÆ≤Ëß£Êô∫È©æÂäüËÉΩ</li>
                        <li>ËØïÈ©æÂêé24Â∞èÊó∂ÂÜÖÂøÖÈ°ªË∑üËøõÔºåÊé®ÈÄÅÈáëËûçÊñπÊ°à</li>
                        <li>ÈîÅÂçïÂÆ¢Êà∑ÈáçÁÇπÂÖ≥Ê≥®ÔºåÂä†Âø´ÂÆ°ÊâπÂíå‰∫§‰ªòËøõÂ∫¶</li>
                    </ul>
                    <p><strong>üéØ ÁõÆÊ†áËææÊàêÈ¢ÑÊµãÔºö</strong>ÊåâÂΩìÂâçËΩ¨ÂåñÁéáÔºåÊú¨ÊúàÈ¢ÑËÆ°‰∫§‰ªò <span style="color: #4CAF50; font-weight: bold;">76Âè∞</span>ÔºåÂÆåÊàêÁéá <span style="color: #4CAF50; font-weight: bold;">95%</span></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== Êï∞ÊçÆÊ®°Âûã ====================
        const customers = {
            a1: [
                {
                    id: 'c1',
                    name: 'Âº†ÂÖàÁîü',
                    phone: '138****2345',
                    priority: 'medium',
                    tags: ['È¶ñÊ¨°Âí®ËØ¢', 'ÂÖ≥Ê≥®L7', 'ÂØπÊØîÁâπÊñØÊãâ'],
                    budget: '30-35‰∏á',
                    interest: 'Êô∫È©æÂäüËÉΩ',
                    lastContact: '2Â∞èÊó∂ÂâçÂí®ËØ¢',
                    aiSuggestion: 'Êé®ÈÄÅÁêÜÊÉ≥AD Max‰∏éFSDÂØπÊØîËµÑÊñôÔºåÂº∫Ë∞ÉÂüéÂ∏ÇNOA‰ºòÂäø'
                },
                {
                    id: 'c2',
                    name: 'ÁéãÂ•≥Â£´',
                    phone: '139****5678',
                    priority: 'low',
                    tags: ['ÊµèËßàÂÆòÁΩë', 'Êú™Áïô‰ø°ÊÅØ'],
                    budget: 'È¢ÑÁÆóÊú™Áü•',
                    interest: 'ÂÖ≥Ê≥®L9',
                    lastContact: 'Êò®Â§© 14:30',
                    aiSuggestion: 'Âª∫ËÆÆ‰∏ªÂä®ÈÇÄÁ∫¶Âà∞Â∫ó‰ΩìÈ™åÔºåÂèëÈÄÅÈó®Â∫ó‰ΩçÁΩÆÂíåÂºÄÊîæÊó∂Èó¥'
                },
                {
                    id: 'c3',
                    name: 'ÂàòÊÄª',
                    phone: '139****8765',
                    priority: 'high',
                    tags: ['Â§öÊ¨°Âí®ËØ¢', 'ÂÖ≥Ê≥®L8', 'ÂïÜÂä°Áî®ÈÄî'],
                    budget: '40‰∏á+',
                    interest: 'Á©∫Èó¥ËàíÈÄÇ',
                    lastContact: '30ÂàÜÈíüÂâçÂí®ËØ¢',
                    aiSuggestion: 'ÂÆ¢Êà∑ÂÖ≥Ê≥®ÂïÜÂä°Êé•ÂæÖÂú∫ÊôØÔºåÊé®ËçêL8 MaxÈÖçÁΩÆÔºåÂº∫Ë∞ÉÂêéÊéíËàíÈÄÇÂíåÁ©∫Èó¥‰ºòÂäø'
                }
            ],
            i2: [
                {
                    id: 'c4',
                    name: 'ÈôàÂÖàÁîü',
                    phone: '136****4567',
                    priority: 'high',
                    tags: ['Â∑≤ËØïÈ©æ', 'ÂØπÊØîModel Y', '‰ª∑Ê†ºÊïèÊÑü'],
                    budget: '28-30‰∏á',
                    interest: 'L7 AirÂÄæÂêë',
                    lastContact: '‰ªäÂ§©ËØïÈ©æÂÆå',
                    aiSuggestion: 'ËØïÈ©æÂêéÂèçÈ¶àËâØÂ•ΩÔºå‰ΩÜÂØπ‰ª∑Ê†ºÊúâÈ°æËôë„ÄÇÊé®ËçêÈáëËûçÊñπÊ°àÔºö36ÊúüÈõ∂ÊÅØÔºåÊúà‰æõ‰ªÖ6,222ÂÖÉ'
                },
                {
                    id: 'c5',
                    name: 'ËµµÂ•≥Â£´',
                    phone: '137****9012',
                    priority: 'high',
                    tags: ['‰∫åÊ¨°Âà∞Â∫ó', 'ÂÆ∂‰∫∫ÂèÇ‰∏é', 'ÂÜ≥Á≠ñ‰∏≠'],
                    budget: '35‰∏á',
                    interest: 'L7 ProÂÄæÂêë',
                    lastContact: 'Êò®Â§©Êê∫ÂÆ∂‰∫∫Âà∞Â∫ó',
                    aiSuggestion: 'ÂÆ∂‰∫∫ÂØπÂÆâÂÖ®ÈÖçÁΩÆÂÖ≥Ê≥®Â∫¶È´òÔºåÊé®ÈÄÅÁêÜÊÉ≥ÂÆâÂÖ®ÊµãËØïÊä•ÂëäÂíåÂÑøÁ´•Â∫ßÊ§ÖÊñπÊ°à'
                }
            ],
            a3: [
                {
                    id: 'c6',
                    name: 'Âë®Â•≥Â£´',
                    phone: '138****5678',
                    priority: 'high',
                    tags: ['Â∑≤ÊîØ‰ªòÂÆöÈáë', 'ÂæÖÁ≠æÁ∫¶'],
                    budget: 'L7 Max 34.98‰∏á',
                    interest: 'Â∑≤ÂÆöÁôΩËâ≤Â§ñËßÇ',
                    lastContact: '‰ªäÂ§©15:00Âà∞Â∫ó',
                    aiSuggestion: 'ÂÆ¢Êà∑Â∑≤ÊîØ‰ªòÂÆöÈáëÔºå‰ªäÊó•Âà∞Â∫óÁ≠æÂêàÂêå„ÄÇÂáÜÂ§áÔºöÂêàÂêå„ÄÅÈáëËûçÊñπÊ°à„ÄÅ‰∫§‰ªòÊó∂Èó¥Ë°®'
                },
                {
                    id: 'c7',
                    name: 'Âê¥ÊÄª',
                    phone: '139****7890',
                    priority: 'high',
                    tags: ['ËØ¢‰ª∑‰∏≠', 'Ë∞à‰ºòÊÉ†', 'Êú¨Âë®ÂÜ≥Á≠ñ'],
                    budget: 'L9 Max 45.98‰∏á',
                    interest: 'ÁΩÆÊç¢Ë°•Ë¥¥Âí®ËØ¢',
                    lastContact: '‰ªäÂ§©‰∏äÂçàÁîµËØù',
                    aiSuggestion: 'ÂÆ¢Êà∑ÊúâÊóßËΩ¶ÁΩÆÊç¢ÔºåËÆ°ÁÆóÊúÄ‰ºò‰ºòÊÉ†ÁªÑÂêàÔºöÂÆòÊñπ‰ºòÊÉ†1‰∏á+ÁΩÆÊç¢8ÂçÉ+Á≤æÂìÅÁ§ºÂåÖ'
                }
            ]
        };

        // ==================== ÂàùÂßãÂåñ ====================
        window.onload = function() {
            renderCustomers();
            startCRMSync();
            generateHeatmap();
        };

        // ==================== 1Ô∏è‚É£ ÊãñÊãΩÂäüËÉΩ ====================
        function renderCustomers() {
            ['a1', 'i2', 'a3'].forEach(stage => {
                const list = document.getElementById(`list-${stage}`);
                list.innerHTML = '';

                customers[stage].forEach(customer => {
                    const card = createCustomerCard(customer, stage);
                    list.appendChild(card);
                });
            });
        }

        function createCustomerCard(customer, stage) {
            const card = document.createElement('div');
            card.className = 'customer-card';
            card.draggable = true;
            card.dataset.customerId = customer.id;
            card.dataset.stage = stage;

            // ÊãñÊãΩ‰∫ã‰ª∂
            card.ondragstart = function(e) {
                e.dataTransfer.setData('customerId', customer.id);
                e.dataTransfer.setData('fromStage', stage);
                card.classList.add('dragging');
            };

            card.ondragend = function() {
                card.classList.remove('dragging');
            };

            const priorityClass = `priority-${customer.priority}`;
            const priorityText = customer.priority === 'high' ? 'È´ò‰ºòÂÖà' :
                                customer.priority === 'medium' ? '‰∏≠‰ºòÂÖà' : '‰Ωé‰ºòÂÖà';

            // Ê†πÊçÆÈò∂ÊÆµÁîüÊàê‰∏çÂêåÁöÑÊåâÈíÆÁªÑ
            let actionButtons = '';
            if (stage === 'a1') {
                // A1Èò∂ÊÆµÔºöÂàõÂª∫Ë∑üËøõ, ÂæÆ‰ø°(icon), ‰ºÅ‰∏öÂæÆ‰ø°(icon), ÁîµËØùÊ≤üÈÄö(icon)
                actionButtons = `
                    <button class="action-btn btn-primary" onclick="event.stopPropagation(); createFollowUp('${customer.name}')">ÂàõÂª∫Ë∑üËøõ</button>
                    <button class="action-btn btn-icon" onclick="event.stopPropagation(); sendWeChat('${customer.name}')" title="ÂæÆ‰ø°">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiMwOEMxNjAiLz4KPHBhdGggZD0iTTE3IDIwQzE3IDE4LjM0MzEgMTguMzQzMSAxNyAyMCAxN0gyOEMyOS42NTY5IDE3IDMxIDE4LjM0MzEgMzEgMjBWMjhDMzEgMjkuNjU2OSAyOS42NTY5IDMxIDI4IDMxSDIwQzE4LjM0MzEgMzEgMTcgMjkuNjU2OSAxNyAyOFYyMFoiIGZpbGw9IndoaXRlIi8+CjxjaXJjbGUgY3g9IjIxIiBjeT0iMjIiIHI9IjEuNSIgZmlsbD0iIzA4QzE2MCIvPgo8Y2lyY2xlIGN4PSIyNyIgY3k9IjIyIiByPSIxLjUiIGZpbGw9IiMwOEMxNjAiLz4KPHBhdGggZD0iTTIyIDI2QzIyLjUgMjcgMjMuNSAyNyAyNCAyN0MyNC41IDI3IDI1LjUgMjcgMjYgMjZDMjYgMjYgMjYgMjguNSAyNCAyOC41QzIyIDI4LjUgMjIgMjYgMjIgMjZaIiBmaWxsPSIjMDhDMTYwIi8+Cjwvc3ZnPg==" alt="ÂæÆ‰ø°">
                    </button>
                    <button class="action-btn btn-icon" onclick="event.stopPropagation(); sendEnterpriseWeChat('${customer.name}')" title="‰ºÅ‰∏öÂæÆ‰ø°">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiMwMDhBRkYiLz4KPHBhdGggZD0iTTE2IDIwQzE2IDE4LjM0MzEgMTcuMzQzMSAxNyAxOSAxN0gyOUMzMC42NTY5IDE3IDMyIDE4LjM0MzEgMzIgMjBWMjhDMzIgMjkuNjU2OSAzMC42NTY5IDMxIDI5IDMxSDE5QzE3LjM0MzEgMzEgMTYgMjkuNjU2OSAxNiAyOFYyMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMCAyMUMyMCAyMC40NDc3IDIwLjQ0NzcgMjAgMjEgMjBIMjdDMjcuNTUyMyAyMCAyOCAyMC40NDc3IDI4IDIxQzI4IDIxLjU1MjMgMjcuNTUyMyAyMiAyNyAyMkgyMUMyMC40NDc3IDIyIDIwIDIxLjU1MjMgMjAgMjFaIiBmaWxsPSIjRkZCNjI4Ii8+CjxwYXRoIGQ9Ik0yMCAyNUMyMCAyNC40NDc3IDIwLjQ0NzcgMjQgMjEgMjRIMjdDMjcuNTUyMyAyNCAyOCAyNC40NDc3IDI4IDI1QzI4IDI1LjU1MjMgMjcuNTUyMyAyNiAyNyAyNkgyMUMyMC40NDc3IDI2IDIwIDI1LjU1MjMgMjAgMjVaIiBmaWxsPSIjRkY3MjFGIi8+CjxjaXJjbGUgY3g9IjI0IiBjeT0iMTQiIHI9IjMiIGZpbGw9IiMwMDhBRkYiLz4KPC9zdmc+Cg==" alt="‰ºÅ‰∏öÂæÆ‰ø°">
                    </button>
                    <button class="action-btn btn-icon" onclick="event.stopPropagation(); makeCall('${customer.name}')" title="ÁîµËØùÊ≤üÈÄö">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiMxMkFGNTAiLz4KPHBhdGggZD0iTTMwLjUgMjguNUMzMC41IDI4LjUgMzIgMjkuNSAzMiAzMC41QzMyIDMxLjUgMjcuNSAzNC41IDI0IDM0LjVDMTcuNSAzNC41IDE0IDE1LjUgMTQgMTUuNUMxNCA5IDIxIDkgMjEgOUMyMS41IDkgMjIuNSA5LjUgMjMgMTBMMjUgMTQuNUMyNS41IDE1LjUgMjUgMTYuNSAyNCAxN0MyMyAxNy41IDIzIDE5IDI0IDE5LjVDMjUgMjAgMjggMjMgMjkgMjRDMzAgMjUgMzEuNSAyNSAzMiAyNEMzMi41IDIzIDMzLjUgMjIuNSAzNC41IDIzTDM2LjUgMjVDMzcgMjUuNSAzNy41IDI2LjUgMzcuNSAyN0MzNy41IDI3LjUgMzAuNSAyOC41IDMwLjUgMjguNVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=" alt="ÁîµËØù">
                    </button>
                `;
            } else if (stage === 'i2') {
                // I2Èò∂ÊÆµÔºöÂàõÂª∫ËØïÈ©æ, ÂàõÂª∫Ë∑üËøõ, ÂæÆ‰ø°(icon), ‰ºÅ‰∏öÂæÆ‰ø°(icon), ÁîµËØù(icon)
                actionButtons = `
                    <button class="action-btn btn-primary" onclick="event.stopPropagation(); createTestDrive('${customer.name}')">ÂàõÂª∫ËØïÈ©æ</button>
                    <button class="action-btn btn-secondary" onclick="event.stopPropagation(); createFollowUp('${customer.name}')">ÂàõÂª∫Ë∑üËøõ</button>
                    <button class="action-btn btn-icon" onclick="event.stopPropagation(); sendWeChat('${customer.name}')" title="ÂæÆ‰ø°">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiMwOEMxNjAiLz4KPHBhdGggZD0iTTE3IDIwQzE3IDE4LjM0MzEgMTguMzQzMSAxNyAyMCAxN0gyOEMyOS42NTY5IDE3IDMxIDE4LjM0MzEgMzEgMjBWMjhDMzEgMjkuNjU2OSAyOS42NTY5IDMxIDI4IDMxSDIwQzE4LjM0MzEgMzEgMTcgMjkuNjU2OSAxNyAyOFYyMFoiIGZpbGw9IndoaXRlIi8+CjxjaXJjbGUgY3g9IjIxIiBjeT0iMjIiIHI9IjEuNSIgZmlsbD0iIzA4QzE2MCIvPgo8Y2lyY2xlIGN4PSIyNyIgY3k9IjIyIiByPSIxLjUiIGZpbGw9IiMwOEMxNjAiLz4KPHBhdGggZD0iTTIyIDI2QzIyLjUgMjcgMjMuNSAyNyAyNCAyN0MyNC41IDI3IDI1LjUgMjcgMjYgMjZDMjYgMjYgMjYgMjguNSAyNCAyOC41QzIyIDI4LjUgMjIgMjYgMjIgMjZaIiBmaWxsPSIjMDhDMTYwIi8+Cjwvc3ZnPg==" alt="ÂæÆ‰ø°">
                    </button>
                    <button class="action-btn btn-icon" onclick="event.stopPropagation(); sendEnterpriseWeChat('${customer.name}')" title="‰ºÅ‰∏öÂæÆ‰ø°">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiMwMDhBRkYiLz4KPHBhdGggZD0iTTE2IDIwQzE2IDE4LjM0MzEgMTcuMzQzMSAxNyAxOSAxN0gyOUMzMC42NTY5IDE3IDMyIDE4LjM0MzEgMzIgMjBWMjhDMzIgMjkuNjU2OSAzMC42NTY5IDMxIDI5IDMxSDE5QzE3LjM0MzEgMzEgMTYgMjkuNjU2OSAxNiAyOFYyMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMCAyMUMyMCAyMC40NDc3IDIwLjQ0NzcgMjAgMjEgMjBIMjdDMjcuNTUyMyAyMCAyOCAyMC40NDc3IDI4IDIxQzI4IDIxLjU1MjMgMjcuNTUyMyAyMiAyNyAyMkgyMUMyMC40NDc3IDIyIDIwIDIxLjU1MjMgMjAgMjFaIiBmaWxsPSIjRkZCNjI4Ii8+CjxwYXRoIGQ9Ik0yMCAyNUMyMCAyNC40NDc3IDIwLjQ0NzcgMjQgMjEgMjRIMjdDMjcuNTUyMyAyNCAyOCAyNC40NDc3IDI4IDI1QzI4IDI1LjU1MjMgMjcuNTUyMyAyNiAyNyAyNkgyMUMyMC40NDc3IDI2IDIwIDI1LjU1MjMgMjAgMjVaIiBmaWxsPSIjRkY3MjFGIi8+CjxjaXJjbGUgY3g9IjI0IiBjeT0iMTQiIHI9IjMiIGZpbGw9IiMwMDhBRkYiLz4KPC9zdmc+Cg==" alt="‰ºÅ‰∏öÂæÆ‰ø°">
                    </button>
                    <button class="action-btn btn-icon" onclick="event.stopPropagation(); makeCall('${customer.name}')" title="ÁîµËØù">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiMxMkFGNTAiLz4KPHBhdGggZD0iTTMwLjUgMjguNUMzMC41IDI4LjUgMzIgMjkuNSAzMiAzMC41QzMyIDMxLjUgMjcuNSAzNC41IDI0IDM0LjVDMTcuNSAzNC41IDE0IDE1LjUgMTQgMTUuNUMxNCA5IDIxIDkgMjEgOUMyMS41IDkgMjIuNSA5LjUgMjMgMTBMMjUgMTQuNUMyNS41IDE1LjUgMjUgMTYuNSAyNCAxN0MyMyAxNy41IDIzIDE5IDI0IDE5LjVDMjUgMjAgMjggMjMgMjkgMjRDMzAgMjUgMzEuNSAyNSAzMiAyNEMzMi41IDIzIDMzLjUgMjIuNSAzNC41IDIzTDM2LjUgMjVDMzcgMjUuNSAzNy41IDI2LjUgMzcuNSAyN0MzNy41IDI3LjUgMzAuNSAyOC41IDMwLjUgMjguNVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=" alt="ÁîµËØù">
                    </button>
                `;
            } else if (stage === 'a3') {
                // A3Èò∂ÊÆµÔºöÂàõÂª∫Êä•‰ª∑Âçï, Ë∑üËøõËÆ∞ÂΩï, ÂæÆ‰ø°(icon), ‰ºÅ‰∏öÂæÆ‰ø°(icon), ÁîµËØù(icon)
                actionButtons = `
                    <button class="action-btn btn-primary" onclick="event.stopPropagation(); createQuotation('${customer.name}')">ÂàõÂª∫Êä•‰ª∑Âçï</button>
                    <button class="action-btn btn-secondary" onclick="event.stopPropagation(); viewFollowUpHistory('${customer.name}')">Ë∑üËøõËÆ∞ÂΩï</button>
                    <button class="action-btn btn-icon" onclick="event.stopPropagation(); sendWeChat('${customer.name}')" title="ÂæÆ‰ø°">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiMwOEMxNjAiLz4KPHBhdGggZD0iTTE3IDIwQzE3IDE4LjM0MzEgMTguMzQzMSAxNyAyMCAxN0gyOEMyOS42NTY5IDE3IDMxIDE4LjM0MzEgMzEgMjBWMjhDMzEgMjkuNjU2OSAyOS42NTY5IDMxIDI4IDMxSDIwQzE4LjM0MzEgMzEgMTcgMjkuNjU2OSAxNyAyOFYyMFoiIGZpbGw9IndoaXRlIi8+CjxjaXJjbGUgY3g9IjIxIiBjeT0iMjIiIHI9IjEuNSIgZmlsbD0iIzA4QzE2MCIvPgo8Y2lyY2xlIGN4PSIyNyIgY3k9IjIyIiByPSIxLjUiIGZpbGw9IiMwOEMxNjAiLz4KPHBhdGggZD0iTTIyIDI2QzIyLjUgMjcgMjMuNSAyNyAyNCAyN0MyNC41IDI3IDI1LjUgMjcgMjYgMjZDMjYgMjYgMjYgMjguNSAyNCAyOC41QzIyIDI4LjUgMjIgMjYgMjIgMjZaIiBmaWxsPSIjMDhDMTYwIi8+Cjwvc3ZnPg==" alt="ÂæÆ‰ø°">
                    </button>
                    <button class="action-btn btn-icon" onclick="event.stopPropagation(); sendEnterpriseWeChat('${customer.name}')" title="‰ºÅ‰∏öÂæÆ‰ø°">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiMwMDhBRkYiLz4KPHBhdGggZD0iTTE2IDIwQzE2IDE4LjM0MzEgMTcuMzQzMSAxNyAxOSAxN0gyOUMzMC42NTY5IDE3IDMyIDE4LjM0MzEgMzIgMjBWMjhDMzIgMjkuNjU2OSAzMC42NTY5IDMxIDI5IDMxSDE5QzE3LjM0MzEgMzEgMTYgMjkuNjU2OSAxNiAyOFYyMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMCAyMUMyMCAyMC40NDc3IDIwLjQ0NzcgMjAgMjEgMjBIMjdDMjcuNTUyMyAyMCAyOCAyMC40NDc3IDI4IDIxQzI4IDIxLjU1MjMgMjcuNTUyMyAyMiAyNyAyMkgyMUMyMC40NDc3IDIyIDIwIDIxLjU1MjMgMjAgMjFaIiBmaWxsPSIjRkZCNjI4Ii8+CjxwYXRoIGQ9Ik0yMCAyNUMyMCAyNC40NDc3IDIwLjQ0NzcgMjQgMjEgMjRIMjdDMjcuNTUyMyAyNCAyOCAyNC40NDc3IDI4IDI1QzI4IDI1LjU1MjMgMjcuNTUyMyAyNiAyNyAyNkgyMUMyMC40NDc3IDI2IDIwIDI1LjU1MjMgMjAgMjVaIiBmaWxsPSIjRkY3MjFGIi8+CjxjaXJjbGUgY3g9IjI0IiBjeT0iMTQiIHI9IjMiIGZpbGw9IiMwMDhBRkYiLz4KPC9zdmc+Cg==" alt="‰ºÅ‰∏öÂæÆ‰ø°">
                    </button>
                    <button class="action-btn btn-icon" onclick="event.stopPropagation(); makeCall('${customer.name}')" title="ÁîµËØù">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjQiIGZpbGw9IiMxMkFGNTAiLz4KPHBhdGggZD0iTTMwLjUgMjguNUMzMC41IDI4LjUgMzIgMjkuNSAzMiAzMC41QzMyIDMxLjUgMjcuNSAzNC41IDI0IDM0LjVDMTcuNSAzNC41IDE0IDE1LjUgMTQgMTUuNUMxNCA5IDIxIDkgMjEgOUMyMS41IDkgMjIuNSA5LjUgMjMgMTBMMjUgMTQuNUMyNS41IDE1LjUgMjUgMTYuNSAyNCAxN0MyMyAxNy41IDIzIDE5IDI0IDE5LjVDMjUgMjAgMjggMjMgMjkgMjRDMzAgMjUgMzEuNSAyNSAzMiAyNEMzMi41IDIzIDMzLjUgMjIuNSAzNC41IDIzTDM2LjUgMjVDMzcgMjUuNSAzNy41IDI2LjUgMzcuNSAyN0MzNy41IDI3LjUgMzAuNSAyOC41IDMwLjUgMjguNVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=" alt="ÁîµËØù">
                    </button>
                `;
            }

            card.innerHTML = `
                <div class="card-header">
                    <div class="customer-name">
                        ${customer.name}
                        <span class="priority-badge ${priorityClass}">${priorityText}</span>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <div class="workflow-icon-btn" onclick="event.stopPropagation(); openWorkflow()" title="ËÆ¢ÂçïÊµÅÁ®ãÁÆ°ÁêÜ">
                            ‚öôÔ∏è
                        </div>
                        <div class="heatmap-icon-btn" onclick="event.stopPropagation(); openHeatmap('${customer.name}')" title="Êü•ÁúãÂÆ¢Êà∑Ë°å‰∏∫ÁÉ≠ÂäõÂõæ">
                            üìà
                        </div>
                    </div>
                </div>
                <div class="customer-tags">
                    ${customer.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                </div>
                <div class="card-info">üì± ${customer.phone} | üïê ${customer.lastContact}</div>
                <div class="card-info">üí∞ ${customer.budget} | üöó ${customer.interest}</div>
                <div class="ai-suggestion">${customer.aiSuggestion}</div>
                <div class="card-actions">
                    ${actionButtons}
                </div>
            `;

            card.onclick = function() {
                // ÁÇπÂáªÂç°ÁâáÁ©∫ÁôΩÂå∫Âüü‰∏çÂÅö‰ªª‰ΩïÊìç‰ΩúÔºåÈÅøÂÖçËØØËß¶Âèë
            };

            return card;
        }

        function allowDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }

        function dragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function drop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');

            const customerId = e.dataTransfer.getData('customerId');
            const fromStage = e.dataTransfer.getData('fromStage');
            const toStage = e.currentTarget.dataset.stage;

            if (fromStage !== toStage) {
                moveCustomer(customerId, fromStage, toStage);
                showNotification(`ÂÆ¢Êà∑Â∑≤ÁßªËá≥${getStageText(toStage)}Èò∂ÊÆµ`);

                // üÜï Ê®°ÊãüCRMÂêåÊ≠•
                syncToCRM(customerId, toStage);
            }
        }

        function moveCustomer(customerId, fromStage, toStage) {
            const customerIndex = customers[fromStage].findIndex(c => c.id === customerId);
            if (customerIndex !== -1) {
                const customer = customers[fromStage].splice(customerIndex, 1)[0];
                customers[toStage].push(customer);
                renderCustomers();
                updateCounts();
            }
        }

        function getStageText(stage) {
            const stageMap = {
                'a1': 'A1 ËÆ§Áü•ÂÖ¥Ë∂£',
                'i2': 'I2 Ê∑±Â∫¶‰∫íÂä®',
                'a3': 'A3 Ë¥≠‰π∞ÂÜ≥Á≠ñ'
            };
            return stageMap[stage];
        }

        function updateCounts() {
            document.getElementById('count-a1').textContent = customers.a1.length + '‰∫∫';
            document.getElementById('count-i2').textContent = customers.i2.length + '‰∫∫';
            document.getElementById('count-a3').textContent = customers.a3.length + '‰∫∫';
        }

        // ==================== 2Ô∏è‚É£ ËØ≠Èü≥ËæìÂÖ•ÂäüËÉΩ ====================
        let recognition = null;
        let voiceTranscript = '';

        function startVoiceInput() {
            const modal = document.getElementById('voiceModal');
            modal.classList.add('active');

            // Ê£ÄÊü•ÊµèËßàÂô®ÊîØÊåÅ
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.lang = 'zh-CN';
                recognition.continuous = true;
                recognition.interimResults = true;

                recognition.onresult = function(event) {
                    let interimTranscript = '';
                    let finalTranscript = '';

                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        const transcript = event.results[i][0].transcript;
                        if (event.results[i].isFinal) {
                            finalTranscript += transcript;
                        } else {
                            interimTranscript += transcript;
                        }
                    }

                    voiceTranscript = finalTranscript || interimTranscript;
                    document.getElementById('voiceTranscript').textContent = voiceTranscript || 'ËØ∑ÂºÄÂßãËØ¥ËØù';
                };

                recognition.onerror = function(event) {
                    console.error('ËØ≠Èü≥ËØÜÂà´ÈîôËØØ:', event.error);
                    document.getElementById('voiceTranscript').textContent = 'ËØÜÂà´Âá∫ÈîôÔºåËØ∑ÈáçËØï';
                };

                recognition.start();
            } else {
                // Ê®°ÊãüËØ≠Èü≥ËØÜÂà´ÔºàÊºîÁ§∫Áî®Ôºâ
                simulateVoiceInput();
            }
        }

        function simulateVoiceInput() {
            const examples = [
                'ÂÆ¢Êà∑Âº†ÂÖàÁîü‰ªäÂ§©Âà∞Â∫óÂí®ËØ¢ÁêÜÊÉ≥L7ÔºåÈ¢ÑÁÆó30‰∏áÂ∑¶Âè≥ÔºåÂÖ≥Ê≥®Êô∫ËÉΩÈ©æÈ©∂ÂäüËÉΩ',
                'ÈôàÂÖàÁîüÂØπ‰ª∑Ê†ºÊúâÈ°æËôëÔºåÈúÄË¶ÅÊé®ÈÄÅÈáëËûçÊñπÊ°à',
                'Âë®Â•≥Â£´Â∑≤ÊîØ‰ªòÂÆöÈáëÔºå‰ªäÂ§©‰∏ãÂçà‰∏âÁÇπÂà∞Â∫óÁ≠æÂêàÂêå'
            ];
            const randomExample = examples[Math.floor(Math.random() * examples.length)];

            let currentText = '';
            let index = 0;
            const interval = setInterval(() => {
                if (index < randomExample.length) {
                    currentText += randomExample[index];
                    document.getElementById('voiceTranscript').textContent = currentText;
                    index++;
                } else {
                    clearInterval(interval);
                    voiceTranscript = currentText;
                }
            }, 100);
        }

        function cancelVoiceInput() {
            if (recognition) {
                recognition.stop();
            }
            document.getElementById('voiceModal').classList.remove('active');
            voiceTranscript = '';
        }

        function confirmVoiceInput() {
            if (voiceTranscript) {
                // üÜï AIËß£ÊûêËØ≠Èü≥ÂÜÖÂÆπÂπ∂Ëá™Âä®ÂΩïÂÖ•
                parseVoiceInput(voiceTranscript);
                showNotification('‚úÖ ÂÆ¢Êà∑‰ø°ÊÅØÂ∑≤Ëá™Âä®ÂΩïÂÖ•CRM');
            }
            cancelVoiceInput();
        }

        function parseVoiceInput(text) {
            // AIËß£ÊûêËØ≠Èü≥ÂÜÖÂÆπÔºàÊ®°ÊãüÔºâ
            console.log('AIËß£Êûê:', text);
            // ËøôÈáåÂèØ‰ª•Ë∞ÉÁî®AIÊé•Âè£Ëß£ÊûêÂÆ¢Êà∑‰ø°ÊÅØ
            // Âπ∂Ëá™Âä®ÂàõÂª∫ÂÆ¢Êà∑Âç°Áâá
        }

        // ==================== 3Ô∏è‚É£ ÂÆûÊó∂CRMÂêåÊ≠• ====================
        function startCRMSync() {
            // Ê®°ÊãüWebSocketËøûÊé•
            setInterval(() => {
                // ÈöèÊú∫Êõ¥Êñ∞Êï∞ÊçÆ
                if (Math.random() > 0.95) {
                    simulateCRMUpdate();
                }
            }, 3000);
        }

        function simulateCRMUpdate() {
            const updates = [
                'Êñ∞ÂÆ¢Êà∑Á∫øÁ¥¢Â∑≤ÂêåÊ≠•',
                'ÂÆ¢Êà∑Áä∂ÊÄÅÂ∑≤Êõ¥Êñ∞',
                'ËØïÈ©æÈ¢ÑÁ∫¶Â∑≤Á°ÆËÆ§'
            ];
            const randomUpdate = updates[Math.floor(Math.random() * updates.length)];
            showNotification(randomUpdate);
        }

        function syncToCRM(customerId, newStage) {
            // Ê®°ÊãüÂêåÊ≠•Âà∞CRM
            console.log(`ÂêåÊ≠•ÂÆ¢Êà∑ ${customerId} Âà∞CRMÔºåÊñ∞Èò∂ÊÆµ: ${newStage}`);

            // Êõ¥Êñ∞ÂêåÊ≠•Áä∂ÊÄÅ
            const syncStatus = document.querySelector('.sync-status span');
            syncStatus.textContent = 'Ê≠£Âú®ÂêåÊ≠•...';

            setTimeout(() => {
                syncStatus.textContent = 'CRMÂ∑≤ÂêåÊ≠•';
            }, 1000);
        }

        // ==================== 4Ô∏è‚É£ ÂÆ¢Êà∑Ë°å‰∏∫ÁÉ≠ÂäõÂõæ ====================
        function generateHeatmap() {
            const grid = document.getElementById('heatmapGrid');
            grid.innerHTML = '';

            // ÁîüÊàê30Â§©ÁöÑÁÉ≠ÂäõÂõæ
            for (let i = 29; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const day = date.getDate();
                const month = date.getMonth() + 1;

                // ÈöèÊú∫Ê¥ªË∑ÉÂ∫¶
                const level = Math.floor(Math.random() * 5);
                const count = level * Math.floor(Math.random() * 5);

                const cell = document.createElement('div');
                cell.className = `heatmap-cell level-${level}`;
                cell.innerHTML = `
                    <div class="cell-day">${month}/${day}</div>
                    <div class="cell-count">${count}Ê¨°</div>
                `;

                cell.onclick = function() {
                    showNotification(`${month}/${day} Ê¥ªË∑É${count}Ê¨°`);
                };

                grid.appendChild(cell);
            }
        }

        function openHeatmap(customerName) {
            const modal = document.getElementById('heatmapModal');
            modal.classList.add('active');

            if (customerName) {
                modal.querySelector('.heatmap-title').textContent = `üìà ÂÆ¢Êà∑Ë°å‰∏∫ÁÉ≠ÂäõÂõæ - ${customerName}`;
            }
        }

        function closeHeatmap() {
            document.getElementById('heatmapModal').classList.remove('active');
        }

        // ==================== 5Ô∏è‚É£ AIÂØπËØùÂä©Êâã ====================
        function toggleAIChat() {
            const panel = document.getElementById('aiChatPanel');
            panel.classList.toggle('open');
        }

        function openAIForLeads() {
            const panel = document.getElementById('aiChatPanel');
            if (!panel.classList.contains('open')) {
                panel.classList.add('open');
            }

            const leadsAnalysis = `Ê†πÊçÆÊÇ®ÂΩìÂâçË¶ÅÂÆåÊàêÁöÑËÆ¢ÂçïÁõÆÊ†áÂíåÁ∫øÁ¥¢ÁõÆÊ†áÊÉÖÂÜµÔºåÂª∫ËÆÆÊÇ®ÁßØÊûÅÊâßË°åËé∑ÂÆ¢‰∏æÊé™„ÄÇ

üìä ‰∏öÂä°ËØäÊñ≠ÁõÆÊ†áÊãÜËß£ÂèäÂ∑•‰Ωú‰ªªÂä°Êï∞ÊçÆÁõòÁÇπÔºö

| ÊåáÊ†á | ÂΩìÂâçÂÆåÊàê | ÁõÆÊ†á | ÂÆåÊàêÁéá | Â∑ÆË∑ù | Âª∫ËÆÆ |
|------|---------|------|--------|------|------|
| Á¥ØËÆ°Á∫øÁ¥¢ | 890 | 1200 | 74% | -310 | Âä†Â§ßÁ∫ø‰∏äÊé®ÂπøÂäõÂ∫¶ |
| Á¥ØËÆ°Êé•ÂæÖ | 156 | 200 | 78% | -44 | ÊèêÈ´òÈÇÄÁ∫¶ËΩ¨ÂåñÁéá |
| Á¥ØËÆ°ËØïÈ©æ | 68 | - | - | - | Ë∑üËøõÂæÖÂÆâÊéíÂÆ¢Êà∑ |
| Á¥ØËÆ°Á≠æÁ∫¶ | 42 | 40 | 105% | +2| Áª¥ÊåÅÂΩìÂâçÊ∞¥Âπ≥ |

üéØ AIËé∑ÂÆ¢ÊñπÊ°àÁîüÊàêÔºö

‰∏Ä„ÄÅÁ∫øÁ¥¢Èáá‰π∞ÊñπÊ°àÔºà280Êù°ÔºâÔºö
1. Ê±Ω‰πãÂÆ∂Á∫øÁ¥¢Èáá‰π∞Ôºö150Êù°
   - Âª∫ËÆÆÊäïÊîæÈ¢ÑÁÆóÔºö¬•15,000
   - ÁõÆÊ†áÂå∫ÂüüÔºöÊú¨ÂüéÂ∏ÇÂèäÂë®Ëæπ30ÂÖ¨Èáå
   - ÂÆöÂêë‰∫∫Áæ§Ôºö25-45Â≤ÅÔºåÂÖ≥Ê≥®Êñ∞ËÉΩÊ∫êÊ±ΩËΩ¶Áî®Êà∑

2. ÊòìËΩ¶ÁΩëÁ∫øÁ¥¢Èáá‰π∞Ôºö80Êù°
   - Âª∫ËÆÆÊäïÊîæÈ¢ÑÁÆóÔºö¬•8,000
   - ÈáçÁÇπËΩ¶ÂûãÔºöÁêÜÊÉ≥L7/L8ÊÑèÂêëÁî®Êà∑

3. ÊäñÈü≥Ê±ΩËΩ¶Á∫øÁ¥¢Èáá‰π∞Ôºö50Êù°
   - Âª∫ËÆÆÊäïÊîæÈ¢ÑÁÆóÔºö¬•5,000
   - Áü≠ËßÜÈ¢ëÂºïÊµÅÔºåÁªìÂêàÁõ¥Êí≠Ëé∑ÂèñÁ∫øÁ¥¢

‰∫å„ÄÅÂÖ¨ÁßÅÂüüËé∑ÂÆ¢ÊñπÊ°àÔºà310Êù°ÔºâÔºö
1. ÂÖ¨ÂüüËé∑ÂÆ¢Ôºà210Êù°ÔºâÔºö
   a. ÂæÆ‰ø°ÂπøÂëäÊäïÊîæÔºö80Êù°
      - ÊúãÂèãÂúàÂπøÂëäÔºö¬•6,000
      - ÂÖ¨‰ºóÂè∑Êé®ÂπøÔºö¬•4,000

   b. Â∞èÁ∫¢‰π¶ÂÜÖÂÆπËê•ÈîÄÔºö60Êù°
      - ËØÑÊµãÊñáÁ´†Ôºö10ÁØá
      - ‰ΩøÁî®‰ΩìÈ™åÂàÜ‰∫´Ôºö20ÁØá
      - ËΩ¶‰∏ªÊïÖ‰∫ãÔºö30ÁØá

   c. ÂæÆ‰ø°ËßÜÈ¢ëÂè∑/Âø´ÊâãÔºö70Êù°
      - Â∫óÈïøÁõ¥Êí≠ÔºöÊØèÂë®3Âú∫
      - ‰∫ßÂìÅËÆ≤Ëß£Áü≠ËßÜÈ¢ëÔºöÊØèÂ§©1Êù°

2. ÁßÅÂüüËé∑ÂÆ¢Ôºà100Êù°ÔºâÔºö
   a. ËÄÅÂÆ¢Êà∑ËΩ¨‰ªãÁªçÔºö60Êù°
      - Êé®ËçêÂ•ñÂä±ÔºöÊØèÊàêÂäüÊé®Ëçê1Êù°Á∫øÁ¥¢Â•ñÂä±¬•200
      - ËΩ¨‰ªãÁªçÊ¥ªÂä®Á≠ñÂàíÔºöËÄÅÂ∏¶Êñ∞‰ºòÊÉ†ÊîøÁ≠ñ

   b. ÊúãÂèãÂúàË£ÇÂèòÔºö40Êù°
      - Ë£ÇÂèòÊµ∑Êä•ËÆæËÆ°
      - ÈôêÊó∂‰ºòÊÉ†Ê¥ªÂä®
      - ÈÇÄËØ∑Â•ΩÂèãËØïÈ©æ

üí° ÊâßË°åÂª∫ËÆÆÔºö
1. Á´ãÂç≥Ë°åÂä®Ôºö‰ºòÂÖàÊâßË°åÁ∫øÁ¥¢Èáá‰π∞Âø´ÈÄüËé∑ÂÆ¢
2. ÊåÅÁª≠ÊäïÂÖ•ÔºöÂÖ¨ÁßÅÂüüËé∑ÂÆ¢ÈúÄË¶ÅÈïøÊúüËøêËê•
3. Êï∞ÊçÆÁõëÊéßÔºöÊØèÊó•ÁõëÊéßÂêÑÊ∏†ÈÅìÁ∫øÁ¥¢Ë¥®Èáè
4. Âõ¢ÈòüÂçè‰ΩúÔºöÊòéÁ°ÆÂêÑÊ∏†ÈÅìË¥üË¥£‰∫∫ÔºåÂÆöÊúüÂ§çÁõò`;

            setTimeout(() => {
                addChatMessage('ai', leadsAnalysis);
            }, 500);
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();

            if (message) {
                addChatMessage('user', message);
                input.value = '';

                // AIÂõûÂ§çÔºàÊ®°ÊãüÔºâ
                setTimeout(() => {
                    const aiResponse = generateAIResponse(message);
                    addChatMessage('ai', aiResponse);
                }, 1000);
            }
        }

        function handleChatKeyPress(e) {
            if (e.key === 'Enter') {
                sendChatMessage();
            }
        }

        function addChatMessage(type, content) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;

            const avatar = type === 'ai' ? 'ü§ñ' : 'Êùé';

            messageDiv.innerHTML = `
                <div class="message-avatar">${avatar}</div>
                <div class="message-content">${content}</div>
            `;

            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            // AIÂõûÂ§çÈÄªËæëÔºàÊ®°ÊãüÔºâ
            const responses = {
                'ËØùÊúØ': 'ÈíàÂØπ‰ª∑Ê†ºÊïèÊÑüÂÆ¢Êà∑ÁöÑËØùÊúØÂª∫ËÆÆÔºö\n\n"Âº†ÂÖàÁîüÔºåÊàëÁêÜËß£ÊÇ®ÂØπ‰ª∑Ê†ºÁöÑÂÖ≥Ê≥®„ÄÇÁêÜÊÉ≥L7ËôΩÁÑ∂ÁúãËµ∑Êù•‰ª∑Ê†ºÁ®çÈ´òÔºå‰ΩÜÂ¶ÇÊûúÊàë‰ª¨ÁÆó‰∏Ä‰∏ãÁªºÂêà‰ΩøÁî®ÊàêÊú¨ÔºåÊÇ®‰ºöÂèëÁé∞ÂÖ∂ÂÆûÂæàÂàíÁÆóÔºö\n\n1. Â¢ûÁ®ãÂºèÂä®ÂäõÊØèÂÖ¨ÈáåÊàêÊú¨‰ªÖ0.3ÂÖÉ\n2. ‰øùÂÖªÊàêÊú¨ÊØî‰º†ÁªüÁáÉÊ≤πËΩ¶‰Ωé60%\n3. Êô∫È©æÈÖçÁΩÆÁõ∏ÂΩì‰∫éÁâπÊñØÊãâFSDÔºàÂîÆ‰ª∑6.4‰∏áÔºâ\n\nÊàë‰ª¨ËøòÊúâ36ÊúüÈõ∂ÊÅØÈáëËûçÊñπÊ°àÔºåÊúà‰æõ‰ªÖ6222ÂÖÉÔºåÁõ∏ÂΩì‰∫éÂ∞ëÊäΩ‰∏ÄÊù°ÁÉüÁöÑÈí±„ÄÇÊÇ®Áúã‰ªäÂ§©ÊúâÊó∂Èó¥ËØïÈ©æÂêóÔºü"',

                'ÂÆ¢Êà∑': 'Ê†πÊçÆÂº†ÂÖàÁîüÁöÑË°å‰∏∫ÂàÜÊûêÔºö\n\nüìä ÂÆ¢Êà∑ÁîªÂÉèÔºö\n- Âπ¥ÈæÑÔºö35-40Â≤Å\n- ËÅå‰∏öÔºö‰ºÅ‰∏ö‰∏≠Â±ÇÁÆ°ÁêÜ\n- ÂÆ∂Â∫≠ÔºöÂ∑≤Â©öÊúâÂ®É\n- ÁóõÁÇπÔºöÊô∫ËÉΩÈ©æÈ©∂„ÄÅÂÆ∂Â∫≠Âá∫Ë°å\n\nüéØ Êàê‰∫§Ê¶ÇÁéáÔºö75%\n\nüí° Âª∫ËÆÆÁ≠ñÁï•Ôºö\n1. Âº∫Ë∞ÉÊô∫È©æÂÆâÂÖ®ÊÄßÔºàÂÆ∂ÊúâÂ∞èÂ≠©Ôºâ\n2. Êé®ÈÄÅ36ÊúüÈõ∂ÊÅØÊñπÊ°à\n3. ÈÇÄÁ∫¶Âë®Êú´ÂÖ®ÂÆ∂ËØïÈ©æ\n4. Êú¨Âë®ÂÜÖ‰øÉÊàêÁ≠æÁ∫¶',

                'Á´ûÂìÅ': 'ÁêÜÊÉ≥L7 vs ÁâπÊñØÊãâModel Y ÂØπÊØîÔºö\n\n‚úÖ ÁêÜÊÉ≥‰ºòÂäøÔºö\n- Á©∫Èó¥Êõ¥Â§ßÔºà6Â∫ßÂ∏ÉÂ±ÄÔºâ\n- Áª≠Ëà™Êó†ÁÑ¶ËôëÔºàÂ¢ûÁ®ãÂºèÔºâ\n- Êô∫È©æÊõ¥ÈÄÇÂêà‰∏≠ÂõΩË∑ØÂÜµ\n- ‰ª∑Ê†ºÊõ¥ÂÖ∑ÊÄß‰ª∑ÊØî\n\n‚ùå Model YÂä£ÂäøÔºö\n- 5Â∫ßÁ©∫Èó¥Â±Ä‰øÉ\n- Á∫ØÁîµÁª≠Ëà™ÁÑ¶Ëôë\n- FSDÈúÄÈ¢ùÂ§ñ6.4‰∏á\n- ÂîÆÂêéÊúçÂä°‰∏ÄËà¨',

                'ÈáëËûç': '‰∏∫ÊÇ®ÁîüÊàê3Â•óÈáëËûçÊñπÊ°àÔºö\n\nüí∞ ÊñπÊ°à‰∏ÄÔºö‰ΩéÊúà‰æõ\n- È¶ñ‰ªò30%Ôºà9.6‰∏áÔºâ\n- 36ÊúüÈõ∂ÊÅØ\n- Êúà‰æõ6,222ÂÖÉ\n\nüí∞ ÊñπÊ°à‰∫åÔºöÂùáË°°\n- È¶ñ‰ªò40%Ôºà12.8‰∏áÔºâ\n- 24ÊúüÈõ∂ÊÅØ\n- Êúà‰æõ8,000ÂÖÉ\n\nüí∞ ÊñπÊ°à‰∏âÔºöÂø´ÈÄüËøòÊ∏Ö\n- È¶ñ‰ªò50%Ôºà16‰∏áÔºâ\n- 12ÊúüÈõ∂ÊÅØ\n- Êúà‰æõ13,333ÂÖÉ\n\nÂª∫ËÆÆÊ†πÊçÆÂÆ¢Êà∑Êî∂ÂÖ•Êé®ËçêÊñπÊ°à‰∫å'
            };

            for (let key in responses) {
                if (userMessage.includes(key)) {
                    return responses[key];
                }
            }

            return 'ÊÇ®Â•ΩÔºÅÊàëÊòØAIÈîÄÂîÆÂä©ÊâãÔºåÊàëÂèØ‰ª•Â∏ÆÊÇ®Ôºö\n\n1. ÁîüÊàêÈíàÂØπÊÄßÈîÄÂîÆËØùÊúØ\n2. ÂàÜÊûêÂÆ¢Êà∑ÁîªÂÉèÂíåÊÑèÂêë\n3. ÂØπÊØîÁ´ûÂìÅ‰ºòÂä£Âäø\n4. ËÆ°ÁÆóÈáëËûçÊñπÊ°à\n5. Êé®ËçêË∑üËøõÁ≠ñÁï•\n\nËØ∑ÂëäËØâÊàëÊÇ®ÈúÄË¶Å‰ªÄ‰πàÂ∏ÆÂä©Ôºü';
        }

        function aiQuickAction(action) {
            const input = document.getElementById('chatInput');
            input.value = action;
            sendChatMessage();
        }

        // üÜï AIÂ∑•ÂÖ∑ÊåâÈíÆÂäüËÉΩ
        function aiToolAction(toolName) {
            const input = document.getElementById('chatInput');
            const toolMessages = {
                '‰∏öÂä°ËØäÊñ≠': 'ËØ∑ËØäÊñ≠ÊàëÊúÄËøëÁöÑÈîÄÂîÆ‰∏öÂä°ÈóÆÈ¢òÔºåÂåÖÊã¨ËΩ¨ÂåñÁéá„ÄÅÂÆ¢Êà∑ÊµÅÂ§±Á≠âÈóÆÈ¢ò',
                'ÂÆ¢Êà∑Êé¢ÈúÄ': 'ËØ∑Â∏ÆÊàëÊ∑±ÂÖ•ÊåñÊéòÂÆ¢Êà∑ÁöÑÁúüÂÆûÈúÄÊ±ÇÂíåÁóõÁÇπ',
                'Á§æÂ™íËé∑ÂÆ¢': 'ËØ∑ÁªôÊàëÁ§æ‰∫§Â™í‰ΩìËé∑ÂÆ¢ÁöÑÁ≠ñÁï•Âª∫ËÆÆ',
                'ÁîüÊàêËØùÊúØ': 'ËØ∑Â∏ÆÊàëÁîüÊàêÈíàÂØπÂº†ÂÖàÁîüÁöÑËØùÊúØÔºå‰ªñÂÖ≥Ê≥®Êô∫ËÉΩÈ©æÈ©∂ÂäüËÉΩ',
                'ÂÆ¢Êà∑ÂàÜÊûê': 'ËØ∑ÂàÜÊûêÂÆ¢Êà∑Âº†ÂÖàÁîüÁöÑÈúÄÊ±ÇÂíåÂÜ≥Á≠ñÈìæ',
                'ÈáëËûçÊñπÊ°à': 'ËØ∑ËÆ°ÁÆóL7 MaxÁöÑ36ÊúüÈõ∂ÊÅØÈáëËûçÊñπÊ°à',
                'ÁîüÊàêÊä•‰ª∑Âçï': 'ËØ∑‰∏∫ÂÆ¢Êà∑Âº†ÂÖàÁîüÁîüÊàêÊä•‰ª∑Âçï',
                'Ë∑üËøõÂª∫ËÆÆ': 'ËØ∑‰∏∫Âº†ÂÖàÁîüÊèê‰æõÊô∫ËÉΩË∑üËøõÂª∫ËÆÆ'
            };

            input.value = toolMessages[toolName] || `ÊàëÊÉ≥‰ΩøÁî®${toolName}ÂäüËÉΩ`;
            sendChatMessage();
        }

        // ==================== ÈÄöÁî®ÂäüËÉΩ ====================
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // ==================== üÜï ÁßÅÂüüËê•ÈîÄÂäüËÉΩ ====================
        function sendMessage(name) {
            currentCustomer = name;
            document.getElementById('marketingModal').classList.add('active');
        }

        // Êñ∞Â¢ûÊåâÈíÆÂäüËÉΩÂáΩÊï∞
        function createFollowUp(name) {
            showNotification(`üìù Ê≠£Âú®‰∏∫ ${name} ÂàõÂª∫Ë∑üËøõËÆ°Âàí...`);
            setTimeout(() => {
                showNotification(`‚úÖ Ë∑üËøõËÆ°ÂàíÂ∑≤ÂàõÂª∫ÔºÅ‰∏ãÊ¨°Ë∑üËøõÊó∂Èó¥ÔºöÊòéÂ§©10:00`);
            }, 1000);
        }

        function sendWeChat(name) {
            showNotification(`üí¨ Ê≠£Âú®ÊâìÂºÄ‰∏é ${name} ÁöÑÂæÆ‰ø°ËÅäÂ§©...`);
            setTimeout(() => {
                showNotification(`‚úÖ Â∑≤ÊâìÂºÄÂæÆ‰ø°‰ºöËØù`);
            }, 500);
        }

        function sendEnterpriseWeChat(name) {
            showNotification(`üëî Ê≠£Âú®ÊâìÂºÄ‰∏é ${name} ÁöÑ‰ºÅ‰∏öÂæÆ‰ø°...`);
            setTimeout(() => {
                showNotification(`‚úÖ Â∑≤ÊâìÂºÄ‰ºÅ‰∏öÂæÆ‰ø°‰ºöËØù`);
            }, 500);
        }

        function createTestDrive(name) {
            showNotification(`üöó Ê≠£Âú®‰∏∫ ${name} ÂÆâÊéíËØïÈ©æ...`);
            setTimeout(() => {
                showNotification(`‚úÖ ËØïÈ©æÂ∑≤ÂÆâÊéíÔºÅÊó∂Èó¥ÔºöÊòéÂ§©14:00ÔºåËΩ¶ÂûãÔºöL7 Max`);
            }, 1000);
        }

        function createQuotation(name) {
            showNotification(`üí∞ Ê≠£Âú®‰∏∫ ${name} ÁîüÊàêÊä•‰ª∑Âçï...`);
            setTimeout(() => {
                showNotification(`‚úÖ Êä•‰ª∑ÂçïÂ∑≤ÁîüÊàêÔºÅÂåÖÂê´3Â•óÈáëËûçÊñπÊ°àÂíåÊúÄ‰ºò‰ºòÊÉ†ÁªÑÂêà`);
            }, 1200);
        }

        function viewFollowUpHistory(name) {
            showNotification(`üìã Ê≠£Âú®Êü•Áúã ${name} ÁöÑË∑üËøõËÆ∞ÂΩï...`);
            setTimeout(() => {
                showNotification(`‚úÖ ÂÖ±Êúâ8Êù°Ë∑üËøõËÆ∞ÂΩïÔºåÊúÄËøë‰∏ÄÊ¨°ÔºöÊò®Â§©15:30ÁîµËØùÊ≤üÈÄö`);
            }, 800);
        }

        // üÜï È°∂ÈÉ®Â∑•ÂÖ∑Ê†èÂäüËÉΩÂáΩÊï∞
        function showReceptionStats() {
            showNotification('üë• ‰ªäÊó•Êé•ÂæÖÁªüËÆ°ÔºöÂ∑≤Êé•ÂæÖ12ÁªÑÂÆ¢Êà∑ÔºåÂÖ∂‰∏≠È´òÊÑèÂêë3ÁªÑÔºå‰∏≠ÊÑèÂêë5ÁªÑ');
            setTimeout(() => {
                showNotification('üìä Êé•ÂæÖË¥®ÈáèÂàÜÊûêÔºöÂπ≥ÂùáÊé•ÂæÖÊó∂Èïø28ÂàÜÈíüÔºåËΩ¨ÂåñÁéá33%');
            }, 1500);
        }

        function showTestDriveStats() {
            showNotification('üöó ‰ªäÊó•ËØïÈ©æÁªüËÆ°ÔºöÂ∑≤ÂÆåÊàê5Ê¨°ËØïÈ©æÔºåÂæÖÂÆâÊéí3Ê¨°');
            setTimeout(() => {
                showNotification('‚úÖ ËØïÈ©æËΩ¨ÂåñÁéáÔºö80%ÂÆ¢Êà∑ÂØπ‰∫ßÂìÅÊª°ÊÑèÔºå2ÁªÑÂ∑≤ËøõÂÖ•Êä•‰ª∑Èò∂ÊÆµ');
            }, 1500);
        }

        function showTodoList() {
            showNotification('üìã ‰ªäÊó•ÂæÖÂäû‰∫ãÈ°πÔºö');
            setTimeout(() => {
                showNotification('1. Ë∑üËøõÂº†ÂÖàÁîüËØïÈ©æÂèçÈ¶àÔºà10:00Ôºâ\n2. ÈôàÂÖàÁîüÈáëËûçÊñπÊ°àÁ°ÆËÆ§Ôºà14:00Ôºâ\n3. Âë®Â•≥Â£´Á≠æÁ∫¶Ôºà15:30Ôºâ\n4. ÂÆåÊàêÊó•Êä•Ôºà18:00Ôºâ');
            }, 500);
        }

        function showCustomerPool() {
            showNotification('üë• ÂÆ¢Êà∑Ê±†ÁªüËÆ°ÔºöÂΩìÂâçÂÖ±Êúâ40‰ΩçÊ¥ªË∑ÉÂÆ¢Êà∑');
            setTimeout(() => {
                showNotification('üìä ÂÆ¢Êà∑ÂàÜÂ∏ÉÔºöAÁ∫ßÂÆ¢Êà∑8‰ΩçÔºåBÁ∫ßÂÆ¢Êà∑15‰ΩçÔºåCÁ∫ßÂÆ¢Êà∑17‰Ωç');
                setTimeout(() => {
                    showNotification('üí° Âª∫ËÆÆ‰ºòÂÖàË∑üËøõAÁ∫ßÂÆ¢Êà∑ÔºåÊú¨ÊúàÁõÆÊ†áËΩ¨ÂåñÁéá65%');
                }, 1500);
            }, 1000);
        }

        function startVoiceListening() {
            showNotification('üé§ ËØ≠Èü≥ËÅÜÂê¨Â∑≤ÂºÄÂêØÔºåÊàëÊ≠£Âú®ËÅÜÂê¨ÊÇ®ÁöÑÊåá‰ª§...');
            setTimeout(() => {
                showNotification('üí° ÊÇ®ÂèØ‰ª•ËØ¥Ôºö"Â∏ÆÊàëÂÆâÊéíÊòéÂ§©ÁöÑËØïÈ©æ"„ÄÅ"Êü•ÁúãAÁ∫ßÂÆ¢Êà∑"„ÄÅ"ÁîüÊàê‰ªäÊó•Êä•Âëä"Á≠â');
            }, 1500);
        }

        // üÜï Êü•ÁúãÁ§æ‰∫§Â™í‰Ωì‰∫íÂä®
        function viewSocialMedia() {
            showNotification('üì± Ê≠£Âú®ÊâìÂºÄÂÆ¢Êà∑Á§æ‰∫§Â™í‰ΩìÂä®ÊÄÅ...');
            setTimeout(() => {
                showNotification('‚úÖ Â∑≤ÊòæÁ§∫3‰ΩçÂÆ¢Êà∑ÁöÑÁ§æ‰∫§Â™í‰ΩìÂä®ÊÄÅÔºåÂèØÂú®È°µÈù¢‰∏ãÊñπÊü•Áúã‰∫íÂä®Âª∫ËÆÆ');
            }, 1000);
        }

        function closeMarketing() {
            document.getElementById('marketingModal').classList.remove('active');
        }

        function openLearning() {
            closeMarketing();
            showNotification('üìö Ê≠£Âú®ÊâìÂºÄÁßÅÂüüËê•ÈîÄÂ≠¶‰π†‰∏≠ÂøÉ...');
            setTimeout(() => {
                showNotification('üí° Â≠¶‰π†ÂÜÖÂÆπÔºöÊúãÂèãÂúàÂÜÖÂÆπÂàõ‰ΩúÊäÄÂ∑ß„ÄÅÂÆ¢Êà∑‰∫íÂä®Á≠ñÁï•„ÄÅËê•ÈîÄÊó∂Êú∫ÊääÊè°');
            }, 1000);
        }

        function createMoments() {
            closeMarketing();
            showNotification('‚úçÔ∏è AIÊ≠£Âú®‰∏∫ÊÇ®ÁîüÊàêÊúãÂèãÂúàÂÜÖÂÆπ...');
            setTimeout(() => {
                const examples = [
                    'üéâ ÁêÜÊÉ≥L7ËΩ¶‰∏ªÂàÜ‰∫´Ôºö\n"ÊèêËΩ¶‰∏Ä‰∏™ÊúàÔºåÁúüÈ¶ôÔºÅÂüéÂ∏ÇNOAÂ§™Â•ΩÁî®‰∫ÜÔºåÊØèÂ§©‰∏ä‰∏ãÁè≠ÈÉΩÊòØ‰∫´Âèó„ÄÇÂÆ∂‰∫∫ÈÉΩËØ¥ËøôËΩ¶‰π∞ÂÄº‰∫ÜÔºÅ"\n\nüì∑ [ÈÖç9Âº†Á≤æÁæéÂÆûÊãçÂõæ]',
                    'üöó Êñ∞ËΩ¶Âà∞Â∫óÔºÅ\nÁêÜÊÉ≥L7 MaxÁé∞ËΩ¶ÈôêÈáè3Âè∞ÔºåÂ§öÁßçÈ¢úËâ≤ÂèØÈÄâ„ÄÇÊú¨ÊúàË¥≠ËΩ¶‰∫´36ÊúüÈõ∂ÊÅØ+1‰∏áÁé∞Èáë‰ºòÊÉ†ÔºÅ\n\nÊ¨¢ËøéÂà∞Â∫óÂìÅÈâ¥ËØïÈ©æ üéÅ',
                    'üí° ‰Ω†Áü•ÈÅìÂêóÔºü\nÁêÜÊÉ≥L7ÁöÑÂüéÂ∏ÇNOAÂäüËÉΩÔºåÂèØ‰ª•Âú®Â§çÊùÇË∑ØÂÜµËá™Âä®È©æÈ©∂ÔºåËß£ÊîæÂèåÊâãÂèåËÑö„ÄÇÂë®Êú´Â∏¶ÊÇ®‰ΩìÈ™åÈªëÁßëÊäÄÔºÅ'
                ];
                const randomContent = examples[Math.floor(Math.random() * examples.length)];
                showNotification(`‚úÖ ÊúãÂèãÂúàÂÜÖÂÆπÂ∑≤ÁîüÊàêÔºö\n\n${randomContent}`);
            }, 1500);
        }

        function viewMoments() {
            closeMarketing();
            showNotification('üëÄ Ê≠£Âú®Âä†ËΩΩÂÆ¢Êà∑ÊúãÂèãÂúàÂä®ÊÄÅ...');
            setTimeout(() => {
                showNotification(`üì± ÂèëÁé∞${currentCustomer}ÁöÑÊúÄÊñ∞Âä®ÊÄÅÔºö\n"Âë®Êú´Â∏¶ÂÆ∂‰∫∫ÁúãËΩ¶ÔºåÂú®ÁêÜÊÉ≥ÂíåÁâπÊñØÊãâ‰πãÈó¥Á∫†Áªì"\nüí° Âª∫ËÆÆÔºöÂèäÊó∂ÁÇπËµûÂπ∂ËØÑËÆ∫ÔºåÊé®ËçêËØïÈ©æ‰ΩìÈ™å`);
            }, 1000);
        }

        function sendWeChat() {
            closeMarketing();
            showNotification(`üí¨ Ê≠£Âú®ÈÄöËøá‰ºÅ‰∏öÂæÆ‰ø°ÂèëÈÄÅËµÑÊñôÁªô${currentCustomer}...`);
            setTimeout(() => {
                showNotification('‚úÖ Â∑≤ÊàêÂäüÂèëÈÄÅÔºö‰∫ßÂìÅÈÖçÁΩÆÂØπÊØîË°®„ÄÅÈáëËûçÊñπÊ°à„ÄÅ‰ºòÊÉ†ÊîøÁ≠ñËØ¶ÊÉÖ');
            }, 1500);
        }

        // ÁÇπÂáªÁ©∫ÁôΩÂå∫ÂüüÂÖ≥Èó≠ÁßÅÂüüËê•ÈîÄÂºπÁ™ó
        document.addEventListener('DOMContentLoaded', function() {
            const marketingModal = document.getElementById('marketingModal');
            if (marketingModal) {
                marketingModal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeMarketing();
                    }
                });
            }

            // ÁÇπÂáªÁ©∫ÁôΩÂå∫ÂüüÂÖ≥Èó≠ÂæÖÂäû‰ªªÂä°ÂºπÁ™ó
            const todoModal = document.getElementById('todoModal');
            if (todoModal) {
                todoModal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeTodoList();
                    }
                });
            }
        });

        // ==================== üÜï ÂæÖÂäû‰ªªÂä°ÁÆ°ÁêÜÂäüËÉΩ ====================
        const todoTasks = [
            {
                id: 't1',
                title: 'Ë∑üËøõÂº†ÂÖàÁîüËØïÈ©æÂèçÈ¶à',
                desc: 'Âº†ÂÖàÁîüÊò®Êó•ËØïÈ©æÁêÜÊÉ≥L7ÔºåÈúÄÁîµËØùË∑üËøõËØïÈ©æÊÑüÂèóÔºåÊé®ÈÄÅÈáëËûçÊñπÊ°à',
                customer: 'Âº†ÂÖàÁîü',
                deadline: '‰ªäÂ§© 10:00',
                priority: 'high',
                process: 'üîç Ê≠£Âú®ÂàÜÊûêÂº†ÂÖàÁîüÁöÑËØïÈ©æËÆ∞ÂΩïÂíåÂÆ¢Êà∑ÁîªÂÉè...\nüí¨ Ê≠£Âú®ÁîüÊàê‰∏™ÊÄßÂåñË∑üËøõËØùÊúØ...\nüìû Ê≠£Âú®ÈÄöËøá‰ºÅ‰∏öÂæÆ‰ø°Êã®ÊâìÁîµËØù...\nüìÑ Ê≠£Âú®Êé®ÈÄÅ36ÊúüÈõ∂ÊÅØÈáëËûçÊñπÊ°à...\n‚úÖ Â∑≤ÂÆåÊàêË∑üËøõÔºåÂÆ¢Êà∑ÂèçÈ¶àËâØÂ•ΩÔºåÂ∑≤ÂèëÈÄÅÈáëËûçÊñπÊ°à'
            },
            {
                id: 't2',
                title: 'ÊèêÈÜíÂë®Â•≥Â£´Á≠æÁ∫¶',
                desc: 'Âë®Â•≥Â£´Â∑≤ÊîØ‰ªòÂÆöÈáëÔºå‰ªäÊó•15:00Âà∞Â∫óÁ≠æÁ∫¶ÔºåÈúÄÊèêÂâçÂáÜÂ§áÂêàÂêåÂíå‰∫§‰ªòËµÑÊñô',
                customer: 'Âë®Â•≥Â£´',
                deadline: '‰ªäÂ§© 14:30',
                priority: 'high',
                process: 'üìã Ê≠£Âú®‰ªéCRMÊèêÂèñÂë®Â•≥Â£´ÁöÑËÆ¢Âçï‰ø°ÊÅØ...\nüìù Ê≠£Âú®Ëá™Âä®ÁîüÊàêË¥≠ËΩ¶ÂêàÂêå...\nüìÖ Ê≠£Âú®Êü•ËØ¢ËΩ¶ËæÜ‰∫§‰ªòÊó∂Èó¥...\nüí¨ Ê≠£Âú®ÂèëÈÄÅÂà∞Â∫óÊèêÈÜíÊ∂àÊÅØ...\n‚úÖ Â∑≤ÂÆåÊàêÂáÜÂ§áÔºåÂêàÂêåÂ∑≤ÁîüÊàêÔºåÊèêÈÜíÂ∑≤ÂèëÈÄÅ'
            },
            {
                id: 't3',
                title: 'ÂèëÈÄÅ‰∫ßÂìÅËµÑÊñôÁªôÈôàÂÖàÁîü',
                desc: 'ÈôàÂÖàÁîüËØ¢ÈóÆL7‰∏éModel YÂØπÊØîÔºåÈúÄÂèëÈÄÅËØ¶ÁªÜÂØπÊØîËµÑÊñô',
                customer: 'ÈôàÂÖàÁîü',
                deadline: '‰ªäÂ§© 11:00',
                priority: 'medium',
                process: 'üìä Ê≠£Âú®ÁîüÊàêÁêÜÊÉ≥L7 vs ÁâπÊñØÊãâModel YÂØπÊØîË°®...\nüì∏ Ê≠£Âú®ÂåπÈÖç‰∫ßÂìÅÂõæÁâáÂíåÈÖçÁΩÆÂèÇÊï∞...\nüí∞ Ê≠£Âú®ËÆ°ÁÆó‰ª∑Ê†ºÂØπÊØîÂíå‰ΩøÁî®ÊàêÊú¨...\nüì± Ê≠£Âú®ÈÄöËøá‰ºÅ‰∏öÂæÆ‰ø°ÂèëÈÄÅËµÑÊñô...\n‚úÖ Â∑≤ÂÆåÊàêÂèëÈÄÅÔºåÂØπÊØîËµÑÊñôÂ∑≤ÈÄÅËææ'
            },
            {
                id: 't4',
                title: 'ÈÇÄÁ∫¶ËµµÂ•≥Â£´‰∫åÊ¨°Âà∞Â∫ó',
                desc: 'ËµµÂ•≥Â£´‰∏äÂë®Âà∞Â∫óÂí®ËØ¢ÔºåÈúÄÈÇÄÁ∫¶Êú¨Âë®Êú´ÂÜçÊ¨°Âà∞Â∫óÊ∑±Â∫¶‰ΩìÈ™å',
                customer: 'ËµµÂ•≥Â£´',
                deadline: '‰ªäÂ§© 16:00',
                priority: 'medium',
                process: 'üìÖ Ê≠£Âú®Êü•ËØ¢Êú¨Âë®Êú´ËØïÈ©æÈ¢ÑÁ∫¶ÊÉÖÂÜµ...\nüöó Ê≠£Âú®‰∏∫ËµµÂ•≥Â£´È¢ÑÁïôÁêÜÊÉ≥L7 ProËØïÈ©æËΩ¶...\nüí¨ Ê≠£Âú®ÁîüÊàêÈÇÄÁ∫¶ËØùÊúØÂíåÊ¥ªÂä®‰ø°ÊÅØ...\nüìû Ê≠£Âú®Êã®ÊâìÁîµËØùÈÇÄÁ∫¶...\n‚úÖ Â∑≤ÂÆåÊàêÈÇÄÁ∫¶ÔºåÂÆ¢Êà∑Á°ÆËÆ§Âë®ÂÖ≠14:00Âà∞Â∫ó'
            },
            {
                id: 't5',
                title: 'Êõ¥Êñ∞Êú¨Âë®ÈîÄÂîÆÂë®Êä•',
                desc: 'Êï¥ÁêÜÊú¨Âë®Êé•ÂæÖ„ÄÅËØïÈ©æ„ÄÅÁ≠æÁ∫¶Êï∞ÊçÆÔºåÁîüÊàêÈîÄÂîÆÂë®Êä•',
                customer: 'Á≥ªÁªü‰ªªÂä°',
                deadline: '‰ªäÂ§© 18:00',
                priority: 'medium',
                process: 'üìä Ê≠£Âú®‰ªéCRMÊèêÂèñÊú¨Âë®ÈîÄÂîÆÊï∞ÊçÆ...\nüìà Ê≠£Âú®ÂàÜÊûêËΩ¨ÂåñÁéáÂíåÊàê‰∫§ÊÉÖÂÜµ...\nüìù Ê≠£Âú®ÁîüÊàêÊï∞ÊçÆÂèØËßÜÂåñÂõæË°®...\nüìÑ Ê≠£Âú®Ëá™Âä®Êí∞ÂÜôÂë®Êä•ÊÄªÁªì...\n‚úÖ Â∑≤ÂÆåÊàêÁîüÊàêÔºåÂë®Êä•Â∑≤‰øùÂ≠òÂà∞Á≥ªÁªü'
            }
        ];

        function openTodoList() {
            document.getElementById('todoModal').classList.add('active');
            renderTodoList();
        }

        function closeTodoList() {
            document.getElementById('todoModal').classList.remove('active');
        }

        function renderTodoList() {
            const todoList = document.getElementById('todoList');
            todoList.innerHTML = todoTasks.map(task => `
                <div class="todo-item" id="todo-${task.id}">
                    <div class="todo-item-header">
                        <div class="todo-item-title">
                            ${task.title}
                            <span class="todo-priority todo-priority-${task.priority}">
                                ${task.priority === 'high' ? 'È´ò‰ºòÂÖà' : '‰∏≠‰ºòÂÖà'}
                            </span>
                        </div>
                    </div>
                    <div class="todo-item-desc">${task.desc}</div>
                    <div class="todo-item-meta">
                        <span>üë§ ${task.customer}</span>
                        <span>‚è∞ ${task.deadline}</span>
                    </div>
                    <button class="ai-delegate-btn" onclick="delegateToAI('${task.id}')">
                        ü§ñ AIÊâòÁÆ°ÊâßË°å
                    </button>
                    <div class="ai-execution-process" id="process-${task.id}"></div>
                </div>
            `).join('');
        }

        function delegateToAI(taskId) {
            const task = todoTasks.find(t => t.id === taskId);
            if (!task) return;

            const todoItem = document.getElementById(`todo-${taskId}`);
            const processDiv = document.getElementById(`process-${taskId}`);
            const button = todoItem.querySelector('.ai-delegate-btn');

            // Á¶ÅÁî®ÊåâÈíÆ
            button.disabled = true;
            button.textContent = '‚è≥ ÊâßË°å‰∏≠...';

            // Ê†áËÆ∞‰∏∫ÊâßË°å‰∏≠
            todoItem.classList.add('executing');

            // ÊòæÁ§∫ÊâßË°åËøáÁ®ã
            processDiv.classList.add('active');
            const steps = task.process.split('\n');
            let currentStep = 0;

            function showNextStep() {
                if (currentStep < steps.length) {
                    const isLastStep = currentStep === steps.length - 1;
                    const icon = isLastStep ? '‚úÖ' : '‚è≥';

                    processDiv.innerHTML += `
                        <div class="execution-step">
                            <span class="step-icon">${icon}</span>
                            <span>${steps[currentStep]}</span>
                        </div>
                    `;

                    currentStep++;

                    if (currentStep < steps.length) {
                        setTimeout(showNextStep, 1500);
                    } else {
                        // ÊâßË°åÂÆåÊàê
                        setTimeout(() => {
                            todoItem.classList.remove('executing');
                            todoItem.classList.add('completed');
                            button.innerHTML = '<span class="completion-badge">‚úÖ Â∑≤ÂÆåÊàê</span>';

                            // Êõ¥Êñ∞ÂæÖÂäûÊï∞Èáè
                            const remainingTasks = todoTasks.length - document.querySelectorAll('.todo-item.completed').length;
                            document.getElementById('statPending').textContent = remainingTasks;

                            showNotification(`‚úÖ ‰ªªÂä°"${task.title}"Â∑≤Áî±AIËá™Âä®ÂÆåÊàêÔºÅ`);
                        }, 500);
                    }
                }
            }

            showNextStep();
        }

        // ==================== üÜï AIÊô∫ËÉΩÁîµËØùÂä©ÊâãÂäüËÉΩ ====================
        let callTimer = null;
        let callDuration = 0;
        let currentCustomer = null;
        let conversationLog = [];

        function makeCall(name) {
            // ÊâìÂºÄAIÁîµËØùÂä©ÊâãÁïåÈù¢
            currentCustomer = name;
            const modal = document.getElementById('aiPhoneModal');
            modal.classList.add('active');

            // ËÆæÁΩÆÂÆ¢Êà∑‰ø°ÊÅØ
            document.getElementById('phoneAvatar').textContent = name[0];
            document.getElementById('phoneNumber').textContent = '138 **** 2345';

            // Ê∏ÖÁ©∫‰πãÂâçÁöÑÂØπËØùËÆ∞ÂΩï
            conversationLog = [];
            const messages = document.getElementById('conversationMessages');
            messages.innerHTML = `
                <div class="conv-message ai">
                    <div class="conv-avatar">ü§ñ</div>
                    <div>
                        <div class="conv-bubble">
                            ÊÇ®Â•Ω,ÊàëÊòØÁêÜÊÉ≥Ê±ΩËΩ¶AIÁîµËØùÂä©Êâã,Ê≠£Âú®‰∏∫ÊÇ®Êé•ÈÄö${name}ÁöÑÁîµËØù...
                        </div>
                        <div class="conv-time">${new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })}</div>
                    </div>
                </div>
            `;

            // ÈáçÁΩÆAIÂàÜÊûêÈù¢Êùø
            resetAIAnalysis();

            // 1ÁßíÂêéËá™Âä®ÂºÄÂßãÈÄöËØù
            setTimeout(() => toggleCall(), 1000);
        }

        function toggleCall() {
            const btn = document.getElementById('callButton');
            const status = document.getElementById('robotStatus');

            if (!btn.classList.contains('active')) {
                // ÂºÄÂßãÈÄöËØù
                btn.classList.add('active');
                status.textContent = 'ÈÄöËØù‰∏≠';
                document.querySelector('.status-detail').textContent = 'Ê≠£Âú®ÂÆûÊó∂ËÆ∞ÂΩïÂØπËØùÂÜÖÂÆπ';
                startCallTimer();
                startListening();
                // Ê®°ÊãüÁúüÂÆûÂØπËØù
                simulateConversation();
            } else {
                // ÁªìÊùüÈÄöËØù
                endCall();
            }
        }

        function startCallTimer() {
            callDuration = 0;
            callTimer = setInterval(() => {
                callDuration++;
                const minutes = Math.floor(callDuration / 60).toString().padStart(2, '0');
                const seconds = (callDuration % 60).toString().padStart(2, '0');
                document.getElementById('callTimer').textContent = `${minutes}:${seconds}`;
            }, 1000);
        }

        function startListening() {
            // Ê®°ÊãüËØ≠Èü≥ËØÜÂà´ÂêØÂä®
            const status = document.getElementById('robotStatus');
            status.textContent = 'Ê≠£Âú®ËÅÜÂê¨...';
            showNotification('üé§ AIÁîµËØùÂä©ÊâãÂ∑≤ÂºÄÂêØÂÆûÊó∂ËØ≠Èü≥ËØÜÂà´');
        }

        function simulateConversation() {
            // Ê®°ÊãüÁúüÂÆûÂÆ¢Êà∑ÂØπËØùÂú∫ÊôØ
            const conversations = [
                {
                    speaker: 'user',
                    text: '‰Ω†Â•Ω,ÊàëÊÉ≥‰∫ÜËß£‰∏Ä‰∏ãÁêÜÊÉ≥L7ÁöÑÈÖçÁΩÆÂíå‰ª∑Ê†º',
                    time: 2000,
                    intent: '‰∫ßÂìÅÂí®ËØ¢',
                    concern: '‰ª∑Ê†º'
                },
                {
                    speaker: 'ai',
                    text: 'ÊÇ®Â•Ω!ÁêÜÊÉ≥L7ÊúâAir„ÄÅProÂíåMax‰∏â‰∏™ÁâàÊú¨„ÄÇÂª∫ËÆÆÊÇ®ÂÖàÂëäËØâÊàëÊÇ®ÁöÑÈ¢ÑÁÆóÂíå‰∏ªË¶ÅÁî®ËΩ¶Âú∫ÊôØ,Êàë‰∏∫ÊÇ®Êé®ËçêÊúÄÂêàÈÄÇÁöÑÈÖçÁΩÆ',
                    time: 5000
                },
                {
                    speaker: 'user',
                    text: 'È¢ÑÁÆó30‰∏áÂ∑¶Âè≥Âêß,‰∏ªË¶ÅÊòØÂÆ∂Áî®,Âπ≥Êó∂Êé•ÈÄÅÂ≠©Â≠ê‰∏ä‰∏ãÂ≠¶',
                    time: 9000,
                    intent: 'ÈúÄÊ±ÇÊòéÁ°Æ',
                    concern: 'ÂÆ∂Áî®Âú∫ÊôØ'
                },
                {
                    speaker: 'ai',
                    text: 'ÊòéÁôΩ‰∫Ü„ÄÇÈÇ£ÁêÜÊÉ≥L7 AirÈùûÂ∏∏ÈÄÇÂêàÊÇ®,ÊåáÂØº‰ª∑31.98‰∏á,Á©∫Èó¥ÂÆΩÊïûÂÆâÂÖ®ÈÖçÁΩÆÈ´ò„ÄÇÊàë‰ª¨ËøòÊúâ36ÊúüÈõ∂ÊÅØÈáëËûçÊñπÊ°à,Êúà‰æõÂè™ÈúÄ6222ÂÖÉ',
                    time: 14000
                },
                {
                    speaker: 'user',
                    text: 'Áª≠Ëà™ÊÄé‰πàÊ†∑?ÂÖÖÁîµÊñπ‰æøÂêó?',
                    time: 18000,
                    intent: 'È°æËôëÁ°ÆËÆ§',
                    concern: 'Áª≠Ëà™ÂíåÂÖÖÁîµ'
                },
                {
                    speaker: 'ai',
                    text: 'ÁêÜÊÉ≥L7ÊòØÂ¢ûÁ®ãÂºèÁîµÂä®,Á∫ØÁîµÁª≠Ëà™210ÂÖ¨Èáå,ÁªºÂêàÁª≠Ëà™1315ÂÖ¨Èáå,ÂÆåÂÖ®Ê≤°ÊúâÁª≠Ëà™ÁÑ¶Ëôë„ÄÇËÄå‰∏îÊîØÊåÅÂÆ∂ÂÖÖÊ°©„ÄÅË∂ÖÂÖÖÁ´ôÂíåÊ≤πÁîµÂèåÊ®°Âºè',
                    time: 23000
                },
                {
                    speaker: 'user',
                    text: 'Âê¨Ëµ∑Êù•‰∏çÈîô,ÊúâÊó∂Èó¥ÊàëÊÉ≥Êù•Â∫óÈáåÁúãÁúãÂÆûËΩ¶',
                    time: 27000,
                    intent: 'ÊÑèÂêëÊèêÂçá',
                    concern: 'Êó†'
                },
                {
                    speaker: 'ai',
                    text: 'Â§™Â•Ω‰∫Ü!ÈÇ£ÊàëÂ∏ÆÊÇ®Á∫¶Âë®Êú´Âà∞Â∫óËØïÈ©æ,È°∫‰æø‰ΩìÈ™å‰∏Ä‰∏ãÁêÜÊÉ≥AD MaxÊô∫ËÉΩÈ©æÈ©∂„ÄÇÊÇ®ÁúãÂë®ÂÖ≠‰∏ãÂçà3ÁÇπÊñπ‰æøÂêó?',
                    time: 31000
                },
                {
                    speaker: 'user',
                    text: 'ÂèØ‰ª•ÁöÑ,ÈÇ£Â∞±Âë®ÂÖ≠‰∏ãÂçàËßÅ',
                    time: 34000,
                    intent: 'ÊàêÂäüÈÇÄÁ∫¶',
                    concern: 'Êó†'
                }
            ];

            conversations.forEach(conv => {
                setTimeout(() => {
                    addConversationMessage(conv.speaker, conv.text);
                    if (conv.speaker === 'user' && conv.intent) {
                        updateAIAnalysis(conv.intent, conv.concern);
                    }
                }, conv.time);
            });
        }

        function addConversationMessage(speaker, text) {
            const container = document.getElementById('conversationMessages');
            const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });

            const messageDiv = document.createElement('div');
            messageDiv.className = `conv-message ${speaker}`;
            messageDiv.innerHTML = `
                <div class="conv-avatar">${speaker === 'ai' ? 'ü§ñ' : (currentCustomer ? currentCustomer[0] : 'ÂÆ¢')}</div>
                <div>
                    <div class="conv-bubble">${text}</div>
                    <div class="conv-time">${time}</div>
                </div>
            `;

            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;

            // ËÆ∞ÂΩïÂØπËØùÊó•Âøó
            conversationLog.push({ speaker, text, time });
        }

        function resetAIAnalysis() {
            const analysisPanel = document.querySelector('.ai-analysis-panel');
            analysisPanel.innerHTML = `
                <div class="analysis-title">ü§ñ AIÂÆûÊó∂ÂàÜÊûê</div>
                <div class="analysis-item">
                    <div class="analysis-label">ÂÆ¢Êà∑ÊÑèÂêë:</div>
                    <div>ÂæÖËØÜÂà´</div>
                </div>
                <div class="analysis-item">
                    <div class="analysis-label">ÂÖ≥Ê≥®ÁÇπ:</div>
                    <div>--</div>
                </div>
                <div class="analysis-item">
                    <div class="analysis-label">È°æËôë:</div>
                    <div>--</div>
                </div>
                <div class="analysis-item">
                    <div class="analysis-label">Âª∫ËÆÆËØùÊúØ:</div>
                    <div>--</div>
                </div>
            `;
        }

        function updateAIAnalysis(intent, concern) {
            // Ê†πÊçÆÂØπËØùÂÜÖÂÆπÊõ¥Êñ∞AIÂàÜÊûê
            const analysisMap = {
                '‰∫ßÂìÅÂí®ËØ¢': {
                    intention: 'BÁ∫ßÊÑèÂêë - ÂàùÊ≠•‰∫ÜËß£',
                    focus: '‰∫ßÂìÅÈÖçÁΩÆÂíå‰ª∑Ê†º',
                    concerns: concern,
                    suggestion: 'ËØ¢ÈóÆÈ¢ÑÁÆóÂíåÁî®ËΩ¶Âú∫ÊôØ,Êé®ËçêÂêàÈÄÇÈÖçÁΩÆ'
                },
                'ÈúÄÊ±ÇÊòéÁ°Æ': {
                    intention: 'AÁ∫ßÊÑèÂêë - ÈúÄÊ±ÇÊòéÁ°Æ',
                    focus: 'ÂÆ∂Áî®Âú∫ÊôØ„ÄÅÂÑøÁ´•ÂÆâÂÖ®',
                    concerns: concern,
                    suggestion: 'Âº∫Ë∞ÉÁ©∫Èó¥‰ºòÂäøÂíåÂÆâÂÖ®ÈÖçÁΩÆ,Êé®ËçêÈáëËûçÊñπÊ°àÈôç‰ΩéÊúà‰æõÂéãÂäõ'
                },
                'È°æËôëÁ°ÆËÆ§': {
                    intention: 'AÁ∫ßÊÑèÂêë - ÊúâË¥≠‰π∞È°æËôë',
                    focus: 'Áª≠Ëà™ÂíåÂÖÖÁîµ‰æøÂà©ÊÄß',
                    concerns: concern,
                    suggestion: 'ËØ¶ÁªÜËØ¥ÊòéÂ¢ûÁ®ãÂºè‰ºòÂäø,Ê∂àÈô§Áª≠Ëà™ÁÑ¶Ëôë'
                },
                'ÊÑèÂêëÊèêÂçá': {
                    intention: 'A+Á∫ßÊÑèÂêë - ÊÑøÊÑèÂà∞Â∫ó',
                    focus: 'ÂÆûËΩ¶‰ΩìÈ™å',
                    concerns: 'Êó†ÊòéÊòæÈ°æËôë',
                    suggestion: 'Á´ãÂç≥ÈÇÄÁ∫¶ËØïÈ©æ,ÈîÅÂÆöÊó∂Èó¥'
                },
                'ÊàêÂäüÈÇÄÁ∫¶': {
                    intention: 'A+Á∫ßÊÑèÂêë - Â∑≤Á°ÆËÆ§Âà∞Â∫ó',
                    focus: 'ËØïÈ©æ‰ΩìÈ™å',
                    concerns: 'Êó†',
                    suggestion: 'ÈÄöËØùÁªìÊùüÂêéÁ´ãÂç≥Âú®CRMÂàõÂª∫ËØïÈ©æÈ¢ÑÁ∫¶,ÂèëÈÄÅÂà∞Â∫óÊèêÈÜí'
                }
            };

            const analysis = analysisMap[intent] || analysisMap['‰∫ßÂìÅÂí®ËØ¢'];

            const analysisPanel = document.querySelector('.ai-analysis-panel');
            analysisPanel.innerHTML = `
                <div class="analysis-title">ü§ñ AIÂÆûÊó∂ÂàÜÊûê</div>
                <div class="analysis-item">
                    <div class="analysis-label">ÂÆ¢Êà∑ÊÑèÂêë:</div>
                    <div style="color: #4CAF50; font-weight: bold;">${analysis.intention}</div>
                </div>
                <div class="analysis-item">
                    <div class="analysis-label">ÂÖ≥Ê≥®ÁÇπ:</div>
                    <div>${analysis.focus}</div>
                </div>
                <div class="analysis-item">
                    <div class="analysis-label">È°æËôë:</div>
                    <div>${analysis.concerns}</div>
                </div>
                <div class="analysis-item">
                    <div class="analysis-label">Âª∫ËÆÆËØùÊúØ:</div>
                    <div style="color: var(--li-gold);">${analysis.suggestion}</div>
                </div>
            `;
        }

        function endCall() {
            clearInterval(callTimer);
            const btn = document.getElementById('callButton');
            const status = document.getElementById('robotStatus');

            btn.classList.remove('active');
            status.textContent = 'ÁîüÊàêÊÄªÁªì‰∏≠...';
            document.querySelector('.status-detail').textContent = 'AIÊ≠£Âú®ÂàÜÊûêÈÄöËØùÂÜÖÂÆπ';

            showNotification('üìû ÈÄöËØùÂ∑≤ÁªìÊùü,Ê≠£Âú®ÁîüÊàêAIÊÄªÁªì...');

            // 1.5ÁßíÂêéÁîüÊàêÊÄªÁªì
            setTimeout(() => {
                generateCallSummary();
            }, 1500);
        }

        function generateCallSummary() {
            const status = document.getElementById('robotStatus');
            status.textContent = 'ÊÄªÁªìÂÆåÊàê';
            document.querySelector('.status-detail').textContent = 'ÈÄöËØùËÆ∞ÂΩïÂ∑≤‰øùÂ≠ò';

            // ÊòæÁ§∫ÊÄªÁªìÂÜÖÂÆπ
            const summaryText = `
üìû ÈÄöËØùÊÄªÁªì - ${currentCustomer}

‚è±Ô∏è ÈÄöËØùÊó∂Èïø: ${Math.floor(callDuration / 60)}ÂàÜ${callDuration % 60}Áßí
üìÖ ÈÄöËØùÊó∂Èó¥: ${new Date().toLocaleString('zh-CN')}

üë§ ÂÆ¢Êà∑‰ø°ÊÅØ:
‚Ä¢ ÂßìÂêç: ${currentCustomer}
‚Ä¢ ÊÑèÂêëËΩ¶Âûã: ÁêÜÊÉ≥L7
‚Ä¢ È¢ÑÁÆó: 30‰∏áÂ∑¶Âè≥
‚Ä¢ Áî®ÈÄî: ÂÆ∂Áî®„ÄÅÊé•ÈÄÅÂ≠©Â≠ê

üéØ ÂÆ¢Êà∑ÊÑèÂêëÁ≠âÁ∫ß: A+Á∫ß (È´òÊÑèÂêëÂ∑≤ÈÇÄÁ∫¶)

üí¨ Ê†∏ÂøÉÈúÄÊ±Ç:
‚Ä¢ ‰∏ªË¶ÅÂú∫ÊôØ: ÂÆ∂Â∫≠Áî®ËΩ¶„ÄÅÂÑøÁ´•Êé•ÈÄÅ
‚Ä¢ ÂÖ≥Ê≥®ÁÇπ: Á©∫Èó¥„ÄÅÂÆâÂÖ®„ÄÅÁª≠Ëà™„ÄÅÂÖÖÁîµ‰æøÂà©
‚Ä¢ È¢ÑÁÆóÊïèÊÑüÂ∫¶: ‰∏≠Á≠â

‚ö†Ô∏è ‰∏ªË¶ÅÈ°æËôë:
‚Ä¢ Áª≠Ëà™ÁÑ¶Ëôë (Â∑≤Ëß£ÂÜ≥)
‚Ä¢ ÂÖÖÁîµ‰æøÂà©ÊÄß (Â∑≤Ëß£ÂÜ≥)

‚úÖ Â∑≤ÂÆåÊàêÂä®‰Ωú:
‚Ä¢ Êé®ËçêÁêÜÊÉ≥L7 AirÈÖçÁΩÆ
‚Ä¢ ‰ªãÁªç36ÊúüÈõ∂ÊÅØÈáëËûçÊñπÊ°à
‚Ä¢ ÊàêÂäüÈÇÄÁ∫¶Âë®ÂÖ≠‰∏ãÂçà3ÁÇπÂà∞Â∫óËØïÈ©æ

üìã ‰∏ã‰∏ÄÊ≠•Ë°åÂä®:
1. Á´ãÂç≥Âú®CRMÂàõÂª∫ËØïÈ©æÈ¢ÑÁ∫¶
2. ÂèëÈÄÅÂà∞Â∫óÂØºËà™ÂíåÂÅúËΩ¶‰ø°ÊÅØ
3. ÂáÜÂ§áL7 AirËØïÈ©æËΩ¶ËæÜ
4. Âë®‰∫î‰∏ãÂçàÁîµËØùÊèêÈÜíÁ°ÆËÆ§
5. ÂáÜÂ§áÈáëËûçÊñπÊ°àËØ¶ÁªÜËµÑÊñô

ü§ñ AIÊàê‰∫§Ê¶ÇÁéáÈ¢ÑÊµã: 75%
`;

            // Ê∑ªÂä†ÊÄªÁªìÊ∂àÊÅØÂà∞ÂØπËØùÂå∫
            const container = document.getElementById('conversationMessages');
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'conv-message ai';
            summaryDiv.innerHTML = `
                <div class="conv-avatar">ü§ñ</div>
                <div>
                    <div class="conv-bubble" style="background: rgba(76, 175, 80, 0.15); border-color: #4CAF50; white-space: pre-line; text-align: left; line-height: 1.8;">
                        <strong style="color: #4CAF50; font-size: 1.05rem;">‚úÖ AIÈÄöËØùÊÄªÁªì</strong><br><br>
                        ${summaryText}
                    </div>
                    <div class="conv-time">${new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })}</div>
                </div>
            `;
            container.appendChild(summaryDiv);
            container.scrollTop = container.scrollHeight;

            showNotification('‚úÖ AIÈÄöËØùÊÄªÁªìÂ∑≤ÁîüÊàê');
        }

        function saveSummary() {
            // ‰øùÂ≠òÈÄöËØùÊÄªÁªìÂà∞CRM
            showNotification('üíæ Ê≠£Âú®‰øùÂ≠òÂà∞CRMÁ≥ªÁªü...');

            setTimeout(() => {
                showNotification(`‚úÖ ${currentCustomer}ÁöÑÈÄöËØùËÆ∞ÂΩïÂ∑≤‰øùÂ≠òÂà∞CRM`);

                // 1ÁßíÂêéÂÖ≥Èó≠ÁîµËØùÁïåÈù¢
                setTimeout(() => {
                    document.getElementById('aiPhoneModal').classList.remove('active');

                    // Ê®°ÊãüCRMÂêåÊ≠•
                    syncToCRM(currentCustomer, 'call-completed');
                }, 1000);
            }, 1500);
        }

        function openQuickReply() {
            showNotification('Âø´Êç∑ÂõûÂ§çÂ∫ìÂäüËÉΩÂºÄÂèë‰∏≠...');
        }

        function openTestDriveSchedule() {
            showNotification('ËØïÈ©æÈ¢ÑÁ∫¶Á≥ªÁªüÂäüËÉΩÂºÄÂèë‰∏≠...');
        }

        function openDailyReport() {
            showNotification('‰ªäÊó•Â∑•‰ΩúÊä•ÂëäÂäüËÉΩÂºÄÂèë‰∏≠...');
        }

        // ==================== üÜï ÈîÄÂîÆÊºèÊñóÂäüËÉΩ ====================
        const funnelData = {
            today: {
                leads: 45,
                customers: 28,
                testdrive: 12,
                locked: 6,
                delivered: 3
            },
            week: {
                leads: 180,
                customers: 108,
                testdrive: 48,
                locked: 24,
                delivered: 12
            },
            month: {
                leads: 580,
                customers: 348,
                testdrive: 156,
                locked: 78,
                delivered: 42
            },
            quarter: {
                leads: 1620,
                customers: 972,
                testdrive: 437,
                locked: 218,
                delivered: 117
            }
        };

        let currentPeriod = 'month';

        function openSalesFunnel() {
            document.getElementById('funnelModal').classList.add('active');
            updateFunnelData(currentPeriod);
        }

        function closeSalesFunnel() {
            document.getElementById('funnelModal').classList.remove('active');
        }

        function switchPeriod(period) {
            currentPeriod = period;

            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            document.querySelectorAll('.period-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Êõ¥Êñ∞ÊºèÊñóÊï∞ÊçÆ
            updateFunnelData(period);
        }

        function updateFunnelData(period) {
            const data = funnelData[period];

            // ËÆ°ÁÆóËΩ¨ÂåñÁéá
            const leadsToCustomers = ((data.customers / data.leads) * 100).toFixed(1);
            const customersToTestdrive = ((data.testdrive / data.customers) * 100).toFixed(1);
            const testdriveToLocked = ((data.locked / data.testdrive) * 100).toFixed(1);
            const lockedToDelivered = ((data.delivered / data.locked) * 100).toFixed(1);

            // Êõ¥Êñ∞Êï∞Â≠ó
            document.getElementById('funnel-leads').textContent = data.leads;
            document.getElementById('funnel-customers').textContent = data.customers;
            document.getElementById('funnel-testdrive').textContent = data.testdrive;
            document.getElementById('funnel-locked').textContent = data.locked;
            document.getElementById('funnel-delivered').textContent = data.delivered;

            // Êõ¥Êñ∞ËΩ¨ÂåñÁéáÊòæÁ§∫
            document.querySelectorAll('.stage-rate')[1].textContent = `${leadsToCustomers}% ËΩ¨Âåñ`;
            document.querySelectorAll('.stage-rate')[2].textContent = `${customersToTestdrive}% ËΩ¨Âåñ`;
            document.querySelectorAll('.stage-rate')[3].textContent = `${testdriveToLocked}% ËΩ¨Âåñ`;
            document.querySelectorAll('.stage-rate')[4].textContent = `${lockedToDelivered}% ËΩ¨Âåñ`;

            // Êõ¥Êñ∞ËΩ¨ÂåñÁéáÂç°Áâá
            document.querySelectorAll('.conversion-value')[0].textContent = `${leadsToCustomers}%`;
            document.querySelectorAll('.conversion-value')[1].textContent = `${customersToTestdrive}%`;
            document.querySelectorAll('.conversion-value')[2].textContent = `${testdriveToLocked}%`;
            document.querySelectorAll('.conversion-value')[3].textContent = `${lockedToDelivered}%`;

            // Ê∑ªÂä†Âä®ÁîªÊïàÊûú
            document.querySelectorAll('.funnel-stage').forEach((stage, index) => {
                stage.style.opacity = '0';
                stage.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    stage.style.transition = 'all 0.5s';
                    stage.style.opacity = '1';
                    stage.style.transform = 'translateY(0)';
                }, index * 100);
            });
        }

        // ÁÇπÂáªÁ©∫ÁôΩÂå∫ÂüüÂÖ≥Èó≠ÈîÄÂîÆÊºèÊñó
        document.getElementById('funnelModal')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closeSalesFunnel();
            }
        });

        // ==================== üÜï ÂêàÂêåÁÆ°ÁêÜÂäüËÉΩ ====================
        function openContract() {
            document.getElementById('contractModal').classList.add('active');
            switchContractTab('template');
        }

        function closeContract() {
            document.getElementById('contractModal').classList.remove('active');
        }

        function switchContractTab(tab) {
            // ÈöêËóèÊâÄÊúâtab
            document.getElementById('contractTemplate').style.display = 'none';
            document.getElementById('contractList').style.display = 'none';
            document.getElementById('contractSign').style.display = 'none';

            // ÈáçÁΩÆÊåâÈíÆÊ†∑Âºè
            document.getElementById('btnTemplate').className = 'voice-action-btn voice-cancel';
            document.getElementById('btnList').className = 'voice-action-btn voice-cancel';
            document.getElementById('btnSign').className = 'voice-action-btn voice-cancel';

            // ÊòæÁ§∫ÈÄâ‰∏≠tab
            if (tab === 'template') {
                document.getElementById('contractTemplate').style.display = 'block';
                document.getElementById('btnTemplate').className = 'voice-action-btn voice-confirm';
            } else if (tab === 'list') {
                document.getElementById('contractList').style.display = 'block';
                document.getElementById('btnList').className = 'voice-action-btn voice-confirm';
            } else if (tab === 'sign') {
                document.getElementById('contractSign').style.display = 'block';
                document.getElementById('btnSign').className = 'voice-action-btn voice-confirm';
            }
        }

        function generateContract(type) {
            const typeMap = {
                'standard': 'Ê†áÂáÜË¥≠ËΩ¶ÂêàÂêå',
                'finance': 'ÈáëËûçË¥≠ËΩ¶ÂêàÂêå',
                'trade': 'ÁΩÆÊç¢Ë¥≠ËΩ¶ÂêàÂêå'
            };
            showNotification(`Ê≠£Âú®ÁîüÊàê${typeMap[type]}...`);
            setTimeout(() => {
                showNotification(`‚úÖ ${typeMap[type]}Â∑≤ÁîüÊàêÔºÅÊ≠£Âú®Ëá™Âä®Â°´ÂÖÖÂÆ¢Êà∑‰ø°ÊÅØ...`);
            }, 1500);
        }

        function viewContract(id) {
            showNotification(`Ê≠£Âú®ÊâìÂºÄÂêàÂêå ${id}`);
        }

        function editContract(id) {
            showNotification(`Ê≠£Âú®ÁºñËæëÂêàÂêå ${id}`);
        }

        function remindSign(id) {
            showNotification(`Â∑≤ÂèëÈÄÅÁ≠æÁΩ≤ÊèêÈÜí`);
        }

        function resendContract(name) {
            showNotification(`Ê≠£Âú®ÈáçÊñ∞ÂèëÈÄÅÂêàÂêåÁªô${name}`);
        }

        function callCustomer(name) {
            showNotification(`Ê≠£Âú®Êã®Êâì${name}ÁöÑÁîµËØù...`);
        }

        // ==================== üÜï Ê∂àÊÅØÁæ§ÂèëÂäüËÉΩ ====================
        let selectedCustomers = new Set();

        function openBatchMessage() {
            document.getElementById('batchMessageModal').classList.add('active');
            updateSelectedCount();
        }

        function closeBatchMessage() {
            document.getElementById('batchMessageModal').classList.remove('active');
        }

        function toggleCustomerSelect(customerId) {
            const checkbox = document.getElementById(`check-${customerId}`);
            checkbox.checked = !checkbox.checked;

            if (checkbox.checked) {
                selectedCustomers.add(customerId);
            } else {
                selectedCustomers.delete(customerId);
            }
            updateSelectedCount();
        }

        function selectByStage(stage) {
            const stageCustomers = customers[stage];
            stageCustomers.forEach(c => {
                selectedCustomers.add(c.id);
                const checkbox = document.getElementById(`check-${c.id}`);
                if (checkbox) checkbox.checked = true;
            });
            updateSelectedCount();
            showNotification(`Â∑≤ÈÄâÊã©${getStageText(stage)}Èò∂ÊÆµÊâÄÊúâÂÆ¢Êà∑`);
        }

        function selectAll() {
            Object.values(customers).flat().forEach(c => {
                selectedCustomers.add(c.id);
                const checkbox = document.getElementById(`check-${c.id}`);
                if (checkbox) checkbox.checked = true;
            });
            updateSelectedCount();
            showNotification('Â∑≤ÈÄâÊã©ÊâÄÊúâÂÆ¢Êà∑');
        }

        function updateSelectedCount() {
            document.getElementById('selectedCount').textContent = selectedCustomers.size;
        }

        function useMessageTemplate(type) {
            const templates = {
                'follow': `{ÂßìÂêç}ÊÇ®Â•ΩÔºÅ

ÊàëÊòØÁêÜÊÉ≥Ê±ΩËΩ¶ÁöÑÈîÄÂîÆÈ°æÈóÆÊùéÊòé„ÄÇ‰∏äÊ¨°ÂíåÊÇ®Ê≤üÈÄöÂêéÔºå‰∏ÄÁõ¥ÊÉ¶ËÆ∞ÁùÄÊÇ®ÂØπ{ËΩ¶Âûã}ÁöÑÂÖ≥Ê≥®„ÄÇ

ÊàëËøôËæπ‰∏∫ÊÇ®Êï¥ÁêÜ‰∫Ü‰∏Ä‰ªΩÊúÄÊñ∞ÁöÑÈÖçÁΩÆÂíå‰ª∑Ê†º‰ø°ÊÅØÔºåÂÖ≥‰∫éÊÇ®ÁâπÂà´ÂÖ≥ÂøÉÁöÑ{ÂÖ≥Ê≥®ÁÇπ}ÔºåÁêÜÊÉ≥Âú®ËøôÊñπÈù¢Á°ÆÂÆûÊúâÂæàÂº∫ÁöÑ‰ºòÂäø„ÄÇ

Êñπ‰æøÁöÑËØùÔºåÊàëÊÉ≥Á∫¶ÊÇ®Êú¨Âë®Êú´Êù•Â∫óÈáåËØ¶ÁªÜËÅäËÅäÔºå‰πüÂèØ‰ª•ËØïÈ©æ‰ΩìÈ™å‰∏Ä‰∏ã„ÄÇÊÇ®ÁúãÂì™Â§©ÂêàÈÄÇÔºü`,

                'testdrive': `{ÂßìÂêç}ÊÇ®Â•ΩÔºÅ

ÊÑüË∞¢ÊÇ®ÂØπ{ËΩ¶Âûã}ÁöÑÂÖ≥Ê≥®„ÄÇÊàë‰ª¨Êú¨Âë®Êú´ÊúâËØïÈ©æ‰ΩìÈ™åÊ¥ªÂä®ÔºåËØöÈÇÄÊÇ®ÂíåÂÆ∂‰∫∫‰∏ÄËµ∑Êù•ÊÑüÂèóÁêÜÊÉ≥Ê±ΩËΩ¶ÁöÑÈ≠ÖÂäõ„ÄÇ

ËØïÈ©æÊ¥ªÂä®‰∫ÆÁÇπÔºö
‚úì ‰∏ì‰∏öÈ°æÈóÆÂÖ®Á®ãÈô™ÂêåËÆ≤Ëß£
‚úì ‰ΩìÈ™å{ÂÖ≥Ê≥®ÁÇπ}Á≠âÊ†∏ÂøÉÂäüËÉΩ
‚úì Âà∞Â∫óÊúâÁ≤æÁæéÁ§ºÂìÅ
‚úì Áé∞Âú∫ËÆ¢ËΩ¶‰∫´‰∏ìÂ±û‰ºòÊÉ†

ÊúüÂæÖÊÇ®ÁöÑÂà∞Êù•ÔºÅ`,

                'offer': `{ÂßìÂêç}ÊÇ®Â•ΩÔºÅ

Â•ΩÊ∂àÊÅØÔºÅ{ËΩ¶Âûã}Êú¨ÊúàÊúâÈôêÊó∂‰ºòÊÉ†Ê¥ªÂä®Ôºö
üí∞ Áé∞Èáë‰ºòÊÉ†10,000ÂÖÉ
üí∞ 36ÊúüÈõ∂ÊÅØÈáëËûçÊñπÊ°à
üí∞ ÁΩÆÊç¢Ë°•Ë¥¥ÊúÄÈ´ò8,000ÂÖÉ
üí∞ Á≤æÂìÅÁ§ºÂåÖ‰ª∑ÂÄº5,000ÂÖÉ

‰ºòÊÉ†Êà™Ê≠¢Êú¨ÊúàÂ∫ïÔºåÊú∫‰ºöÈöæÂæóÔºÅËØ¶ÊÉÖËØ∑ËÅîÁ≥ªÊàëÔºöÊùéÊòé 138****1234`,

                'delivery': `{ÂßìÂêç}ÊÇ®Â•ΩÔºÅ

ÊÇ®ËÆ¢Ë¥≠ÁöÑ{ËΩ¶Âûã}È¢ÑËÆ°Êú¨Âë®Âç≥ÂèØÂà∞Â∫óÔºÅ

ËØ∑ÊèêÂâçÂáÜÂ§áÔºö
‚úì Ë∫´‰ªΩËØÅÂéü‰ª∂
‚úì È©æÈ©∂ËØÅÂéü‰ª∂
‚úì Â∞æÊ¨æÊîØ‰ªò
‚úì ‰øùÈô©ËµÑÊñô

ÂÖ∑‰Ωì‰∫§‰ªòÊó∂Èó¥Êàë‰ºöÊèêÂâç3Â§©ÈÄöÁü•ÊÇ®„ÄÇÊúâ‰ªª‰ΩïÈóÆÈ¢òÈöèÊó∂ËÅîÁ≥ªÊàëÔºÅ`
            };

            document.getElementById('messageContent').value = templates[type] || '';
            showNotification('Ê®°ÊùøÂ∑≤Â∫îÁî®');
        }

        function aiGenerateMessage() {
            showNotification('AIÊ≠£Âú®Ê†πÊçÆÂÆ¢Êà∑ÁîªÂÉèÁîüÊàê‰∏™ÊÄßÂåñÊ∂àÊÅØ...');
            setTimeout(() => {
                document.getElementById('messageContent').value = `{ÂßìÂêç}ÊÇ®Â•ΩÔºÅ

ÊàëÊ≥®ÊÑèÂà∞ÊÇ®ÂØπ{ËΩ¶Âûã}ÁâπÂà´ÂÖ≥Ê≥®{ÂÖ≥Ê≥®ÁÇπ}Ëøô‰∏™ÊñπÈù¢„ÄÇÊ†πÊçÆÊÇ®{È¢ÑÁÆó}ÁöÑÈ¢ÑÁÆóÔºåÊàë‰∏∫ÊÇ®ÂáÜÂ§á‰∫ÜÊúÄÈÄÇÂêàÁöÑÈÖçÁΩÆÊñπÊ°à„ÄÇ

ÁêÜÊÉ≥Ê±ΩËΩ¶Âú®{ÂÖ≥Ê≥®ÁÇπ}È¢ÜÂüüÁ°ÆÂÆûÂÅöÂæóÂæàÂá∫Ëâ≤ÔºåÁõ∏ÊØîÁ´ûÂìÅÊúâÊòéÊòæ‰ºòÂäø„ÄÇËøôÂë®Êú´ÊúâÊó∂Èó¥ÁöÑËØùÔºåÊàëÊÉ≥Á∫¶ÊÇ®Êù•Ê∑±Â∫¶‰ΩìÈ™å‰∏Ä‰∏ãÔºåÁõ∏‰ø°‰ºöÁªôÊÇ®ÊÉäÂñú„ÄÇ

ÊúüÂæÖÊÇ®ÁöÑÂõûÂ§çÔºÅ
ÊùéÊòé - ÁêÜÊÉ≥Ê±ΩËΩ¶ÈîÄÂîÆÈ°æÈóÆ`;
                showNotification('‚úÖ AIÊ∂àÊÅØÁîüÊàêÂÆåÊàê');
            }, 1500);
        }

        function toggleSchedule() {
            const check = document.getElementById('scheduleCheck');
            const time = document.getElementById('scheduleTime');
            time.disabled = !check.checked;
        }

        function previewMessage() {
            const content = document.getElementById('messageContent').value;
            // Ê®°ÊãüÊõøÊç¢ÂèòÈáè
            const previewText = content
                .replace(/{ÂßìÂêç}/g, 'Âº†ÂÖàÁîü')
                .replace(/{ËΩ¶Âûã}/g, 'ÁêÜÊÉ≥L7')
                .replace(/{È¢ÑÁÆó}/g, '30-35‰∏á')
                .replace(/{ÂÖ≥Ê≥®ÁÇπ}/g, 'Êô∫ËÉΩÈ©æÈ©∂');

            document.getElementById('previewContent').textContent = previewText;
            document.getElementById('messagePreview').style.display = 'block';
        }

        function sendBatchMessage() {
            if (selectedCustomers.size === 0) {
                showNotification('ËØ∑ÂÖàÈÄâÊã©Ë¶ÅÂèëÈÄÅÁöÑÂÆ¢Êà∑');
                return;
            }

            const content = document.getElementById('messageContent').value;
            if (!content.trim()) {
                showNotification('ËØ∑ËæìÂÖ•Ê∂àÊÅØÂÜÖÂÆπ');
                return;
            }

            showNotification(`Ê≠£Âú®ÂèëÈÄÅÊ∂àÊÅØÁªô${selectedCustomers.size}‰ΩçÂÆ¢Êà∑...`);

            setTimeout(() => {
                showNotification(`‚úÖ Â∑≤ÊàêÂäüÂèëÈÄÅ${selectedCustomers.size}Êù°‰∏™ÊÄßÂåñÊ∂àÊÅØÔºÅ`);
                closeBatchMessage();
                selectedCustomers.clear();
            }, 2000);
        }

        // ==================== üÜï ÊµÅÁ®ãËá™Âä®ÂåñÂäüËÉΩ ====================
        function openWorkflow() {
            document.getElementById('workflowModal').classList.add('active');
        }

        function closeWorkflow() {
            document.getElementById('workflowModal').classList.remove('active');
        }

        function showWorkflowList() {
            showNotification('Ê≠£Âú®Âä†ËΩΩÊâÄÊúâËÆ¢ÂçïÊµÅÁ®ã...');
        }

        function markComplete(taskId) {
            showNotification('‰ªªÂä°Â∑≤Ê†áËÆ∞‰∏∫ÂÆåÊàê');
        }

        function viewTaskDetail(taskId) {
            showNotification('Ê≠£Âú®Êü•Áúã‰ªªÂä°ËØ¶ÊÉÖ...');
        }

        function checkApprovalStatus(name) {
            showNotification(`Ê≠£Âú®Êü•ËØ¢${name}ÁöÑÂÆ°ÊâπËøõÂ∫¶...`);
            setTimeout(() => {
                showNotification(`${name}ÁöÑÈáëËûçÂÆ°ÊâπÈ¢ÑËÆ°‰ªäÊó•16:00ÈÄöËøá`);
            }, 1000);
        }

        // ÁÇπÂáªÁ©∫ÁôΩÂå∫ÂüüÂÖ≥Èó≠ÂºπÁ™ó
        document.getElementById('contractModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeContract();
            }
        });

        document.getElementById('batchMessageModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeBatchMessage();
            }
        });

        document.getElementById('workflowModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeWorkflow();
            }
        });

        // ==================== üÜï AIÊ¨¢ËøéÁïåÈù¢ÂäüËÉΩ ====================
        let typingTimer = null;
        let currentCharIndex = 0;
        const welcomeMessage = "ÊùéSir ÊÇ®Â•ΩÔºåÊàëÂ∑≤‰∏∫ÊÇ®Êï¥ÁêÜÂ•Ω‰ªäÊó•Â∑•‰ΩúÂÜÖÂÆπ„ÄÇÊÇ®Êúâ‰ªª‰ΩïÈúÄË¶ÅÂèØ‰ª•Áõ¥Êé•Âî§Êàë\"ÁêÜÂêåÂ≠¶\"ÊâæÂà∞ÊàëÂì¶~";

        function showWelcome() {
            document.getElementById('welcomeOverlay').classList.add('active');
            // AIÂª∫ËÆÆÊ°ÜÁ´ãÂç≥ÊòæÁ§∫
            document.getElementById('aiSuggestionBox').classList.add('show');
            // ÂºÄÂßãÊâìÂ≠óÊïàÊûú
            startTyping();
        }

        function startTyping() {
            const typingElement = document.getElementById('typingText');
            typingElement.textContent = '';
            currentCharIndex = 0;

            typingTimer = setInterval(() => {
                if (currentCharIndex < welcomeMessage.length) {
                    typingElement.textContent += welcomeMessage[currentCharIndex];
                    currentCharIndex++;
                } else {
                    clearInterval(typingTimer);
                }
            }, 100); // ÊØè100msÊâì‰∏Ä‰∏™Â≠ó
        }

        function closeWelcome() {
            document.getElementById('welcomeOverlay').classList.remove('active');
            if (typingTimer) {
                clearInterval(typingTimer);
            }
        }

        function ignoreAISuggestion() {
            // ÂøΩÁï•Âª∫ËÆÆÔºåÁõ¥Êé•ËøõÂÖ•È¶ñÈ°µ
            closeWelcome();
            showNotification('Â∑≤ÂøΩÁï•AIÂª∫ËÆÆÔºåÂºÄÂßã‰ªäÊó•Â∑•‰Ωú');
        }

        function acceptAISuggestion() {
            // Êé•ÂèóÂª∫ËÆÆÔºåÊâìÂºÄÂæÖÂäû‰ªªÂä°ÂàóË°®
            closeWelcome();
            showNotification('Ê≠£Âú®‰∏∫ÊÇ®ÊâìÂºÄÂæÖÂäû‰ªªÂä°ÂàóË°®...');
            setTimeout(() => {
                openTodoList();
            }, 500);
        }

        function openFollowUpList() {
            closeWelcome();
            // ËøôÈáåÂèØ‰ª•ÊâìÂºÄ‰∏Ä‰∏™Ë∑üËøõÂÆ¢Êà∑ÂàóË°®
            showNotification('Ê≠£Âú®ÊâìÂºÄÈúÄË∑üËøõÂÆ¢Êà∑ÂàóË°®...');
            setTimeout(() => {
                showNotification('üìã ÂÖ±12‰∏™ÂÆ¢Êà∑ÈúÄ‰ªäÊó•Ë∑üËøõÔºöÂº†ÂÖàÁîü„ÄÅÈôàÂÖàÁîü„ÄÅËµµÂ•≥Â£´...');
            }, 500);
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÊòæÁ§∫Ê¨¢ËøéÁïåÈù¢
        window.addEventListener('load', function() {
            setTimeout(() => {
                showWelcome();
            }, 500);
        });
    </script>

    <!-- üÜï AIÊ¨¢ËøéÁïåÈù¢ -->
    <div class="welcome-overlay" id="welcomeOverlay">
        <div class="welcome-content">
            <div class="welcome-avatar">Êùé</div>
            <div class="welcome-title">
                <span class="ai-icon">ü§ñ</span>
                <span class="typing-text" id="typingText"></span>
            </div>

            <!-- ÊàòÂäõÂàÜÊûêÊ®°Âùó -->
            <div class="power-analysis">
                <div class="power-analysis-header">
                    <span class="power-icon">‚ö°</span>
                    <span class="power-title">ÊàòÂäõÂàÜÊûê</span>
                </div>
                <div class="power-content">
                    Êú¨Âë®ÊÇ®ÁöÑÊàòÂäõÂ∑≤Ë∂ÖË∂ä<strong>78%</strong>ÂêåÈó®Â∫ó‰ºô‰º¥ÔºåÂ∑≤Ë∂ÖË∂ä<strong>20%</strong>ÂêåÊàòÂå∫‰ºô‰º¥ÔºàÊú¨ÊúàÂêåÊàòÂå∫ÊàòÂäõÂÄº<strong>89</strong>ÔºåÂÖ®ÂõΩÊàòÂäõÂùáÂÄº<strong>78</strong>ÔºâÔºåÁªßÁª≠Âä†Ê≤πÂì¶ÔºÅ
                    <a class="power-detail-link" onclick="showNotification('Ê≠£Âú®ÊâìÂºÄÊàòÂäõËØ¶ÊÉÖ...')">Êü•ÁúãËØ¶ÊÉÖ</a>
                </div>
            </div>

            <div class="welcome-stats">
                <div class="welcome-stat-card" onclick="openTodoList()">
                    <div class="welcome-stat-info">
                        <div class="welcome-stat-label">üìã ‰ªäÊó•ÂæÖÂäû</div>
                        <div class="welcome-stat-value">5 ‰∏™</div>
                    </div>
                    <div class="welcome-stat-go">go</div>
                </div>
                <div class="welcome-stat-card" onclick="showNotification('Ê≠£Âú®ÊâìÂºÄÂæÖËØïÈ©æÂàóË°®...')">
                    <div class="welcome-stat-info">
                        <div class="welcome-stat-label">üöó ÂæÖËØïÈ©æ</div>
                        <div class="welcome-stat-value">3 ‰∏™</div>
                    </div>
                    <div class="welcome-stat-go">go</div>
                </div>
                <div class="welcome-stat-card" onclick="showNotification('Ê≠£Âú®ÊâìÂºÄÂæÖÁ≠æÁ∫¶ÂàóË°®...')">
                    <div class="welcome-stat-info">
                        <div class="welcome-stat-label">‚úçÔ∏è ÂæÖÁ≠æÁ∫¶</div>
                        <div class="welcome-stat-value">1 ‰∏™</div>
                    </div>
                    <div class="welcome-stat-go">go</div>
                </div>
                <div class="welcome-stat-card" onclick="showNotification('Ê≠£Âú®ÊâìÂºÄÂÆ¢Êà∑Ê±†...')">
                    <div class="welcome-stat-info">
                        <div class="welcome-stat-label">üë• ÂÆ¢Êà∑Ê±†</div>
                        <div class="welcome-stat-value">78 ‰∏™</div>
                    </div>
                    <div class="welcome-stat-go">go</div>
                </div>
            </div>

            <div class="welcome-highlight">
                Âè¶Â§ñÊÇ®ÁöÑÂÆ¢Êà∑Ê±†ÂÖ±Êúâ <strong onclick="openFollowUpList()">12‰∏™ÈúÄ‰ªäÊó•ÂéªË∑üËøõ</strong>
            </div>

            <!-- AIÂª∫ËÆÆÊ®°Âùó -->
            <div class="ai-suggestion-box" id="aiSuggestionBox">
                <div class="ai-suggestion-header">
                    <span class="ai-suggestion-icon">üí°</span>
                    <span class="ai-suggestion-title">AIÊô∫ËÉΩÂª∫ËÆÆ</span>
                </div>
                <div class="ai-suggestion-content">
                    Ê†πÊçÆÊÇ®ÁöÑÊó•Â∏∏Â∑•‰ΩúËÆ∞ÂΩïÔºå<strong>10:30amÂâç</strong>ÊÇ®ÊúâÁõ∏ÂØπÂØåË£ïÊó∂Èó¥Âéª‰ºòÂÖàÂ§ÑÁêÜ‰ªäÊó•ÁöÑ<strong>5‰∏™ÂæÖÂäû</strong>ÔºåËøòÂèØ‰ª•ÂéªË∑üËøõ<strong>10-15‰∏™</strong>A1ÂíåA3‰∏≠ÁöÑÈ´ò‰ºòÂÆ¢Êà∑„ÄÇ
                </div>
            </div>

            <!-- Â∫ïÈÉ®Âõ∫ÂÆöÊìç‰ΩúÊ†è -->
            <div class="welcome-bottom-bar">
                <button class="bottom-btn bottom-btn-secondary" onclick="closeWelcome()">Áü•ÈÅì‰∫ÜÔºåÂÖ≥Èó≠</button>
                <button class="bottom-btn bottom-btn-primary" onclick="acceptAISuggestion()">Â•ΩÁöÑÔºåÂê¨‰Ω†ÁöÑ</button>
            </div>
        </div>
    </div>

    <!-- üÜï Êï∞ÊçÆÁúãÊùøÂºπÁ™ó -->
    <div class="dashboard-modal" id="dashboardModal">
        <div class="dashboard-content">
            <div class="dashboard-header">
                <div class="dashboard-title">üìä Êï∞ÊçÆÁúãÊùø - ÈîÄÂîÆ‰∏öÁª©ÊÄªËßà</div>
                <div class="close-btn" onclick="closeDashboard()">&times;</div>
            </div>

            <!-- È°∂ÈÉ®ÂÖ≥ÈîÆÊåáÊ†á -->
            <div class="dashboard-grid" style="margin-bottom: 22px;">
                <div class="dashboard-card" style="background: linear-gradient(135deg, rgba(76, 175, 80, 0.2) 0%, rgba(76, 175, 80, 0.05) 100%); border-color: #4CAF50; padding: 18px;">
                    <div class="dashboard-card-title">‰ªäÊó•Êé•ÂæÖÈáè</div>
                    <div class="dashboard-card-value" style="color: #4CAF50; font-size: 1.9rem;">8</div>
                    <div class="dashboard-card-trend trend-up">
                        <span>‚ñ≤ 25%</span>
                        <span>ËæÉÊò®Êó• +2‰∫∫</span>
                    </div>
                </div>
                <div class="dashboard-card" style="background: linear-gradient(135deg, rgba(33, 150, 243, 0.2) 0%, rgba(33, 150, 243, 0.05) 100%); border-color: #2196F3; padding: 18px;">
                    <div class="dashboard-card-title">‰ªäÊó•ËØïÈ©æÈáè</div>
                    <div class="dashboard-card-value" style="color: #2196F3; font-size: 1.9rem;">3</div>
                    <div class="dashboard-card-trend trend-up">
                        <span>‚ñ≤ 50%</span>
                        <span>ËæÉÊò®Êó• +1‰∫∫</span>
                    </div>
                </div>
                <div class="dashboard-card" style="background: linear-gradient(135deg, rgba(255, 152, 0, 0.2) 0%, rgba(255, 152, 0, 0.05) 100%); border-color: #FF9800; padding: 18px;">
                    <div class="dashboard-card-title">‰ªäÊó•Á≠æÁ∫¶Èáè</div>
                    <div class="dashboard-card-value" style="color: #FF9800; font-size: 1.9rem;">1</div>
                    <div class="dashboard-card-trend style="color: rgba(255, 255, 255, 0.6);">
                        <span>‚Üí ÊåÅÂπ≥</span>
                        <span>‰øùÊåÅÁ®≥ÂÆö</span>
                    </div>
                </div>
            </div>

            <!-- Êú¨ÊúàÁ¥ØËÆ°Êï∞ÊçÆ -->
            <div style="margin-top: 30px; padding: 20px; background: rgba(255, 255, 255, 0.03); border-radius: 16px;">
                <h3 style="color: var(--li-gold); margin-bottom: 15px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                    <span>üìà</span>
                    <span>Êú¨ÊúàÁ¥ØËÆ°‰∏öÁª©</span>
                </h3>
                <div class="dashboard-grid" style="margin-bottom: 0; grid-template-columns: repeat(4, 1fr);">
                    <div class="dashboard-card" style="padding: 20px;">
                        <div class="dashboard-card-title">Á¥ØËÆ°Á∫øÁ¥¢</div>
                        <div class="dashboard-card-value" style="font-size: 1.9rem;">890</div>
                        <div class="dashboard-card-trend trend-up" style="display: flex; justify-content: space-between; align-items: center;">
                            <span>ÁõÆÊ†á 1200</span>
                            <div style="display: flex; gap: 5px; align-items: center;">
                                <span>ÂÆåÊàêÁéá 74%</span>
                                <button onclick="openAIForLeads()" style="background: linear-gradient(135deg, var(--li-gold), #b08d55); border: none; border-radius: 50%; width: 24px; height: 24px; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; justify-content: center;" title="AIÂàÜÊûê">ü§ñ</button>
                            </div>
                        </div>
                    </div>
                    <div class="dashboard-card" style="padding: 20px;">
                        <div class="dashboard-card-title">Á¥ØËÆ°Êé•ÂæÖ</div>
                        <div class="dashboard-card-value" style="font-size: 1.9rem;">156</div>
                        <div class="dashboard-card-trend trend-up">
                            <span>ÁõÆÊ†á 200</span>
                            <span>ÂÆåÊàêÁéá 78%</span>
                        </div>
                    </div>
                    <div class="dashboard-card" style="padding: 20px;">
                        <div class="dashboard-card-title">Á¥ØËÆ°ËØïÈ©æ</div>
                        <div class="dashboard-card-value" style="font-size: 1.9rem;">68</div>
                        <div class="dashboard-card-trend trend-up">
                            <span>ËΩ¨ÂåñÁéá 43.6%</span>
                            <span>‰ºò‰∫éÂπ≥Âùá</span>
                        </div>
                    </div>
                    <div class="dashboard-card" style="padding: 20px;">
                        <div class="dashboard-card-title">Á¥ØËÆ°Á≠æÁ∫¶</div>
                        <div class="dashboard-card-value" style="font-size: 1.9rem;">42</div>
                        <div class="dashboard-card-trend trend-up">
                            <span>ÁõÆÊ†á 40</span>
                            <span>ÂÆåÊàêÁéá 105%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÈîÄÂîÆÊºèÊñóÂõæË°® -->
            <div style="margin-top: 30px;">
                <h3 style="color: var(--li-gold); margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                    <span>üìä</span>
                    <span>Êú¨ÊúàÈîÄÂîÆÊºèÊñóËΩ¨Âåñ</span>
                </h3>

                <!-- Â∑¶Âè≥‰∏§Â§ßÈÉ®ÂàÜÁªìÊûÑ -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">

                <!-- Â∑¶‰æßÔºöÊºèÊñóÂèØËßÜÂåñ -->
                    <div style="background: rgba(255, 255, 255, 0.05); border-radius: 16px; padding: 30px; display: flex; flex-direction: column; justify-content: center; position: relative;">
                        <div style="text-align: center; margin-bottom: auto;">
                            <!-- Ê¢ØÂΩ¢ÊºèÊñóËÆæËÆ° -->
                            <div style="display: flex; flex-direction: column; align-items: center; gap: 8px;">
                                <!-- Á∫øÁ¥¢Èáè -->
                                <div style="width: 100%; max-width: 280px; height: 60px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <span style="font-size: 1.3rem;">üéØ</span>
                                        <div style="text-align: left;">
                                            <div style="font-size: 0.85rem; color: rgba(255,255,255,0.9);">Á∫øÁ¥¢Èáè</div>
                                            <div style="font-size: 0.6rem; color: rgba(255,255,255,0.7);">Marketing Leads</div>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 1.2rem; font-weight: bold; color: white;">580</div>
                                        <div style="font-size: 0.65rem; color: rgba(255,255,255,0.8);">100%</div>
                                    </div>
                                </div>

                                <div style="font-size: 1rem; color: var(--li-gold); text-align: center;">‚Üì</div>

                                <!-- ÂÆ¢Êà∑Èáè -->
                                <div style="width: 85%; max-width: 238px; height: 60px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); display: flex; align-items: center; justify-content: space-between; padding: 0 18px; border-radius: 8px; box-shadow: 0 4px 12px rgba(240, 147, 251, 0.4);">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <span style="font-size: 1.3rem;">üë•</span>
                                        <div style="text-align: left;">
                                            <div style="font-size: 0.85rem; color: rgba(255,255,255,0.9);">ÂÆ¢Êà∑Èáè</div>
                                            <div style="font-size: 0.6rem; color: rgba(255,255,255,0.7);">Valid Customers</div>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 1.2rem; font-weight: bold; color: white;">348</div>
                                        <div style="font-size: 0.65rem; color: rgba(255,255,255,0.8);">60%</div>
                                    </div>
                                </div>

                                <div style="font-size: 1rem; color: var(--li-gold); text-align: center;">‚Üì</div>

                                <!-- ËØïÈ©æÈáè -->
                                <div style="width: 70%; max-width: 196px; height: 60px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); display: flex; align-items: center; justify-content: space-between; padding: 0 16px; border-radius: 8px; box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <span style="font-size: 1.3rem;">üöó</span>
                                        <div style="text-align: left;">
                                            <div style="font-size: 0.85rem; color: rgba(255,255,255,0.9);">ËØïÈ©æÈáè</div>
                                            <div style="font-size: 0.6rem; color: rgba(255,255,255,0.7);">Test Drive</div>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 1.2rem; font-weight: bold; color: white;">156</div>
                                        <div style="font-size: 0.65rem; color: rgba(255,255,255,0.8);">45%</div>
                                    </div>
                                </div>

                                <div style="font-size: 1rem; color: var(--li-gold); text-align: center;">‚Üì</div>

                                <!-- ÈîÅÂçïÈáè -->
                                <div style="width: 55%; max-width: 154px; height: 60px; background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); display: flex; align-items: center; justify-content: space-between; padding: 0 14px; border-radius: 8px; box-shadow: 0 4px 12px rgba(67, 233, 123, 0.4);">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <span style="font-size: 1.3rem;">üîí</span>
                                        <div style="text-align: left;">
                                            <div style="font-size: 0.85rem; color: rgba(255,255,255,0.9);">ÈîÅÂçïÈáè</div>
                                            <div style="font-size: 0.6rem; color: rgba(255,255,255,0.7);">Locked Orders</div>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 1.2rem; font-weight: bold; color: white;">78</div>
                                        <div style="font-size: 0.65rem; color: rgba(255,255,255,0.8);">50%</div>
                                    </div>
                                </div>

                                <div style="font-size: 1rem; color: var(--li-gold); text-align: center;">‚Üì</div>

                                <!-- ‰∫§‰ªòÈáè -->
                                <div style="width: 40%; max-width: 112px; height: 60px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); display: flex; align-items: center; justify-content: space-between; padding: 0 12px; border-radius: 8px; box-shadow: 0 4px 12px rgba(250, 112, 154, 0.4);">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <span style="font-size: 1.3rem;">‚úÖ</span>
                                        <div style="text-align: left;">
                                            <div style="font-size: 0.85rem; color: rgba(255,255,255,0.9);">‰∫§‰ªòÈáè</div>
                                            <div style="font-size: 0.6rem; color: rgba(255,255,255,0.7);">Delivered</div>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 1.2rem; font-weight: bold; color: white;">42</div>
                                        <div style="font-size: 0.65rem; color: rgba(255,255,255,0.8);">54%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Âè≥‰æßÔºöAIÊ†πÂõ†ÂàÜÊûê -->
                    <div style="background: rgba(33, 150, 243, 0.1); border-radius: 16px; padding: 30px; border-left: 4px solid #2196F3;">
                        <div style="margin-bottom: 25px;">
                            <h4 style="color: #2196F3; font-size: 1.3rem; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                <span>ü§ñ</span>
                                <span>AIÊ†πÂõ†ÂàÜÊûê</span>
                            </h4>
                            <div style="background: rgba(76, 175, 80, 0.15); padding: 15px; border-radius: 10px; border-left: 3px solid #4CAF50; margin-bottom: 20px;">
                                <div style="color: #4CAF50; font-weight: bold; margin-bottom: 8px; font-size: 0.9rem;">üìä ‰∏ÄÂè•ËØùÊÄªÁªì</div>
                                <div style="color: rgba(255, 255, 255, 0.9); line-height: 1.6; font-size: 0.95rem;">
                                    Êú¨ÊúàÊï¥‰ΩìËΩ¨ÂåñÊºèÊñóÂÅ•Â∫∑ÔºåÁ∫øÁ¥¢Âà∞ÂÆ¢Êà∑ËΩ¨ÂåñÁéáËææ60%Ë°®Áé∞‰ºòÁßÄÔºå‰ΩÜËØïÈ©æÂà∞ÈîÅÂçïÁéØËäÇÈúÄÈáçÁÇπÂÖ≥Ê≥®ÊèêÂçáÁ©∫Èó¥„ÄÇ
                                </div>
                            </div>
                        </div>

                        <!-- ÂêÑÂ±ÇÁ∫ßÂàÜÊûê -->
                        <div style="margin-bottom: 20px;">
                            <h5 style="color: var(--li-gold); font-size: 1.1rem; margin-bottom: 15px;">üìà ÂêÑÂ±ÇÁ∫ßÂàÜÊûê</h5>

                            <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <span style="color: rgba(255, 255, 255, 0.9); font-weight: bold;">Á∫øÁ¥¢ ‚Üí ÂÆ¢Êà∑</span>
                                    <span style="color: #4CAF50; font-weight: bold; font-size: 1.1rem;">60.0%</span>
                                </div>
                                <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.85rem; line-height: 1.5;">
                                    <strong style="color: var(--li-gold);">ÊÄªËÆ°Ôºö</strong>580Á∫øÁ¥¢ ‚Üí 348ÂÆ¢Êà∑<br>
                                    <strong style="color: #2196F3;">ÂàÜÊûêÔºö</strong>Á∫øÁ¥¢Ë¥®Èáè‰ºòÁßÄÔºåÁ≠õÈÄâÊú∫Âà∂ÊúâÊïàÔºåÂª∫ËÆÆ‰øùÊåÅÂΩìÂâçËé∑ÂÆ¢Á≠ñÁï•
                                </div>
                            </div>

                            <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <span style="color: rgba(255, 255, 255, 0.9); font-weight: bold;">ÂÆ¢Êà∑ ‚Üí ËØïÈ©æ</span>
                                    <span style="color: #4CAF50; font-weight: bold; font-size: 1.1rem;">44.8%</span>
                                </div>
                                <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.85rem; line-height: 1.5;">
                                    <strong style="color: var(--li-gold);">ÊÄªËÆ°Ôºö</strong>348ÂÆ¢Êà∑ ‚Üí 156ËØïÈ©æ<br>
                                    <strong style="color: #2196F3;">ÂàÜÊûêÔºö</strong>ËØïÈ©æÈÇÄÁ∫¶ËΩ¨ÂåñÊ≠£Â∏∏ÔºåÂèØÈÄöËøá‰ºòÂåñÈÇÄÁ∫¶ËØùÊúØÂíåËØïÈ©æ‰ΩìÈ™åÊèêÂçáËΩ¨Âåñ
                                </div>
                            </div>

                            <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <span style="color: rgba(255, 255, 255, 0.9); font-weight: bold;">ËØïÈ©æ ‚Üí ÈîÅÂçï</span>
                                    <span style="color: #FF9800; font-weight: bold; font-size: 1.1rem;">50.0%</span>
                                </div>
                                <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.85rem; line-height: 1.5;">
                                    <strong style="color: var(--li-gold);">ÊÄªËÆ°Ôºö</strong>156ËØïÈ©æ ‚Üí 78ÈîÅÂçï<br>
                                    <strong style="color: #FF9800;">‚ö†Ô∏è ÂÖ≥ÈîÆÁéØËäÇÔºö</strong>ËØïÈ©æÂêéË∑üËøõÈúÄÂä†Âº∫ÔºåÂª∫ËÆÆ24Â∞èÊó∂ÂÜÖÂøÖÈ°ªËÅîÁ≥ªÂÆ¢Êà∑
                                </div>
                            </div>

                            <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <span style="color: rgba(255, 255, 255, 0.9); font-weight: bold;">ÈîÅÂçï ‚Üí ‰∫§‰ªò</span>
                                    <span style="color: #4CAF50; font-weight: bold; font-size: 1.1rem;">53.8%</span>
                                </div>
                                <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.85rem; line-height: 1.5;">
                                    <strong style="color: var(--li-gold);">ÊÄªËÆ°Ôºö</strong>78ÈîÅÂçï ‚Üí 42‰∫§‰ªò<br>
                                    <strong style="color: #2196F3;">ÂàÜÊûêÔºö</strong>‰∫§‰ªòËΩ¨ÂåñÁ®≥ÂÆöÔºåÈúÄÂÖ≥Ê≥®Êú™‰∫§‰ªòËÆ¢ÂçïÁöÑÂÆ°ÊâπÂíåÁâ©ÊµÅËøõÂ∫¶
                                </div>
                            </div>
                        </div>

                        <!-- üÜï Êé¢ÈúÄÂÆ¢Êà∑ÂèëÁé∞Ê®°Âùó -->
                        <div style="background: rgba(255, 152, 0, 0.15); padding: 20px; border-radius: 12px; border-left: 4px solid #FF9800; margin-bottom: 20px;">
                            <h5 style="color: #FF9800; font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 6px;">
                                <span>üéØ</span>
                                <span>Êé¢ÈúÄÂÆ¢Êà∑ÂèëÁé∞</span>
                            </h5>
                            <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.85rem; margin-bottom: 15px; line-height: 1.6;">
                                ÁªºÂêà‰πãÂâçÊÇ®ÁöÑÂÆ¢Êà∑Ê≤üÈÄöËÆ∞ÂΩïÂàÜÊûêÔºå‰ª•‰∏ãÂÆ¢Êà∑ÊúâÊØîËæÉÈáçË¶ÅÁöÑÁóõÁÇπÂèØÈíàÂØπÊÄßËß£ÂÜ≥
                            </div>

                            <!-- ÂÆ¢Êà∑ÁóõÁÇπÂàóË°® -->
                            <div style="background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 8px; margin-bottom: 10px;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 6px;">
                                    <div style="font-weight: bold; color: var(--li-gold);">Âº†ÂÖàÁîü</div>
                                    <div style="background: rgba(255, 87, 34, 0.3); color: #FF5722; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem;">‰ª∑Ê†ºÊïèÊÑü</div>
                                </div>
                                <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.8rem; line-height: 1.5;">
                                    ÁóõÁÇπÔºöÈ¢ÑÁÆó30‰∏á‰ΩÜÁúã‰∏≠‰∫Ü34.98‰∏áÁöÑL7 MaxÈÖçÁΩÆ<br>
                                    Âª∫ËÆÆÔºöÊé®ËçêÈáëËûçÊñπÊ°àÔºå36ÊúüÈõ∂ÊÅØÊúà‰æõ‰ªÖ6,222ÂÖÉ
                                </div>
                            </div>

                            <div style="background: rgba(255, 255, 255, 0.05); padding: 12px; border-radius: 8px; margin-bottom: 10px;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 6px;">
                                    <div style="font-weight: bold; color: var(--li-gold);">ÁéãÂ•≥Â£´</div>
                                    <div style="background: rgba(156, 39, 176, 0.3); color: #9C27B0; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem;">Áª≠Ëà™ÁÑ¶Ëôë</div>
                                </div>
                                <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.8rem; line-height: 1.5;">
                                    ÁóõÁÇπÔºöÊãÖÂøÉÂÜ¨Â≠£Áª≠Ëà™‰∏çË∂≥ÔºåÂÖÖÁîµ‰∏ç‰æø<br>
                                    Âª∫ËÆÆÔºöÊé®ÈÄÅÂÜ¨Â≠£ÂÆûÊµãÊï∞ÊçÆÂíåÂÖÖÁîµÁ´ôÂàÜÂ∏ÉÂõæ
                                </div>
                            </div>

                            <div style="background: rgba(255, 182, 193, 0.1); padding: 12px; border-radius: 8px; margin-bottom: 15px;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                    <span style="font-size: 1.2rem;">üì±</span>
                                    <span style="color: rgba(255, 255, 255, 0.9); font-weight: bold; font-size: 0.9rem;">Á§æ‰∫§Â™í‰ΩìÂä®ÊÄÅ</span>
                                </div>
                                <div style="color: rgba(255, 105, 180, 0.9); font-size: 0.8rem; line-height: 1.6;">
                                    Êúâ3‰∏™ÂÆ¢Êà∑Âú®Á§æ‰∫§Â™í‰ΩìÊõ¥Êñ∞‰∫ÜÂä®ÊÄÅÔºåÂª∫ËÆÆÂéªÁúãÁúãÁÇπ‰∏™ËµûÂêßÔºÅ
                                    <br>‚Ä¢ ÈôàÂÖàÁîüÂàÜ‰∫´‰∫Ü‰∫≤Â≠êÂá∫Ê∏∏ÁÖßÁâá
                                    <br>‚Ä¢ ÂàòÂ•≥Â£´ËΩ¨ÂèëÊñ∞ËÉΩÊ∫êËΩ¶ËØÑÊµã
                                    <br>‚Ä¢ ËµµÂ•≥Â£´ËØÑËÆ∫‰∫ÜÁêÜÊÉ≥L7ËØïÈ©æ‰ΩìÈ™å
                                </div>
                            </div>

                            <button onclick="viewSocialMedia()" style="width: 100%; padding: 10px; background: rgba(255, 152, 0, 0.3); border: 1px solid #FF9800; border-radius: 8px; color: #FF9800; font-weight: bold; cursor: pointer; transition: all 0.2s; font-size: 0.9rem;">
                                Êü•ÁúãÁ§æ‰∫§Â™í‰Ωì‰∫íÂä® ‚Üí
                            </button>
                        </div>

                        <!-- ‰∏ã‰∏ÄÊ≠•Âª∫ËÆÆ -->
                        <div style="background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: 10px; border-left: 3px solid #4CAF50;">
                            <h5 style="color: #4CAF50; font-size: 1rem; margin-bottom: 12px; display: flex; align-items: center; gap: 6px;">
                                <span>üí°</span>
                                <span>‰∏ã‰∏ÄÊ≠•Âª∫ËÆÆ</span>
                            </h5>
                            <ul style="margin: 0; padding-left: 20px; color: rgba(255, 255, 255, 0.85); font-size: 0.9rem; line-height: 1.8;">
                                <li>Âº∫ÂåñËØïÈ©æÂêéÁöÑ24Â∞èÊó∂ÈªÑÈáëË∑üËøõÊó∂Èó¥ÔºåÊé®ÈÄÅÈáëËûçÊñπÊ°à</li>
                                <li>‰ºòÂåñËØïÈ©æ‰ΩìÈ™åÊµÅÁ®ãÔºåÈáçÁÇπÊºîÁ§∫Êô∫È©æÂäüËÉΩÂíåÁ©∫Èó¥‰ºòÂäø</li>
                                <li>ÂØπËØïÈ©æÊú™ÈîÅÂçïÂÆ¢Êà∑ËøõË°åÂàÜÁ±ªÁÆ°ÁêÜÔºåÈíàÂØπÊÄßÂà∂ÂÆöË∑üËøõÁ≠ñÁï•</li>
                                <li>Âä†Âø´ÈîÅÂçïÂêéÁöÑÈáëËûçÂÆ°ÊâπÂíåËΩ¶ËæÜÂàÜÈÖçÊµÅÁ®ãÔºåÁº©Áü≠‰∫§‰ªòÂë®Êúü</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- üÜï Â∑•ÂÖ∑ÁÆ±ÂºπÁ™ó -->
    <div class="toolbox-modal" id="toolboxModal">
        <div class="toolbox-content">
            <div class="dashboard-header">
                <div class="dashboard-title">üß∞ AIÊô∫ËÉΩÂ∑•ÂÖ∑ÁÆ±</div>
                <div class="close-btn" onclick="closeToolbox()">&times;</div>
            </div>

            <div class="toolbox-grid">
                <div class="agent-card" onclick="launchAgent('Ëé∑ÂÆ¢ÂÆù')">
                    <div class="agent-badge">ÁÉ≠Èó®</div>
                    <div class="agent-icon">üéØ</div>
                    <div class="agent-name">Ëé∑ÂÆ¢ÂÆù</div>
                    <div class="agent-desc">AIÊô∫ËÉΩËé∑ÂÆ¢Âä©ÊâãÔºåÁ≤æÂáÜÂàÜÊûêÂÆ¢Êà∑ÁîªÂÉèÔºåÊé®ËçêÊúÄ‰Ω≥Ëé∑ÂÆ¢Á≠ñÁï•</div>
                </div>

                <div class="agent-card" onclick="launchAgent('È´òÊÉÖÂïÜÈù¢ÂÆ¢')">
                    <div class="agent-badge">Êé®Ëçê</div>
                    <div class="agent-icon">üòä</div>
                    <div class="agent-name">È´òÊÉÖÂïÜÈù¢ÂÆ¢</div>
                    <div class="agent-desc">AIÊÉÖÂïÜÂä©ÊâãÔºåÂÆûÊó∂ÂàÜÊûêÂÆ¢Êà∑ÊÉÖÁª™ÔºåÊèê‰æõÊúÄ‰Ω≥Ê≤üÈÄöËØùÊúØ</div>
                </div>

                <div class="agent-card" onclick="launchAgent('Á≤æÂáÜËé∑ÂÆ¢')">
                    <div class="agent-icon">üîç</div>
                    <div class="agent-name">Á≤æÂáÜËé∑ÂÆ¢</div>
                    <div class="agent-desc">Â§ßÊï∞ÊçÆÂàÜÊûêÊΩúÂú®ÂÆ¢Êà∑ÔºåÁ≤æÂáÜÂÆö‰ΩçÈ´ò‰ª∑ÂÄºÁõÆÊ†á‰∫∫Áæ§</div>
                </div>

                <div class="agent-card" onclick="launchAgent('ÈîÄÂîÆÊäÄËÉΩËÆ≠ÁªÉ')">
                    <div class="agent-icon">üéì</div>
                    <div class="agent-name">ÈîÄÂîÆÊäÄËÉΩËÆ≠ÁªÉ</div>
                    <div class="agent-desc">AIÊ®°ÊãüÁúüÂÆûÂú∫ÊôØÔºåÊèêÂçáÈîÄÂîÆËØùÊúØÂíåË∞àÂà§ÊäÄÂ∑ß</div>
                </div>

                <div class="agent-card" onclick="launchAgent('ÂïÜÂ≠¶Èô¢')">
                    <div class="agent-badge">Êñ∞ÂìÅ</div>
                    <div class="agent-icon">üè´</div>
                    <div class="agent-name">ÂïÜÂ≠¶Èô¢</div>
                    <div class="agent-desc">Á≥ªÁªüÂåñÈîÄÂîÆÂüπËÆ≠ËØæÁ®ãÔºå‰ªéÊñ∞ÊâãÂà∞ÈîÄÂÜ†ÁöÑÊàêÈïø‰πãË∑Ø</div>
                </div>

                <div class="agent-card" onclick="launchAgent('Á´ûÂìÅÂàÜÊûê')">
                    <div class="agent-icon">‚öîÔ∏è</div>
                    <div class="agent-name">Á´ûÂìÅÂàÜÊûê</div>
                    <div class="agent-desc">AIËá™Âä®ÂØπÊØîÁ´ûÂìÅ‰ºòÂä£ÂäøÔºåÁîüÊàêÂ∑ÆÂºÇÂåñÈîÄÂîÆËØùÊúØ</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // üÜï ‰æßËæπÊ†èÂäüËÉΩ
        function openDashboard() {
            document.getElementById('dashboardModal').classList.add('active');
            setActiveSidebar(0);
        }

        function closeDashboard() {
            document.getElementById('dashboardModal').classList.remove('active');
        }

        function openToolbox() {
            document.getElementById('toolboxModal').classList.add('active');
            setActiveSidebar(3);
        }

        function closeToolbox() {
            document.getElementById('toolboxModal').classList.remove('active');
        }

        function setActiveSidebar(index) {
            document.querySelectorAll('.sidebar-item').forEach((item, i) => {
                if (i === index) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }

        function launchAgent(agentName) {
            closeToolbox();

            if (agentName === 'Ëé∑ÂÆ¢ÂÆù') {
                // ÊâìÂºÄAIÂä©ÊâãÂπ∂ÂèëÈÄÅÁ§æÂ™íËé∑ÂÆ¢ÊèêÁ§∫
                toggleAIChat();
                setTimeout(() => {
                    addChatMessage('ai', 'ÊùéSir,ÊàëÂàÜÊûê‰∫ÜÂá†‰∏™Á§æ‰∫§Â™í‰ΩìÁöÑËé∑ÂÆ¢ÊÉÖÂÜµÔºåÂèëÁé∞ÊäñÈü≥Âπ≥Âè∞ËßÜÈ¢ëËé∑ÂÆ¢ÊïàÊûú‰∏çÈîôÂì¶ÔºÅËÆ©Êàë‰ª¨Êù•ÁîüÊàêÂá†‰∏™ÁàÜÊ¨æËé∑ÂÆ¢ÁöÑËßÜÈ¢ëÂêßÔºåËØ∑ÈÄâÊã©‰ª•‰∏ãÂá†‰∏™ËØùÈ¢òÊñπÂêëÂéªÂà∂‰ΩúÁ¥†ÊùêÂêßÔºö<br><br><div style="background: rgba(212, 184, 134, 0.15); padding: 15px; border-radius: 10px; margin-top: 10px;"><strong>ËØ∑ÈÄâÊã©ËØùÈ¢òÊñπÂêëÔºö</strong></div><button onclick="selectVideoTopic(\'Êñ∞ËΩ¶Âûã‰∏äÂ∏ÇÊñπÂêë\')" style="display: block; width: 100%; margin: 8px 0; padding: 12px; background: rgba(33, 150, 243, 0.3); border: 1px solid #2196F3; border-radius: 8px; color: white; cursor: pointer;">1. Êñ∞ËΩ¶Âûã‰∏äÂ∏ÇÊñπÂêë</button><button onclick="selectVideoTopic(\'ÈáçÂ§ßÂà©Â•Ω‰ºòÊÉ†\')" style="display: block; width: 100%; margin: 8px 0; padding: 12px; background: rgba(76, 175, 80, 0.3); border: 1px solid #4CAF50; border-radius: 8px; color: white; cursor: pointer;">2. ÈáçÂ§ßÂà©Â•Ω‰ºòÊÉ†</button><button onclick="selectVideoTopic(\'ÁÉ≠ÁÇπÊêûÁ¨ëËßÜÈ¢ë\')" style="display: block; width: 100%; margin: 8px 0; padding: 12px; background: rgba(255, 152, 0, 0.3); border: 1px solid #FF9800; border-radius: 8px; color: white; cursor: pointer;">3. ÁÉ≠ÁÇπÊêûÁ¨ëËßÜÈ¢ë</button><button onclick="selectVideoTopic(\'ËΩ¶ÂûãÂåÖË£ÖÂÆ£‰º†\')" style="display: block; width: 100%; margin: 8px 0; padding: 12px; background: rgba(156, 39, 176, 0.3); border: 1px solid #9C27B0; border-radius: 8px; color: white; cursor: pointer;">4. ËΩ¶ÂûãÂåÖË£ÖÂÆ£‰º†</button>');
                }, 1000);
            } else {
                showNotification(`Ê≠£Âú®ÂêØÂä® ${agentName} AIÂä©Êâã...`);
                setTimeout(() => {
                    showNotification(`‚úÖ ${agentName} Â∑≤Â∞±Áª™ÔºåÂºÄÂßã‰∏∫ÊÇ®ÊúçÂä°ÔºÅ`);
                }, 1500);
            }
        }

        // üÜï ÈÄâÊã©ËßÜÈ¢ëËØùÈ¢ò
        function selectVideoTopic(topic) {
            addChatMessage('user', `ÊàëÈÄâÊã©‰∫ÜÔºö${topic}`);
            setTimeout(() => {
                addChatMessage('ai', `Â§™Ê£í‰∫ÜÔºÅÈÇ£‰πàÊù•‰∏ä‰º†‰∏ÄÂº†‰Ω†ÁöÑÊ≠£Èù¢Â§¥ÂÉèÂêßÔºåÊàë‰ª¨Â∞Ü‰∏∫ÊÇ®ÁîüÊàêÂÖ≥‰∫é"${topic}"ÁöÑ5ÁßíÁü≠ËßÜÈ¢ëÔºÅ<br><br><div style="background: rgba(212, 184, 134, 0.15); padding: 15px; border-radius: 10px; margin-top: 10px;"><input type="file" id="avatarUpload" accept="image/*" onchange="handleAvatarUpload(event)" style="display: none;"><button onclick="document.getElementById(\'avatarUpload\').click()" style="display: block; width: 100%; padding: 15px; background: linear-gradient(135deg, var(--li-gold), #b08d55); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; font-size: 1rem;">üì∑ ÁÇπÂáª‰∏ä‰º†Ê≠£Èù¢Â§¥ÂÉè</button></div>`);
            }, 500);
        }

        // üÜï Â§ÑÁêÜÂ§¥ÂÉè‰∏ä‰º†
        function handleAvatarUpload(event) {
            const file = event.target.files[0];
            if (file) {
                showNotification('üì∏ Ê≠£Âú®Â§ÑÁêÜÂ§¥ÂÉè...');
                setTimeout(() => {
                    addChatMessage('user', 'üíØ Â∑≤‰∏ä‰º†Â§¥ÂÉè');
                    setTimeout(() => {
                        // ÁîüÊàêËßÜÈ¢ëÈ¢ÑËßà
                        addChatMessage('ai', `<div style="text-align: center; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 15px; border: 2px solid rgba(212, 184, 134, 0.3);"><div style="font-size: 3rem; margin-bottom: 15px;">üé¨</div><div style="color: var(--li-gold); font-size: 1.3rem; font-weight: bold; margin-bottom: 10px;">ËßÜÈ¢ëÁîüÊàê‰∏≠...</div><div style="color: rgba(255, 255, 255, 0.7); margin-bottom: 15px;">AIÊ≠£Âú®‰∏∫ÊÇ®Âà∂‰Ωú5ÁßíÁü≠ËßÜÈ¢ë</div><div style="display: flex; justify-content: center; gap: 10px;"><div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #FF6B6B, #4ECDC4); display: flex; align-items: center; justify-content: center; font-size: 2rem; animation: spin 2s infinite;">‚öôÔ∏è</div><div style="color: rgba(255, 255, 255, 0.7); display: flex; align-items: center;">ÁîüÊàêËøõÂ∫¶ 100%</div></div></div>`);

                        // ÊòæÁ§∫ÁîüÊàêÁöÑËßÜÈ¢ë
                        setTimeout(() => {
                            addChatMessage('ai', `<div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.1); border-radius: 15px; border: 2px solid #4CAF50;"><div style="font-size: 3rem; margin-bottom: 10px;">‚úÖ</div><div style="color: #4CAF50; font-size: 1.3rem; font-weight: bold; margin-bottom: 15px;">ËßÜÈ¢ëÁîüÊàêÊàêÂäüÔºÅ</div><div style="background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 10px; margin-bottom: 15px; display: inline-block;"><video controls style="max-width: 100%; max-height: 200px; border-radius: 8px;"><source src="" type="video/mp4">ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅËßÜÈ¢ëÊ†áÁ≠æ</video></div><button onclick="publishToDouyin()" style="display: block; width: 100%; padding: 15px; background: linear-gradient(135deg, #FF4081, #FF80AB); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; font-size: 1rem; margin-top: 15px; transition: all 0.3s;">üöÄ ‰∏ÄÈîÆÂèëÂ∏ÉÂà∞ÊäñÈü≥</button></div>`);
                        }, 2000);
                    }, 500);
                }, 1000);
            }
        }

        // üÜï ÂèëÂ∏ÉÂà∞ÊäñÈü≥
        function publishToDouyin() {
            showNotification('üöÄ Ê≠£Âú®ÂèëÂ∏ÉÂà∞ÊäñÈü≥...');
            setTimeout(() => {
                addChatMessage('ai', `<div style="text-align: center; padding: 20px; background: rgba(33, 150, 243, 0.1); border-radius: 15px; border: 2px solid #2196F3;"><div style="font-size: 3rem; margin-bottom: 10px;">üéâ</div><div style="color: #2196F3; font-size: 1.3rem; font-weight: bold; margin-bottom: 10px;">ÂèëÂ∏ÉÊàêÂäüÔºÅ</div><div style="color: rgba(255, 255, 255, 0.8); line-height: 1.6;">ÊÇ®ÁöÑËßÜÈ¢ëÂ∑≤ÊàêÂäüÂèëÂ∏ÉÂà∞ÊäñÈü≥ÔºÅ<br>È¢ÑËÆ°24Â∞èÊó∂ÂÜÖËé∑Âæó 10,000+ ÊõùÂÖâÈáè<br>Ëé∑ÂÆùÂ∞ÜÊåÅÁª≠ÁõëÊµãËßÜÈ¢ëÊï∞ÊçÆÂπ∂‰ºòÂåñ</div></div>`);
                showNotification('‚úÖ ËßÜÈ¢ëÂ∑≤ÊàêÂäüÂèëÂ∏ÉÂà∞ÊäñÈü≥ÔºÅ');
            }, 2000);
        }

        // Ê∑ªÂä†ÊóãËΩ¨Âä®Áîª
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin {
                from { transform: rotate(0deg); }
                to { transform: rotate(360deg); }
            }
        `;
        document.head.appendChild(style);

        // ÁÇπÂáªÁ©∫ÁôΩÂå∫ÂüüÂÖ≥Èó≠ÂºπÁ™ó
        document.getElementById('dashboardModal')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closeDashboard();
            }
        });

        document.getElementById('toolboxModal')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closeToolbox();
            }
        });
    </script>
</body>
</html>